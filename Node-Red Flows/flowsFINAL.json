[{"id":"ce8e632f.2c0ec","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"ebf7676.b0d7a98","type":"tab","label":"DashBoard - Analog Config","disabled":false,"info":""},{"id":"8cf70e9a.0000a","type":"tab","label":"Dashboard - RS232/485 Config","disabled":false,"info":""},{"id":"c7d37b98.58bd68","type":"group","z":"ebf7676.b0d7a98","name":"config_i0","style":{"stroke":"#ffff00","label":true,"fill":"#ffffbf","fill-opacity":"0.5","color":"#000000"},"nodes":["2a74f633.a2b41a","93f5d4ec.9ef728","c480a3f8.28fd4","f081299c.ba4b58","d0215c45.1c75c","90af0b8e.4c6958","3781187b.219a28","924ec38d.3034c","c66f8989.561228","ccc21931.fa3008","51cc470a.53b6f8","ccda81d8.bb0ef","a8d480f3.7a293","c3af5ebf.f941c","78f5b232.9148bc","39b7267b.633dda","34f63892.191e68","305e1a22.a7a976","abf42540.d04488","adb4c635.910a58","adb70dc1.d5784","892cb127.75043","34df0df6.dbdc82","5847bb99.2fdbf4","75bfa1b6.5ac7d"],"x":2234,"y":39},{"id":"d7ef82b9.2abb6","type":"group","z":"ebf7676.b0d7a98","name":"config_i1","style":{"stroke":"#ffff00","label":true,"fill":"#ffff7f","fill-opacity":"0.5","color":"#000000"},"nodes":["bd239201.ed918","cd1fdf44.afd13","5c68466b.ad8a08","33d09a38.d3e1e6","875f53b9.a1a8c"],"x":2234,"y":1159},{"id":"698c1ef3.f853d","type":"group","z":"ebf7676.b0d7a98","name":"config_u0","style":{"stroke":"#0070c0","label":true,"fill":"#bfdbef","fill-opacity":"0.5","color":"#000000"},"nodes":["9050b9c1.c438c8","bff93a18.f95e88","540c94f7.f5f50c","be1d22ac.13d63","bddd40af.db2a6","b2a2c363.129e9","6e4428c3.091508","a20abefe.366ba","e5f6bc53.8aa2","a5d91bc4.a49c38","7e16387c.f56968","c348dc31.4bdc","9b23384d.5fe1f8","475d643f.25fb3c","fddf6b31.ff6998","ac46e351.de436","34c7ca6.a86bc36","ef17c280.4afe2","c2502a5c.5574a8","8ff804c.67fc7f8","d60b390.9198dc8","d82fe7bb.897d78","6e044177.28fb6","81cbac70.3ed7a","a4a6f697.2e3198","5e88b2f8.6d6c6c","3dc0e190.9ff0ee","476ba849.002988","fa36f301.40d81","c366a0fc.b3e3a","61e760b2.0c784","eea7f298.5e1f2","f1f0b01.b09e55","83d544c5.57c5b8","aa01524d.ecb64","37b4ac3d.89a834","1d9db901.327587","aace1b02.236838","d84e88de.629428","a4d7bbad.094a48","85cf5ff3.26d66","3699202f.cd109","f3a5da81.f45418","f05cc86a.d043f8","29882c55.b8f6c4","3fe295cd.2c578a","68d42afe.145c84","b8078ba.6257978","adaaa39e.4fd64","f96a36be.881308","442c1822.952298","78c5a18b.8edda","bead5504.cb3828","60a0fb4e.3038b4","35acd5d8.0c7c2a","1b6aa29d.b1e26d","da718de9.9569f","8edd069f.fdb598","9748e588.314018","b3d25330.75ee1","9a6d2f2a.c8047","ad0ab75c.28eeb8","9a09fe1b.23995","530fb4bb.afc98c","94872167.c6367","6935b78.ace6848"],"x":34,"y":39},{"id":"9be8224b.7bda3","type":"group","z":"ebf7676.b0d7a98","name":"config_u1","style":{"stroke":"#0070c0","label":true,"fill":"#bfdbef","fill-opacity":"0.5","color":"#000000"},"nodes":["245b7f4a.782a7","c4789673.403c28","f3055df.18692a","969078bc.1b2ce8","e0f418f2.c7fea8","d024ef4c.b1432","c94807f3.688818","6f43640.2aafc9c","71b5a583.5fcaec","80d89999.3bfa38","20539da3.5d5eb2","8e334a5d.e20908","67b7d594.46f31c","38705fa4.b0f9","1efaf883.5bbfb7","5531a48.ae0925c","87297b39.79fed8","4b0aad93.961134","b2d816fe.447488","c9dec460.4e28c8","f9765904.e7f5f8","a303876.274ab78","bfdfa099.7390f","bdb3be10.fb448","e18806.1a4d97f8","2e069d27.7be492","a0e7a51c.6066d8","45330198.5fcae","dba73d1.cf90cc","c8b54300.af74c","33f593ee.c18d7c","5c91bfe.0da454","6fd604b4.65596c","d8b25d65.823c1","5dd57dd6.052984","91d98029.ebeaf","383f01e9.2ef55e","a34b8215.b762d","f35fa8d0.636dc8","14dffa8a.8310f5","7f622732.44ab28","60408c18.9a8844","7a6bc32.008a73c","b5d4dda4.afe8","7f2c859b.3e4dac","299f19c7.a4aa16","74ebce45.3c06c","64e69473.bff40c","4d1f9eba.d8798","ea17c587.f39f78","486047df.883e68","62a1349.b5565cc","4a529208.e770dc","d3204f3e.deb05","2208ff77.d2d49","b6f9648f.ec5f48","c15014ab.8239e8","7112500e.05254","f7d4ae8f.358f7","f2c476e8.12d1e8","eca999d3.85dc68","57985694.93d4e8","589494c.24c266c","2e745bee.53ce24"],"x":34,"y":1159},{"id":"fcc1641d.4d81f8","type":"group","z":"8cf70e9a.0000a","name":"x30","style":{"fill":"#c8e7a7","label":true,"fill-opacity":"0.49"},"nodes":["e6db8e50.8d14","bfca1010.58feb","15b5da9a.331b15","abb08403.f286d8","97104e52.938f7","60a400b8.a9053","d4696447.e63968","d9b1bcdb.1f532","8778eb15.b8f1b8","63f5307b.149cb","88d6fed9.2dd8d","2678ff9b.90101","7ee6dda1.123094","c7787ae.a56f088","68c7012f.cdedd","9a2e0dfd.a3446","41bb3767.62ca88","cb65da22.15b4e8","bfa99a6b.2ebb48","4036ea.18599918","c4ed96f6.43dd68","3b8287ff.230878","fbfcf209.2b3c8","557def2a.b277c","8e4b4c42.05c11","6fb66f69.918d","8d374ada.06fad8","1fe931fb.b0e11e","c2a17aa1.3bf058","a3ec54fd.a4f608","d37bd964.9a1388","93d501c6.f1934","d3ca5f26.f5858","544ed029.4f0f1","487d69a0.aacd18","13b3be1f.ec5f82","9563799d.c5a478","be46d271.6e66a","a3a76511.620f18","6c54f6e3.fe49b8","b423faf7.ebf9c8","e6509e7c.69ac5","47778c2a.c20bb4","6130f980.ce45a8","b779a722.c609b8","60f4116e.19557","89d49ebd.28b1b","3e8597b0.0c53f8","f927e29c.f4387","6ef04153.35bed","8eeb0832.ead508","da3cbc74.74cdb","6b932a7f.1dd594","22b92b27.0b1294","78ce6064.4fbce","43585233.1b104c","6d0bb6ad.ce2688","9308837b.23d92","158e4fd8.047bf","66ec902.ca1f07","15765c0e.182ff4","ccd363bf.cb2b1","270b87fe.369dc8","65a0231d.8bc54c","fc00c9b.c752538","84750ddc.a5b9c","8f82d408.df9e88","2a4d4244.4aef4e","62a70b8f.6ef744","94aeb5b8.f50178","4c6c8175.7e1c4","63c8fb76.b17e94","aa37670b.7bde18","60991753.6d46d8","70d8d775.7cabe8"],"x":74,"y":99},{"id":"2f7be691.75aaea","type":"group","z":"8cf70e9a.0000a","name":"x31","style":{"fill":"#ffdf7f","label":true,"fill-opacity":"0.56"},"nodes":["5d212be8.b7cce4","74475d5c.fe48e4","2fb3700e.7a70b","14c31c9f.597553","a8a25727.fba9b8","69304dab.397fc4","faaada76.769578","d15af685.aef658","42e51e98.fe58b","b8c76a.e0c1a898","5c17b43d.38820c","c3259f3f.525eb","122d331b.2c822d","c74b5e2c.bfe9b","fc080c52.e00fb","a633273b.3a9e88","1fbdd68b.ede3c9","4593f3f8.f5291c","dad56502.1c0578","505dd35.8102d2c","ffe5b240.6ae58","42af0b71.5b8384","3583bae4.4a0e36","ab66bf31.41278","b89b304d.445a5","2ce3767f.10fe2a","4470e9a0.cd5a58","56c9027d.5e8aec","ecac6bfc.3e6668","2d1dfb2f.c48144","385b49f4.9d1896","953b3b01.65cba8","a1152019.48f3d","cb96abff.a5bf08","584d6066.45708","9641c20b.9e3f1","aef430c2.42f6e","ebda33a6.f3e","8bddbd9e.5b5ae","53f24e68.97eea","f0520451.0ae548","8003c647.c7b768","e96e0332.96845","cd596b48.9bdbf8","281fe019.2914b","4dadbb52.88d794","1b5c66fe.c0c289","ffaac352.b6c04","26044f86.bf2c8","e627467f.2d2598","1b80cbb8.2bc3f4","685d692c.8cd6f8","71df1404.933fbc","5a15fa87.d500e4","2d765c0e.4bd894","3361b688.d0f5ba","9fffbf04.30b54","511da1fb.b6de9","f868b9d0.5a7ad8","f6ad3efc.437b3","1b4209fa.fe3576","e3d6c3cc.4fbad","f32b0c17.8c499","7ebbf2dd.0dae8c","a56c4e52.54804","e5e5c87c.7e4c98","5689a42c.a97b4c","d41c66cf.0c8a08","24a3f94d.4851a6","f2810404.8b4698","9b60769a.ea6178","a3c5d994.a579d8","16cfaa5d.bd62a6","c9ef08fa.005458"],"x":74,"y":1499},{"id":"ed5fd225.61066","type":"group","z":"ce8e632f.2c0ec","name":"iot temps","style":{"stroke":"#ff0000","fill":"#ff7f7f","fill-opacity":"0.21","label":true},"nodes":["7f93554f.d0f98c","ea8c1a.e98d03e8","59a4304e.62091","370cc2dd.4d97ae","dda9ae24.4e46b","b08b8ad7.fc7318","83da37de.6c70e8"],"x":14,"y":2691.5,"w":1152,"h":169.5},{"id":"9ea8c61b.62a158","type":"group","z":"ce8e632f.2c0ec","name":"data collect","style":{"stroke":"#777777","stroke-opacity":"0.22","fill":"#c8e7a7","fill-opacity":"0.43","label":true},"nodes":["8131b6db.b56e98","72b8d1e.ba41e3","3aa75d7a.3fa402","b63f9d17.b067d","a4334051.b3597","fb81f3d3.1ecd8","1e665a84.8b2765","a94d9899.ab38d8"],"x":24,"y":2899,"w":1132,"h":142},{"id":"5391fe28.bbe19","type":"group","z":"ce8e632f.2c0ec","name":"u0 main page","style":{"stroke":"#000000","label":true,"fill":"#7fb7df","fill-opacity":"0.3"},"nodes":["a1a6a54f.284e88","cf82bcd.448ab4","5f555488.87a2bc","713a1909.52f1d8","a3cfc20f.d784e","34a12f43.0169f","438682fa.d88efc","1cd1ed13.c1f4f3","fe778542.431278","9010c0e5.dda2f","45e95a57.d66864","c6b08fe8.20c05","20a0e7db.2d1b68","9ac7aefa.14a3d","6082c7b6.6b2438","402f3775.9416c8","ac08509e.87fa5","8f4f20d1.0d1a2","e88a0397.b23ab","99e361fc.b2ff6","af049bbd.2c7de8","53da7021.229a8","cb94efba.5c613","e9a2ace3.ef5c2","fbf69db3.85a8f","2fb18a7c.9bb2e6","1c06711c.229e4f","23ebe85.9d6f718","607472fd.38f07c","f3720722.7e82b8","f891acd7.368fb","abb79bb0.d5b508","738ce48d.b3ba1c","37a582ec.227a7e","7dee21e7.d50b7","fdbf636f.ec0b5","466a8e1e.1e892","f2a9cfbf.440fa","ee4738b5.19ff58","15d93013.59b97","e628223b.86868","22bc0ba3.780484","72e34b6d.7b1e14","b7adad3c.6dde","69cf6a88.b62d34","7f22404f.f97a","d14541a.947dbc","d2a93341.6b92e","66fc1573.1b3f6c","13403d4f.174253","5b0cf05e.06b88","593a1c23.94afe4","f2c0a5e1.f9d078","6549059e.028a2c","bd2f8255.8fa46","a079aef0.9e109","46eab2b8.32366c","71876b2e.b680f4","2ee1bdf1.838462","e62d99d3.0de628","a4443455.7ccb38","e21dc6a5.1f5298","fb00bb00.929568","9e0a93f9.051b2","d8046b00.a622b8","75eba33.ced3f5c","9233c49b.40c038","2df2e172.11b7ae"],"x":14,"y":59,"w":2112,"h":1302},{"id":"b6816ff4.82367","type":"group","z":"ce8e632f.2c0ec","name":"u1 main page","style":{"fill":"#7fb7df","fill-opacity":"0.27","label":true},"nodes":["383daf9d.d3e1c","6b4c5ded.4be6b4","e25f2bb.9a2cdd8","e492eb04.125ad8","8b22d8c3.a04558","c148535e.2f667","f6096178.d1966","ba94731b.f020d","7bc62ced.f4bed4","e53785b6.d03b48","7086abdd.7e14d4","f1dc6ec8.e8385","df3eaebc.e917c","ffdf09bb.0371a8","d3854556.d0d938","3ef0860.66b647a","bb69b6d6.4bbe18","9fc6ec4e.e0566","3db3b952.878fe6","d75a6ca4.1f93","a822d685.eec988","8d5673e4.d0963","ce95c7d7.f44a88","f027d8b1.ec95d8","febd388e.b04b68","d0fc89bc.fbe158","25c15417.dc230c","c7d25e66.18205","dd050f15.bdb82","545ec733.879c88","dc5550aa.41631","defd72ae.0e449","88b62914.b35eb8","5b699c53.ba4074","4643abfc.ce3d44","ff3953c4.279c8","c7b70afd.d3a578","8afc7365.596fe","f974e86.a88be18","fe55a4f6.7f6198","564ac74f.ba60f8","406ac9d1.ab9218","707910cd.41b19","1c86ca5a.0d8fd6","a4901b5f.f5f898","3f94a997.ffa576","57348900.f683c8","9f62dd84.ccc8d","2d9cf8f7.06b158","84ba906d.051e4","971ef41.a634e08","61bb89d9.7fa498","9b78b9e7.ca5d48","4ffa1f6b.22aa","346041c2.90b9ee","27e86eb9.bc3332","5df2069d.964e48","b99db787.5627b8","1a3677fd.993378","34e3232f.5c81dc"],"x":14,"y":1379,"w":2112,"h":1282},{"id":"ebd5f28b.d5745","type":"group","z":"ce8e632f.2c0ec","name":"i0 main page","style":{"stroke":"#000000","fill":"#ffff7f","fill-opacity":"0.26","label":true},"nodes":["8363f228.fb908","e2ac5785.c106f8","3d4060b9.e2ab3","3c3289c8.816f76","6caae10.69c4d2","4e0e54ea.9ece5c","6e61984d.dc2c18","b9872534.186c48","965a9eef.ba5e1","e12925d5.e02e38","e1eefd2d.590c2","fd6139fb.506178","6a1a5aed.c10624","74bb1b94.a1ec84","78fad8e1.966318","c8c43189.43255","b930fc12.6369a","39a74091.6dc47","26f7f9fc.ec83e6","b63eb607.e882d8","e433a0ea.111b1","42f17822.b59e68","93152a6c.1c2e78","124896c8.faece9","4a06e930.516aa8","61601872.fb3728","bcbaa92f.fbe108","48c52b2a.f72434","87d7f07.715091","e425ab15.a07c18","7dd06123.93b5e","664e6e00.1187e4","1b4aa602.8e036a","5dc569cc.ffa2c8","38b48b32.c47ae4","4d4ff051.2ef04","887eebfb.82d5f8","ff5f2a74.dd4798","570f6e41.06195","e36eb896.99e278","ea6410bc.20d4b","81b2bf11.ee744","91c35bf4.99bfc8","e3202be6.c06e08","17db90f7.311c9f","1c8dd986.c25456","e886973b.9fb688","b669b702.5280a8","104fc5b0.32a4ea","dcefb8f5.b642d8","eac2c04c.daf42","4dc91cf8.7b35a4","4066c3cf.9a32fc","d22a4dbf.38fe3","ce754eb8.a49e6","db46bf8e.581e6","abe9f17e.082bd","c01a1361.aab1c","94b0cffe.f17f8","c9e4293a.d3db78"],"x":2374,"y":59,"w":2112,"h":1302},{"id":"b5e15dad.eb119","type":"group","z":"ce8e632f.2c0ec","name":"i1 main page","style":{"stroke":"#777777","label":true,"fill":"#ffff7f","fill-opacity":"0.23"},"nodes":["e5a82c37.b53c2","57414e9f.17367","a9246fa0.c8a81","e7ed0eaa.207d8","44e0e48e.06ad2c","596f94e.30eef6c","d376f924.2e11b8","3860f9dd.c8c4e6","884ae408.9aef58","6b3d6479.1cedec","3b3de1b1.58e2de","9c6ca599.3ba408","c90132dc.d749c","458d08a8.7bdc48","f99d4979.d50848","e104eaba.48e5b8","e683713.008809","b307c212.ed2d6","e020dd1a.1d6db","7ef57d1d.7ad204","ba7cb849.9831b8","5ca24b30.fb35c4","e387b20a.cedc6","8585d5f5.9c5538","d26159cf.ae9688","841fe5a8.7264c8","a4aecfe5.fc025","df0bf5ff.969398","4d849d2d.ea0de4","5c5a0a99.5b1544","d15cf381.337ca","4451113.83185f","39b3efda.1b1b9","fbea2b2a.89f398","b9e298ea.4e4c08","2380d822.7f7868","6b580b96.9a1084","49ba5e34.80b33","adc3cd2d.87c7c","1cc3e9f2.574e06","f0215a82.522c58","f94fd9.361c7028","4664a56e.332c0c","fd8f2576.284a08","97826049.fbe27","5934b063.d014b","d9a1cdaf.6a45e","4dd14cc6.ba4d94","a64e5fbf.51cb5","52c48973.651b48","4d39ea.8edda618","93283383.b02c8","55b2c58e.595a1c","fabb7478.4906d8","96b37c73.de80f","67fca018.813fd","cb940275.ebb95","684e5588.e4f57c","2bd4943.cbe146c","25d02d2.59f9bd2","30d55a64.e99ee6","1a5ac6fc.e22a39"],"x":2334,"y":1399,"w":2112,"h":1262},{"id":"49de8910.30c838","type":"ui_group","z":"","name":"","tab":"99139d81.bd79b","order":1,"disp":true,"width":"25","collapse":false},{"id":"99139d81.bd79b","type":"ui_tab","z":"","name":"Main","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"db34d2b3.1ea1e","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Bancada Virtual De Diagnóstico de Equipamentos Industriais","hideToolbar":"false","allowSwipe":"false","lockMenu":"true","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"4aab423b.86c03c","type":"ui_tab","name":"Analog Config","icon":"fa-sliders","order":4,"disabled":false,"hidden":false},{"id":"7af1bbd7.61d544","type":"ui_group","name":"Analog u0","tab":"","order":1,"disp":true,"width":12,"collapse":false},{"id":"b8623710.b94b58","type":"ui_group","z":"","name":"AnalogConfig","tab":"4aab423b.86c03c","order":1,"disp":false,"width":24,"collapse":false},{"id":"ed52b65f.956538","type":"ui_tab","name":"RS232/485 Config","icon":"fa-sliders","order":5,"disabled":false,"hidden":false},{"id":"c0410b2b.230078","type":"ui_group","z":"","name":"RS232/485 Configs","tab":"ed52b65f.956538","order":1,"disp":false,"width":"24","collapse":false},{"id":"710d82b8.cb455c","type":"ui_tab","name":"Notifications (Alarms)","icon":"fa-bell","order":3,"disabled":false,"hidden":false},{"id":"c96d22f0.7a7a9","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":4,"width":3,"height":1},{"id":"af05102f.1cd3b","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":7,"width":3,"height":1},{"id":"73000c2b.5d1bc4","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":10,"width":3,"height":1},{"id":"9844d488.eb0848","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":13,"width":6,"height":1},{"id":"4ee4d54b.f20bfc","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":15,"width":6,"height":1},{"id":"b4104ec5.ac383","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":17,"width":6,"height":1},{"id":"44cc057d.2cfb3c","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":19,"width":6,"height":1},{"id":"736fc507.f47dbc","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"7af1bbd7.61d544","order":1,"width":12,"height":1},{"id":"caf8dbfa.eb07b8","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"7af1bbd7.61d544","order":2,"width":12,"height":1},{"id":"db652ec6.09745","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"7af1bbd7.61d544","order":3,"width":12,"height":1},{"id":"b609054f.73e808","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"7af1bbd7.61d544","order":4,"width":12,"height":1},{"id":"bdb92da1.eca83","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":1,"width":12,"height":1},{"id":"7e6646ec.2e7198","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":2,"width":12,"height":1},{"id":"1279b7a4.3b0078","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":3,"width":12,"height":1},{"id":"b1e977bc.3b7878","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":4,"width":12,"height":1},{"id":"44a30dcf.229554","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":1,"width":12,"height":1},{"id":"18603ddb.3c19f2","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":2,"width":12,"height":1},{"id":"58bb6409.98398c","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":3,"width":12,"height":1},{"id":"424e7805.e7b4d8","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":4,"width":12,"height":1},{"id":"3ad83c41.1f8204","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":1,"width":12,"height":1},{"id":"e667933d.fd6ee","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":2,"width":12,"height":1},{"id":"17dc3397.b008dc","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":3,"width":12,"height":1},{"id":"4ea79b7e.e9de74","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":4,"width":12,"height":1},{"id":"df46d70c.9b5fb8","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":1,"width":12,"height":1},{"id":"3a636357.ca6c5c","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":2,"width":12,"height":1},{"id":"710afc5.63c1504","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":3,"width":12,"height":1},{"id":"cc4d83e2.b0561","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":4,"width":12,"height":1},{"id":"39bbafe6.9411","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":1,"width":12,"height":1},{"id":"e7e6a824.3a16f8","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":2,"width":12,"height":1},{"id":"a72d10f3.39c33","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":3,"width":12,"height":1},{"id":"230c1ac8.6bf896","type":"ui_spacer","z":"8cf70e9a.0000a","name":"spacer","group":"","order":4,"width":12,"height":1},{"id":"a3457a4f.251f48","type":"ui_spacer","name":"spacer","group":"","order":1,"width":6,"height":1},{"id":"d9addeb3.f04e8","type":"ui_spacer","name":"spacer","group":"","order":2,"width":6,"height":1},{"id":"800681f6.5c2a1","type":"ui_spacer","name":"spacer","group":"","order":15,"width":8,"height":1},{"id":"d48c291a.7a2928","type":"ui_spacer","name":"spacer","group":"","order":15,"width":8,"height":1},{"id":"542a2a4.8afdcd4","type":"ui_spacer","name":"spacer","group":"","order":15,"width":8,"height":1},{"id":"172b28fa.998fe7","type":"ui_spacer","name":"spacer","group":"b8623710.b94b58","order":31,"width":8,"height":1},{"id":"87439450.d20fe8","type":"ui_spacer","name":"spacer","group":"b8623710.b94b58","order":33,"width":8,"height":1},{"id":"24d69d6a.57fd02","type":"ui_spacer","name":"spacer","group":"b8623710.b94b58","order":35,"width":24,"height":1},{"id":"5409b5ef.e5d06c","type":"ui_spacer","name":"spacer","group":"b8623710.b94b58","order":66,"width":8,"height":1},{"id":"a9f55db2.aaa53","type":"ui_spacer","name":"spacer","group":"b8623710.b94b58","order":68,"width":8,"height":1},{"id":"64913f33.76c23","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":10,"width":2,"height":1},{"id":"2422cdd3.697122","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":13,"width":2,"height":1},{"id":"f277c765.95b3d8","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":16,"width":2,"height":1},{"id":"43872d2c.6111e4","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":19,"width":2,"height":1},{"id":"4d5c27fa.0bce88","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":22,"width":2,"height":1},{"id":"c875bb8d.94f688","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":25,"width":2,"height":1},{"id":"b5113e60.bcb02","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":28,"width":2,"height":1},{"id":"2d2916a1.6e328a","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":31,"width":2,"height":1},{"id":"dbbafe87.2979a","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":34,"width":2,"height":1},{"id":"648c2d24.daf0c4","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":37,"width":2,"height":1},{"id":"403865fe.dd9b4c","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":40,"width":2,"height":1},{"id":"e288e58c.96f548","type":"ui_spacer","name":"spacer","group":"c0410b2b.230078","order":43,"width":2,"height":1},{"id":"477edfcc.549ed","type":"modbus-client","z":"","name":"SDM120","clienttype":"serial","bufferCommands":false,"stateLogEnabled":true,"tcpHost":"0.0.0.0","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyS3","serialType":"RTU","serialBaudrate":"2400","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"1000","unit_id":2,"commandDelay":1,"clientTimeout":200,"reconnectTimeout":2000},{"id":"d12afeb9.e9a2","type":"serial-port","z":"","serialport":"/dev/ttyS2","serialbaud":"38400","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"bin","out":"char","addchar":"","responsetimeout":"10000"},{"id":"1b53153d.32bcab","type":"ui_group","name":"","tab":"44089823.bbcb98","order":1,"disp":true,"width":27,"collapse":false},{"id":"44089823.bbcb98","type":"ui_tab","z":"","name":"Alarm History","icon":"fa-bell","order":2,"disabled":false,"hidden":false},{"id":"bfc69be.4daae68","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":2,"width":1,"height":1},{"id":"fba11f47.904d7","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":4,"width":25,"height":1},{"id":"56e3334e.25980c","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":7,"width":4,"height":1},{"id":"7dc7f9a1.8d3e38","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":8,"width":4,"height":1},{"id":"70fa86b8.4bb918","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":9,"width":4,"height":1},{"id":"4e31d686.cb2c48","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":10,"width":4,"height":1},{"id":"66d612b0.d3e5cc","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":11,"width":25,"height":1},{"id":"d0deb7f0.a1f098","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":15,"width":4,"height":1},{"id":"dccf8ed5.b211b","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":16,"width":4,"height":1},{"id":"a2a89f5d.d097e","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":18,"width":4,"height":1},{"id":"cb1f096b.2530e8","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":19,"width":4,"height":1},{"id":"9deff3e9.12b27","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":21,"width":25,"height":1},{"id":"4b272e3c.64d89","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":25,"width":4,"height":1},{"id":"be6094d1.91e448","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":26,"width":4,"height":1},{"id":"92f456cf.d438f8","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":28,"width":4,"height":1},{"id":"a84b64d.163fb98","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":29,"width":4,"height":1},{"id":"dce9e089.55ae8","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":31,"width":25,"height":1},{"id":"ac5cdef4.b7698","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":35,"width":4,"height":1},{"id":"8117f1e3.c4d7e","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":36,"width":4,"height":1},{"id":"ca49b7ce.3ad2f8","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":38,"width":4,"height":1},{"id":"2a1a00c3.5eace","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":39,"width":4,"height":1},{"id":"11de61e4.096f2e","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":41,"width":25,"height":1},{"id":"621ac4b4.5b561c","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":45,"width":4,"height":1},{"id":"7c59701f.bf7ff","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":46,"width":4,"height":1},{"id":"ffa825c3.d79478","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":48,"width":4,"height":1},{"id":"d1f1a4a4.2f6fc8","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":49,"width":4,"height":1},{"id":"c08393dd.f387b","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":66,"width":11,"height":1},{"id":"4b0ec4b5.aee7bc","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":67,"width":13,"height":1},{"id":"4df01b8d.ac2244","type":"ui_spacer","name":"spacer","group":"49de8910.30c838","order":69,"width":11,"height":1},{"id":"abb79bb0.d5b508","type":"mraa-gpio-ain","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"U0","pin":"0","interval":"1000","x":170,"y":180,"wires":[["e628223b.86868"]]},{"id":"738ce48d.b3ba1c","type":"ui_gauge","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"Gauge_U0","group":"49de8910.30c838","order":12,"width":9,"height":7,"gtype":"compass","title":"{{msg.payload.props.name}}","label":"{{msg.payload.props.units}}","format":"{{msg.payload.value}}","min":"0","max":"10","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1210,"y":460,"wires":[]},{"id":"7f93554f.d0f98c","type":"exec","z":"ce8e632f.2c0ec","g":"ed5fd225.61066","command":"cat /sys/class/thermal/thermal_zone0/temp","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":470,"y":2740,"wires":[["59a4304e.62091","370cc2dd.4d97ae","b08b8ad7.fc7318"],[],[]]},{"id":"ea8c1a.e98d03e8","type":"inject","z":"ce8e632f.2c0ec","g":"ed5fd225.61066","name":"","repeat":"10","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":130,"y":2760,"wires":[["7f93554f.d0f98c"]]},{"id":"59a4304e.62091","type":"ui_gauge","z":"ce8e632f.2c0ec","g":"ed5fd225.61066","name":"","group":"49de8910.30c838","order":5,"width":9,"height":4,"gtype":"gage","title":"Temperatura Processador IOT 2040","label":"ºC","format":"{{value}}","min":0,"max":"99","colors":["#00b500","#e6e600","#ca3838"],"seg1":"40","seg2":"80","x":830,"y":2740,"wires":[]},{"id":"370cc2dd.4d97ae","type":"ui_chart","z":"ce8e632f.2c0ec","g":"ed5fd225.61066","name":"","group":"49de8910.30c838","order":6,"width":12,"height":4,"label":"Temperatura Processador IOT2040","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":true,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":840,"y":2780,"wires":[[]]},{"id":"37a582ec.227a7e","type":"file","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"Write File","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"false","x":1320,"y":520,"wires":[[]]},{"id":"7dee21e7.d50b7","type":"json","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","property":"payload","action":"str","pretty":true,"x":1170,"y":520,"wires":[["37a582ec.227a7e"]]},{"id":"fdbf636f.ec0b5","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","func":"var recolha = flow.get(\"recolha\")\nvar nome = flow.get(\"nomeficheiro\")\nif (msg.payload.props.enabled==true && recolha==true){\n    var time=new Date().toISOString();\n    \n    var str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\n    var str2 = time.slice(11,19);\n\n    var time_str = str1 + \" \" + str2;\n    //time=substr() \n    var sensor_name=msg.payload.props.name;\n    payload={\"t\":time_str,\"v\":msg.payload.value,\"s\":sensor_name};\n    msg.payload=payload\n    \n    msg.filename = \"usr/dados/\"+ nome + \".json\";\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":520,"wires":[["7dee21e7.d50b7"]]},{"id":"dda9ae24.4e46b","type":"json","z":"ce8e632f.2c0ec","g":"ed5fd225.61066","name":"","property":"payload","action":"str","pretty":true,"x":930,"y":2820,"wires":[["83da37de.6c70e8"]]},{"id":"b08b8ad7.fc7318","type":"function","z":"ce8e632f.2c0ec","g":"ed5fd225.61066","name":"","func":"var recolha = flow.get(\"recolha\")\nvar nome = flow.get(\"nomeficheiro\")\nif (recolha==true){\n    var time=new Date().toISOString();\n    var sensor_name=\"Temp Processador\";\n    \n    var str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\n    var str2 = time.slice(11,19);\n\n    var time_str = str1 + \" \" + str2;\n    \n    msg.payload=parseInt(msg.payload);\n    payload={\"t\":time_str,\"v\":msg.payload,\"s\":sensor_name};\n    msg.payload=payload\n    msg.filename = \"usr/dados/\"+ nome + \".json\";\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":780,"y":2820,"wires":[["dda9ae24.4e46b"]]},{"id":"83da37de.6c70e8","type":"file","z":"ce8e632f.2c0ec","g":"ed5fd225.61066","name":"Write File","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"false","x":1080,"y":2820,"wires":[[]]},{"id":"466a8e1e.1e892","type":"file in","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","filename":"usr/dados/config/U0.json","format":"utf8","chunk":false,"sendError":false,"x":370,"y":120,"wires":[["f2a9cfbf.440fa"]]},{"id":"f2a9cfbf.440fa","type":"json","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","property":"payload","action":"obj","pretty":false,"x":550,"y":120,"wires":[["15d93013.59b97"]]},{"id":"ee4738b5.19ff58","type":"inject","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"props","payload":"","payloadType":"date","x":150,"y":120,"wires":[["466a8e1e.1e892"]]},{"id":"15d93013.59b97","type":"join","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":590,"y":180,"wires":[["22bc0ba3.780484"]]},{"id":"e628223b.86868","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":180,"wires":[["15d93013.59b97"]]},{"id":"22bc0ba3.780484","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","func":"if (msg.payload.props.enabled==false){\n    msg.payload.value=\"Disabled\"; \n}\nelse{\nvar sensor=msg.payload.value; \nvar min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\n\nmsg.payload.value= (sensor/1023)*(max-min)+min; \n\nmsg.payload.value=Math.round(msg.payload.value*100)/100\n\n}\n\nvar GlobalSensorUnits = msg.payload.props.units;\nmsg.payload.props.name=msg.payload.props.name+\"-U0\"\n\nglobal.set(\"SensorUnitsU0\", GlobalSensorUnits);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":840,"y":180,"wires":[["fdbf636f.ec0b5","72e34b6d.7b1e14","69cf6a88.b62d34","593a1c23.94afe4","d2a93341.6b92e","66fc1573.1b3f6c","6549059e.028a2c","7f22404f.f97a","fe778542.431278","9ac7aefa.14a3d","e88a0397.b23ab","e9a2ace3.ef5c2"]]},{"id":"72e34b6d.7b1e14","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\n\nmsg = {payload:msg.payload,ui_control:{min:min,max:max},topic:\"Soil\"};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":460,"wires":[["738ce48d.b3ba1c"]]},{"id":"5dc569cc.ffa2c8","type":"mraa-gpio-ain","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"I0","pin":"1","interval":"1000","x":2530,"y":180,"wires":[["81b2bf11.ee744"]]},{"id":"38b48b32.c47ae4","type":"ui_gauge","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"Gauge_I0","group":"49de8910.30c838","order":22,"width":9,"height":7,"gtype":"gage","title":"{{msg.payload.props.name}}","label":"{{msg.payload.props.units}}","format":"{{msg.payload.value}}","min":0,"max":"1","colors":["#cd3737","#00e626","#ca3838"],"seg1":"4","seg2":"8","x":3560,"y":460,"wires":[]},{"id":"4d4ff051.2ef04","type":"json","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","property":"payload","action":"str","pretty":true,"x":3530,"y":520,"wires":[["887eebfb.82d5f8"]]},{"id":"887eebfb.82d5f8","type":"file","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"Write File","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"false","x":3680,"y":520,"wires":[[]]},{"id":"ff5f2a74.dd4798","type":"file in","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","filename":"usr/dados/config/I0.json","format":"utf8","chunk":false,"sendError":false,"x":2730,"y":100,"wires":[["570f6e41.06195"]]},{"id":"570f6e41.06195","type":"json","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","property":"payload","action":"obj","pretty":false,"x":2910,"y":100,"wires":[["ea6410bc.20d4b"]]},{"id":"e36eb896.99e278","type":"inject","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"props","payload":"","payloadType":"date","x":2510,"y":100,"wires":[["ff5f2a74.dd4798"]]},{"id":"ea6410bc.20d4b","type":"join","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2950,"y":180,"wires":[["91c35bf4.99bfc8"]]},{"id":"81b2bf11.ee744","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2750,"y":180,"wires":[["ea6410bc.20d4b"]]},{"id":"91c35bf4.99bfc8","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","func":"if (msg.payload.props.enabled==false){\n    msg.payload.value=\"Disabled\"; \n}\nelse{\nvar sensor=msg.payload.value; \nvar min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\n\nmsg.payload.value= ((sensor-204.6)/1023)*(max-min)+min; \n\nmsg.payload.value=Math.round(msg.payload.value*100)/100\n}\nmsg.payload.props.name=msg.payload.props.name+\"-I0\"\n\nvar GlobalSensorUnits = msg.payload.props.units;\n\nglobal.set(\"SensorUnitsI0\", GlobalSensorUnits);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3200,"y":180,"wires":[["e3202be6.c06e08","17db90f7.311c9f","e886973b.9fb688","c9e4293a.d3db78","abe9f17e.082bd","104fc5b0.32a4ea","b669b702.5280a8","4dc91cf8.7b35a4","e1eefd2d.590c2","c8c43189.43255","e433a0ea.111b1","61601872.fb3728"]]},{"id":"e3202be6.c06e08","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\nmsg = {payload:msg.payload,ui_control:{min:min,max:max},topic:\"Soil\"};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3380,"y":460,"wires":[["38b48b32.c47ae4"]]},{"id":"5b699c53.ba4074","type":"mraa-gpio-ain","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"U1","pin":"2","interval":"1000","x":170,"y":1500,"wires":[["406ac9d1.ab9218"]]},{"id":"4643abfc.ce3d44","type":"ui_gauge","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"Gauge_U1","group":"49de8910.30c838","order":32,"width":9,"height":7,"gtype":"compass","title":"{{msg.payload.props.name}}","label":"{{msg.payload.props.units}}","format":"{{msg.payload.value}}","min":"0","max":"10","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1210,"y":1780,"wires":[]},{"id":"ff3953c4.279c8","type":"file","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"Write File","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"false","x":1360,"y":1840,"wires":[[]]},{"id":"c7b70afd.d3a578","type":"json","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","property":"payload","action":"str","pretty":true,"x":1170,"y":1840,"wires":[["ff3953c4.279c8"]]},{"id":"8afc7365.596fe","type":"file in","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","filename":"usr/dados/config/U1.json","format":"utf8","chunk":false,"sendError":false,"x":370,"y":1440,"wires":[["f974e86.a88be18"]]},{"id":"f974e86.a88be18","type":"json","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","property":"payload","action":"obj","pretty":false,"x":550,"y":1440,"wires":[["564ac74f.ba60f8"]]},{"id":"fe55a4f6.7f6198","type":"inject","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"props","payload":"","payloadType":"date","x":150,"y":1440,"wires":[["8afc7365.596fe"]]},{"id":"564ac74f.ba60f8","type":"join","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":590,"y":1500,"wires":[["707910cd.41b19"]]},{"id":"406ac9d1.ab9218","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":1500,"wires":[["564ac74f.ba60f8"]]},{"id":"707910cd.41b19","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","func":"if (msg.payload.props.enabled==false){\n    msg.payload.value=\"Disabled\"; \n}\nelse{\nvar sensor=msg.payload.value; \nvar min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\n\nmsg.payload.value= (sensor/1023)*(max-min)+min; \n\nmsg.payload.value=Math.round(msg.payload.value*100)/100\n}\nmsg.payload.props.name=msg.payload.props.name+\"-U1\";\n\nvar GlobalSensorUnits = msg.payload.props.units;\n\nglobal.set(\"SensorUnitsU1\", GlobalSensorUnits);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":840,"y":1500,"wires":[["1c86ca5a.0d8fd6","a4901b5f.f5f898","57348900.f683c8","34e3232f.5c81dc","5df2069d.964e48","2d9cf8f7.06b158","9f62dd84.ccc8d","61bb89d9.7fa498","7086abdd.7e14d4","3ef0860.66b647a","a822d685.eec988","d0fc89bc.fbe158"]]},{"id":"1c86ca5a.0d8fd6","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\nmsg = {payload:msg.payload,ui_control:{min:min,max:max},topic:\"Soil\"};\n\nreturn msg;\n","outputs":1,"noerr":0,"x":1020,"y":1780,"wires":[["4643abfc.ce3d44"]]},{"id":"17db90f7.311c9f","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","func":"var recolha = flow.get(\"recolha\")\nvar nome = flow.get(\"nomeficheiro\")\nif (msg.payload.props.enabled==true && recolha==true){\n    var time=new Date().toISOString();\n    var sensor_name=msg.payload.props.name;\n    \n    var str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\n    var str2 = time.slice(11,19);\n\n    var time_str = str1 + \" \" + str2;\n    \n    payload={\"t\":time_str,\"v\":msg.payload.value,\"s\":sensor_name};\n    msg.payload=payload\n    msg.filename = \"usr/dados/\"+ nome + \".json\";\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3380,"y":520,"wires":[["4d4ff051.2ef04"]]},{"id":"a4901b5f.f5f898","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","func":"var recolha = flow.get(\"recolha\")\nvar nome = flow.get(\"nomeficheiro\")\nif (msg.payload.props.enabled==true && recolha==true){\n    var time=new Date().toISOString();\n    var sensor_name=msg.payload.props.name;\n    \n    var str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\n    var str2 = time.slice(11,19);\n\n    var time_str = str1 + \" \" + str2;\n    \n    payload={\"t\":time_str,\"v\":msg.payload.value,\"s\":sensor_name};\n    msg.payload=payload\n    msg.filename = \"usr/dados/\"+ nome + \".json\";\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":1840,"wires":[["c7b70afd.d3a578"]]},{"id":"2a74f633.a2b41a","type":"comment","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Read Me","info":"### A ideia aqui é permitir dar enable ou disable à configuração.\n### Podendo desligar ou ligar a entrada em causa.","x":2320,"y":80,"wires":[]},{"id":"bd239201.ed918","type":"comment","z":"ebf7676.b0d7a98","g":"d7ef82b9.2abb6","name":"Read Me","info":"### A ideia aqui é permitir dar enable ou disable à configuração.\n### Podendo desligar ou ligar a entrada em causa.","x":2320,"y":1200,"wires":[]},{"id":"9a09fe1b.23995","type":"json","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","property":"payload","action":"str","pretty":true,"x":970,"y":860,"wires":[["8edd069f.fdb598"]]},{"id":"94872167.c6367","type":"debug","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":650,"y":900,"wires":[]},{"id":"530fb4bb.afc98c","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Get and Join Current Values","func":"var name_u0 = flow.get(\"name_u0\") || \"DEFAULT_VALUE\"; \nvar units_u0 = flow.get(\"units_u0\") || \"DEFAULT UNITS\";\nvar rangeMin_u0 = flow.get(\"rangeMin_u0\") || \"0\";\nvar rangeMax_u0 = flow.get(\"rangeMax_u0\") || \"0\";\nvar alarmMin_u0 = flow.get(\"alarmMin_u0\") || \"0\";\nvar alarmMax_u0 = flow.get(\"alarmMax_u0\") || \"0\";\nvar alarmPreMin_u0 = flow.get(\"alarmPreMin_u0\") || \"0\";\nvar alarmPreMax_u0 = flow.get(\"alarmPreMax_u0\") || \"0\";\nvar enabled_u0 = flow.get(\"enabled_u0\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_u0,\n    \"enabled\":enabled_u0,\n    \"units\": units_u0,\n    \"rangeMin\": rangeMin_u0,\n    \"rangeMax\": rangeMax_u0,\n    \"alarmMin\": alarmMin_u0,\n    \"alarmMax\": alarmMax_u0,\n    \"alarmPreMin\": alarmPreMin_u0,\n    \"alarmPreMax\": alarmPreMax_u0\n}\n\nmsg.filename = \"usr/dados/tensao/\"+ name_u0 + \".json\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":860,"wires":[["9a09fe1b.23995","94872167.c6367"]]},{"id":"23f571c9.d71a0e","type":"comment","z":"ebf7676.b0d7a98","name":"CHANGE FILE NAME PATH","info":"","x":700,"y":820,"wires":[]},{"id":"9050b9c1.c438c8","type":"ui_dropdown","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"dd_ConfigChoice_u0","label":"Saved Configurations","tooltip":"Select desired (saved) sensor config.","place":"","group":"b8623710.b94b58","order":3,"width":8,"height":1,"passthru":false,"multiple":false,"options":[],"payload":"","topic":"configChoice_u0","x":700,"y":380,"wires":[["5e88b2f8.6d6c6c"]]},{"id":"bff93a18.f95e88","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_RangeMin_u0","label":"Range Min","tooltip":"","group":"b8623710.b94b58","order":13,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMin_u0","x":1990,"y":400,"wires":[["8ff804c.67fc7f8"]]},{"id":"540c94f7.f5f50c","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_RangeMax_u0","label":"Range Max","tooltip":"","group":"b8623710.b94b58","order":14,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMax_u0","x":1990,"y":480,"wires":[["d60b390.9198dc8"]]},{"id":"be1d22ac.13d63","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_Units_u0","label":"Units","tooltip":"(Meters, Seconds, Pascal, Bar, ...)","group":"b8623710.b94b58","order":8,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"units_u0","x":1970,"y":320,"wires":[["34c7ca6.a86bc36"]]},{"id":"bddd40af.db2a6","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_AlarmMin_u0","label":"Alarm Min","tooltip":"","group":"b8623710.b94b58","order":19,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMin_u0","x":1990,"y":560,"wires":[["d82fe7bb.897d78"]]},{"id":"b2a2c363.129e9","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_AlarmMax_u0","label":"Alarm Max","tooltip":"","group":"b8623710.b94b58","order":20,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMax_u0","x":1990,"y":640,"wires":[["6e044177.28fb6"]]},{"id":"6e4428c3.091508","type":"ui_button","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"btn_Save_u0","group":"b8623710.b94b58","order":27,"width":4,"height":1,"passthru":false,"label":"Save","tooltip":"Save current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnsave_u0","x":130,"y":860,"wires":[["530fb4bb.afc98c","9748e588.314018"]]},{"id":"a20abefe.366ba","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_SensorName_u0","label":"Sensor Name","tooltip":"Sensor Name, and subsquently config file name. No spaces allowed.","group":"b8623710.b94b58","order":7,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"name_u0","x":2000,"y":240,"wires":[["ac46e351.de436"]]},{"id":"e5f6bc53.8aa2","type":"ui_button","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"btn_Delete_u0","group":"b8623710.b94b58","order":32,"width":4,"height":1,"passthru":false,"label":"Delete","tooltip":"Delete selected configuration.","color":"","bgcolor":"","icon":"fa-times","payload":"true","payloadType":"bool","topic":"delete_u0","x":160,"y":1020,"wires":[["3dc0e190.9ff0ee","9748e588.314018","f96a36be.881308"]]},{"id":"a5d91bc4.a49c38","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_AlarmPreMin_u0","label":"Alarm PreMin","tooltip":"","group":"b8623710.b94b58","order":25,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmpreMin_u0","x":2000,"y":720,"wires":[["a4a6f697.2e3198"]]},{"id":"7e16387c.f56968","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"txt_AlarmPreMax_u0","label":"Alarm PreMax","tooltip":"","group":"b8623710.b94b58","order":26,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmPreMax_u0","x":2000,"y":800,"wires":[["81cbac70.3ed7a"]]},{"id":"c348dc31.4bdc","type":"json","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","property":"payload","action":"str","pretty":true,"x":1030,"y":700,"wires":[["fddf6b31.ff6998"]]},{"id":"9b23384d.5fe1f8","type":"file in","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":640,"y":520,"wires":[["c366a0fc.b3e3a","eea7f298.5e1f2"]]},{"id":"475d643f.25fb3c","type":"exec","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1050,"y":1020,"wires":[[],[],[]]},{"id":"fddf6b31.ff6998","type":"file","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":1170,"y":700,"wires":[[]]},{"id":"ac46e351.de436","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value name_u0","rules":[{"t":"set","p":"name_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":280,"wires":[[]]},{"id":"34c7ca6.a86bc36","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value units_u0","rules":[{"t":"set","p":"units_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":360,"wires":[[]]},{"id":"ef17c280.4afe2","type":"debug","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":650,"y":740,"wires":[]},{"id":"c2502a5c.5574a8","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Get and Join Current Values","func":"var name_u0 = flow.get(\"name_u0\") || \"DEFAULT_VALUE\"; \nvar units_u0 = flow.get(\"units_u0\") || \"DEFAULT UNITS\";\nvar rangeMin_u0 = flow.get(\"rangeMin_u0\") || \"0\";\nvar rangeMax_u0 = flow.get(\"rangeMax_u0\") || \"0\";\nvar alarmMin_u0 = flow.get(\"alarmMin_u0\") || \"0\";\nvar alarmMax_u0 = flow.get(\"alarmMax_u0\") || \"0\";\nvar alarmPreMin_u0 = flow.get(\"alarmPreMin_u0\") || \"0\";\nvar alarmPreMax_u0 = flow.get(\"alarmPreMax_u0\") || \"0\";\nvar enabled_u0 = flow.get(\"enabled_u0\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_u0,\n    \"enabled\":enabled_u0,\n    \"units\": units_u0,\n    \"rangeMin\": rangeMin_u0,\n    \"rangeMax\": rangeMax_u0,\n    \"alarmMin\": alarmMin_u0,\n    \"alarmMax\": alarmMax_u0,\n    \"alarmPreMin\": alarmPreMin_u0,\n    \"alarmPreMax\": alarmPreMax_u0\n}\n\nmsg.filename = \"usr/dados/config/U0.json\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":700,"wires":[["c348dc31.4bdc","ef17c280.4afe2"]]},{"id":"8ff804c.67fc7f8","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value rangeMin_u0","rules":[{"t":"set","p":"rangeMin_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":440,"wires":[[]]},{"id":"d60b390.9198dc8","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value rangeMax_u0","rules":[{"t":"set","p":"rangeMax_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":520,"wires":[[]]},{"id":"d82fe7bb.897d78","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value AlarmMin_u0","rules":[{"t":"set","p":"alarmMin_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":600,"wires":[[]]},{"id":"6e044177.28fb6","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value AlarmMax_u0","rules":[{"t":"set","p":"alarmMax_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":680,"wires":[[]]},{"id":"81cbac70.3ed7a","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value AlarmPreMax_u0","rules":[{"t":"set","p":"alarmPreMax_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2020,"y":840,"wires":[[]]},{"id":"a4a6f697.2e3198","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value AlarmPreMin_u0","rules":[{"t":"set","p":"alarmPreMin_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2020,"y":760,"wires":[[]]},{"id":"5e88b2f8.6d6c6c","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save Value ConfigChoice_u0","rules":[{"t":"set","p":"configChoice_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":440,"wires":[["476ba849.002988"]]},{"id":"3dc0e190.9ff0ee","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Delete selected choice","func":"var configChoice_u0 = flow.get(\"configChoice_u0\");\n\nmsg.payload = \"rm /usr/dados/tensao/\" + configChoice_u0\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":1020,"wires":[["475d643f.25fb3c","adaaa39e.4fd64"]]},{"id":"476ba849.002988","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Get choice to load config file","func":"var configChoice_u0 = flow.get(\"configChoice_u0\");\nmsg.filename = \"usr/dados/tensao/\" + configChoice_u0\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":440,"wires":[["9b23384d.5fe1f8"]]},{"id":"fa36f301.40d81","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Get file names and update Drop Down","func":"msg.payload[0]=null\nmsg.options = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":730,"y":320,"wires":[["9050b9c1.c438c8"]]},{"id":"c366a0fc.b3e3a","type":"debug","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":650,"y":580,"wires":[]},{"id":"61e760b2.0c784","type":"ui_switch","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"swt_OnOff_u0","label":"Off / On","tooltip":"Turn on or off this sensor slot.","group":"b8623710.b94b58","order":4,"width":4,"height":1,"passthru":true,"decouple":"false","topic":"swtOnOff_u0","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":2040,"y":900,"wires":[["60a0fb4e.3038b4"]]},{"id":"eea7f298.5e1f2","type":"json","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","property":"payload","action":"","pretty":false,"x":830,"y":520,"wires":[["f1f0b01.b09e55","1d9db901.327587"]]},{"id":"f1f0b01.b09e55","type":"debug","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":850,"y":560,"wires":[]},{"id":"83d544c5.57c5b8","type":"comment","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"CHANGE FILE NAME PATH","info":"Aqui mudar o comando de modo a funcionar no IOT.","x":720,"y":980,"wires":[]},{"id":"aa01524d.ecb64","type":"comment","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"README - Notes for the directory structure in IOT2040","info":"# Criar directório onde serão guardados os config files e posteriormente acedidos.\n\n## Estrutura do Directório:\n\n---\n\n### project_Data/\n### ├─ sensor_Configs/\n### │  ├─ acquired_Data/\n### │  │  ├─ sensor1_Data.json\n### │  ├─ adicional_NotificationSettings/\n### │  │  ├─ extra_Noti_1.json\n### │  ├─ current_Configs/\n### │  │  ├─ config1_Current.json\n### │  ├─ rs232_Configs/\n### │  │  ├─ config1_rs232.json\n### │  ├─ voltage_Configs/\n### │  │  ├─ config1_Voltage.json\n### \n\n---\n","x":1180,"y":200,"wires":[],"icon":"node-red/alert.svg"},{"id":"37b4ac3d.89a834","type":"switch","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Route Values","property":"parts","propertyType":"msg","rules":[{"t":"index","v":"0","vt":"num","v2":"0","v2t":"num"},{"t":"index","v":"1","vt":"num","v2":"1","v2t":"num"},{"t":"index","v":"2","vt":"num","v2":"2","v2t":"num"},{"t":"index","v":"3","vt":"num","v2":"3","v2t":"num"},{"t":"index","v":"4","vt":"num","v2":"4","v2t":"num"},{"t":"index","v":"5","vt":"num","v2":"5","v2t":"num"},{"t":"index","v":"6","vt":"num","v2":"6","v2t":"num"},{"t":"index","v":"7","vt":"num","v2":"7","v2t":"num"},{"t":"index","v":"8","vt":"num","v2":"8","v2t":"num"}],"checkall":"true","repair":true,"outputs":9,"x":1290,"y":520,"wires":[["a20abefe.366ba"],["61e760b2.0c784"],["be1d22ac.13d63"],["d84e88de.629428"],["a4d7bbad.094a48"],["f05cc86a.d043f8"],["85cf5ff3.26d66"],["3699202f.cd109"],["f3a5da81.f45418"]]},{"id":"1d9db901.327587","type":"split","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"splitConfigFile","splt":"","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":520,"wires":[["37b4ac3d.89a834","aace1b02.236838"]]},{"id":"aace1b02.236838","type":"debug","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"parts","targetType":"msg","statusVal":"","statusType":"auto","x":1040,"y":560,"wires":[]},{"id":"d84e88de.629428","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":460,"wires":[["bff93a18.f95e88"]]},{"id":"a4d7bbad.094a48","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":500,"wires":[["540c94f7.f5f50c"]]},{"id":"85cf5ff3.26d66","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":580,"wires":[["b2a2c363.129e9"]]},{"id":"3699202f.cd109","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":620,"wires":[["a5d91bc4.a49c38"]]},{"id":"f3a5da81.f45418","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":660,"wires":[["7e16387c.f56968"]]},{"id":"f05cc86a.d043f8","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":540,"wires":[["bddd40af.db2a6"]]},{"id":"29882c55.b8f6c4","type":"comment","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"CHANGE FILE NAME PATH","info":"","x":980,"y":400,"wires":[]},{"id":"3fe295cd.2c578a","type":"comment","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"CHANGE FILE NAME PATH","info":"","x":700,"y":660,"wires":[]},{"id":"68d42afe.145c84","type":"comment","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Read Me","info":"### A ideia aqui é permitir dar enable ou disable à configuração.\n### Podendo desligar ou ligar a entrada em causa.","x":120,"y":80,"wires":[]},{"id":"b8078ba.6257978","type":"comment","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"CHANGE FOLDER PATH","info":"### Aqui colocar o path para a pasta correcta de configuração dos sensores em causa. (currente, tensão, rs232)\n\nNeste caso, o path da pasta /../voltage_configs/","x":450,"y":280,"wires":[]},{"id":"adaaa39e.4fd64","type":"debug","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":690,"y":1060,"wires":[]},{"id":"f96a36be.881308","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Set to Null","rules":[{"t":"set","p":"payload","pt":"msg","to":"null","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":700,"wires":[["bff93a18.f95e88","540c94f7.f5f50c","be1d22ac.13d63","bddd40af.db2a6","b2a2c363.129e9","a20abefe.366ba","a5d91bc4.a49c38","7e16387c.f56968","6935b78.ace6848"]]},{"id":"442c1822.952298","type":"ui_button","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"btn_refresh_u0","group":"b8623710.b94b58","order":15,"width":4,"height":1,"passthru":false,"label":"","tooltip":"Show the current configuration of input","color":"","bgcolor":"","icon":"fa-refresh","payload":"true","payloadType":"bool","topic":"topic","x":140,"y":540,"wires":[["1b6aa29d.b1e26d","9a6d2f2a.c8047"]]},{"id":"78c5a18b.8edda","type":"exec","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","command":"ls /usr/dados/tensao","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":380,"y":400,"wires":[["bead5504.cb3828"],[],[]]},{"id":"bead5504.cb3828","type":"split","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","splt":"\\n","spltType":"str","arraySplt":"10","arraySpltType":"len","stream":true,"addname":"","x":370,"y":320,"wires":[["35acd5d8.0c7c2a"]]},{"id":"60a0fb4e.3038b4","type":"change","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"Save enabled","rules":[{"t":"set","p":"enabled_u0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2040,"y":960,"wires":[[]]},{"id":"35acd5d8.0c7c2a","type":"join","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":490,"y":320,"wires":[["fa36f301.40d81"]]},{"id":"1b6aa29d.b1e26d","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","func":"msg.filename = \"usr/dados/config/U0.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":540,"wires":[["9b23384d.5fe1f8"]]},{"id":"da718de9.9569f","type":"ui_button","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"btn_Load_u0","group":"b8623710.b94b58","order":21,"width":4,"height":1,"passthru":false,"label":"LOAD","tooltip":"Load current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnload_u0","x":130,"y":700,"wires":[["c2502a5c.5574a8","9748e588.314018"]]},{"id":"8edd069f.fdb598","type":"file","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":1170,"y":860,"wires":[[]]},{"id":"9748e588.314018","type":"delay","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":190,"y":400,"wires":[["78c5a18b.8edda"]]},{"id":"bc8e434a.7acb3","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_clean_u0","group":"b8623710.b94b58","order":9,"width":4,"height":1,"passthru":false,"label":"Clean","tooltip":"Clean form entries.","color":"","bgcolor":"","icon":"fa-eraser","payload":"","payloadType":"date","topic":"","x":1440,"y":700,"wires":[["f96a36be.881308","9748e588.314018"]]},{"id":"b3d25330.75ee1","type":"inject","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"0.1","topic":"","payload":"","payloadType":"date","x":190,"y":280,"wires":[["78c5a18b.8edda"]]},{"id":"9a6d2f2a.c8047","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","func":"'função para colocar a opção selecionada como a U0.json '\nmsg.payload=\"U0.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":500,"wires":[["9050b9c1.c438c8"]]},{"id":"b7adad3c.6dde","type":"ui_chart","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"Chart_U0","group":"49de8910.30c838","order":13,"width":12,"height":7,"label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":true,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1440,"y":220,"wires":[[]]},{"id":"69cf6a88.b62d34","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\n\nmsg = {payload:data,ui_control:{ymin:min,ymax:max},topic:\"Value\"};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":220,"wires":[["b7adad3c.6dde"]]},{"id":"1c8dd986.c25456","type":"ui_chart","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"Chart_I0","group":"49de8910.30c838","order":23,"width":12,"height":7,"label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":true,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":3800,"y":220,"wires":[[]]},{"id":"e886973b.9fb688","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\n\nmsg = {payload:data,ui_control:{ymin:min,ymax:max},topic:\"Value\"};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3380,"y":220,"wires":[["1c8dd986.c25456"]]},{"id":"3f94a997.ffa576","type":"ui_chart","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"Chart_U1","group":"49de8910.30c838","order":33,"width":12,"height":7,"label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":true,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1440,"y":1540,"wires":[[]]},{"id":"57348900.f683c8","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\n\nmsg = {payload:data,ui_control:{ymin:min,ymax:max},topic:\"Value\"};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":1540,"wires":[["3f94a997.ffa576"]]},{"id":"245b7f4a.782a7","type":"ui_dropdown","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"dd_ConfigChoice_u1","label":"Saved Configurations","tooltip":"Select desired (saved) sensor config.","place":"","group":"b8623710.b94b58","order":38,"width":8,"height":1,"passthru":false,"multiple":false,"options":[],"payload":"","topic":"configChoice_u1","x":700,"y":1500,"wires":[["2e069d27.7be492"]]},{"id":"c4789673.403c28","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_RangeMin_u1","label":"Range Min","tooltip":"","group":"b8623710.b94b58","order":48,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMin_u1","x":1990,"y":1520,"wires":[["c9dec460.4e28c8"]]},{"id":"f3055df.18692a","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_RangeMax_u1","label":"Range Max","tooltip":"","group":"b8623710.b94b58","order":49,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMax_u1","x":1990,"y":1600,"wires":[["f9765904.e7f5f8"]]},{"id":"969078bc.1b2ce8","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_Units_u1","label":"Units","tooltip":"(Meters, Seconds, Pascal, Bar, ...)","group":"b8623710.b94b58","order":43,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"units_u1","x":1970,"y":1440,"wires":[["87297b39.79fed8"]]},{"id":"e0f418f2.c7fea8","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_AlarmMin_u1","label":"Alarm Min","tooltip":"","group":"b8623710.b94b58","order":54,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMin_u1","x":1990,"y":1680,"wires":[["a303876.274ab78"]]},{"id":"d024ef4c.b1432","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_AlarmMax_u1","label":"Alarm Max","tooltip":"","group":"b8623710.b94b58","order":55,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMax_u1","x":1990,"y":1760,"wires":[["bfdfa099.7390f"]]},{"id":"c94807f3.688818","type":"ui_button","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"btn_Save_u1","group":"b8623710.b94b58","order":62,"width":4,"height":1,"passthru":false,"label":"Save","tooltip":"Save current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnsave_u1","x":130,"y":1980,"wires":[["f2c476e8.12d1e8","2fc9e7ad.308fb8"]]},{"id":"6f43640.2aafc9c","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_SensorName_u1","label":"Sensor Name","tooltip":"Sensor Name, and subsquently config file name. No spaces allowed.","group":"b8623710.b94b58","order":42,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"name_u1","x":2000,"y":1360,"wires":[["5531a48.ae0925c"]]},{"id":"71b5a583.5fcaec","type":"ui_button","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"btn_Delete_u1","group":"b8623710.b94b58","order":67,"width":4,"height":1,"passthru":false,"label":"Delete","tooltip":"Delete selected configuration.","color":"","bgcolor":"","icon":"fa-times","payload":"true","payloadType":"bool","topic":"delete_u1","x":160,"y":2140,"wires":[["a0e7a51c.6066d8","f2c476e8.12d1e8","ea17c587.f39f78"]]},{"id":"80d89999.3bfa38","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_AlarmPreMin_u1","label":"Alarm PreMin","tooltip":"","group":"b8623710.b94b58","order":60,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmpreMin_u1","x":2000,"y":1840,"wires":[["e18806.1a4d97f8"]]},{"id":"20539da3.5d5eb2","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"txt_AlarmPreMax_u1","label":"Alarm PreMax","tooltip":"","group":"b8623710.b94b58","order":61,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmPreMax_u1","x":2000,"y":1920,"wires":[["bdb3be10.fb448"]]},{"id":"8e334a5d.e20908","type":"json","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","property":"payload","action":"str","pretty":true,"x":1030,"y":1820,"wires":[["1efaf883.5bbfb7"]]},{"id":"67b7d594.46f31c","type":"file in","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":640,"y":1640,"wires":[["c8b54300.af74c","5c91bfe.0da454"]]},{"id":"38705fa4.b0f9","type":"exec","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1050,"y":2140,"wires":[[],[],[]]},{"id":"1efaf883.5bbfb7","type":"file","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":1170,"y":1820,"wires":[[]]},{"id":"5531a48.ae0925c","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value name_u1","rules":[{"t":"set","p":"name_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":1400,"wires":[[]]},{"id":"87297b39.79fed8","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value units_u1","rules":[{"t":"set","p":"units_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":1480,"wires":[[]]},{"id":"4b0aad93.961134","type":"debug","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":650,"y":1860,"wires":[]},{"id":"b2d816fe.447488","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Get and Join Current Values","func":"var name_u1 = flow.get(\"name_u1\") || \"DEFAULT_VALUE\"; \nvar units_u1 = flow.get(\"units_u1\") || \"DEFAULT UNITS\";\nvar rangeMin_u1 = flow.get(\"rangeMin_u1\") || \"0\";\nvar rangeMax_u1 = flow.get(\"rangeMax_u1\") || \"0\";\nvar alarmMin_u1 = flow.get(\"alarmMin_u1\") || \"0\";\nvar alarmMax_u1 = flow.get(\"alarmMax_u1\") || \"0\";\nvar alarmPreMin_u1 = flow.get(\"alarmPreMin_u1\") || \"0\";\nvar alarmPreMax_u1 = flow.get(\"alarmPreMax_u1\") || \"0\";\nvar enabled_u1 = flow.get(\"enabled_u1\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_u1,\n    \"enabled\":enabled_u1,\n    \"units\": units_u1,\n    \"rangeMin\": rangeMin_u1,\n    \"rangeMax\": rangeMax_u1,\n    \"alarmMin\": alarmMin_u1,\n    \"alarmMax\": alarmMax_u1,\n    \"alarmPreMin\": alarmPreMin_u1,\n    \"alarmPreMax\": alarmPreMax_u1\n}\n\nmsg.filename = \"usr/dados/config/U1.json\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":1820,"wires":[["8e334a5d.e20908","4b0aad93.961134"]]},{"id":"c9dec460.4e28c8","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value rangeMin_u1","rules":[{"t":"set","p":"rangeMin_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":1560,"wires":[[]]},{"id":"f9765904.e7f5f8","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value rangeMax_u1","rules":[{"t":"set","p":"rangeMax_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":1640,"wires":[[]]},{"id":"a303876.274ab78","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value AlarmMin_u1","rules":[{"t":"set","p":"alarmMin_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":1720,"wires":[[]]},{"id":"bfdfa099.7390f","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value AlarmMax_u1","rules":[{"t":"set","p":"alarmMax_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":1800,"wires":[[]]},{"id":"bdb3be10.fb448","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value AlarmPreMax_u1","rules":[{"t":"set","p":"alarmPreMax_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2020,"y":1960,"wires":[[]]},{"id":"e18806.1a4d97f8","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value AlarmPreMin_u1","rules":[{"t":"set","p":"alarmPreMin_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2020,"y":1880,"wires":[[]]},{"id":"2e069d27.7be492","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save Value ConfigChoice_u1","rules":[{"t":"set","p":"configChoice_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1560,"wires":[["45330198.5fcae"]]},{"id":"a0e7a51c.6066d8","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Delete selected choice","func":"var configChoice_u1 = flow.get(\"configChoice_u1\");\n\nmsg.payload = \"rm /usr/dados/tensao/\" + configChoice_u1\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":2140,"wires":[["38705fa4.b0f9","4d1f9eba.d8798"]]},{"id":"45330198.5fcae","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Get choice to load config file","func":"var configChoice_u1 = flow.get(\"configChoice_u1\");\nmsg.filename = \"usr/dados/tensao/\" + configChoice_u1\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":1560,"wires":[["67b7d594.46f31c"]]},{"id":"dba73d1.cf90cc","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Get file names and update Drop Down","func":"msg.payload[0]=null\nmsg.options = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":730,"y":1440,"wires":[["245b7f4a.782a7"]]},{"id":"c8b54300.af74c","type":"debug","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":650,"y":1700,"wires":[]},{"id":"33f593ee.c18d7c","type":"ui_switch","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"swt_OnOff_u1","label":"Off / On","tooltip":"Turn on or off this sensor slot.","group":"b8623710.b94b58","order":39,"width":4,"height":1,"passthru":true,"decouple":"false","topic":"swtOnOff_u1","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":2040,"y":2020,"wires":[["d3204f3e.deb05"]]},{"id":"5c91bfe.0da454","type":"json","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","property":"payload","action":"","pretty":false,"x":830,"y":1640,"wires":[["6fd604b4.65596c","383f01e9.2ef55e"]]},{"id":"6fd604b4.65596c","type":"debug","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":850,"y":1680,"wires":[]},{"id":"d8b25d65.823c1","type":"comment","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"CHANGE FILE NAME PATH","info":"Aqui mudar o comando de modo a funcionar no IOT.","x":720,"y":2100,"wires":[]},{"id":"5dd57dd6.052984","type":"comment","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"README - Notes for the directory structure in IOT2040","info":"# Criar directório onde serão guardados os config files e posteriormente acedidos.\n\n## Estrutura do Directório:\n\n---\n\n### project_Data/\n### ├─ sensor_Configs/\n### │  ├─ acquired_Data/\n### │  │  ├─ sensor1_Data.json\n### │  ├─ adicional_NotificationSettings/\n### │  │  ├─ extra_Noti_1.json\n### │  ├─ current_Configs/\n### │  │  ├─ config1_Current.json\n### │  ├─ rs232_Configs/\n### │  │  ├─ config1_rs232.json\n### │  ├─ voltage_Configs/\n### │  │  ├─ config1_Voltage.json\n### \n\n---\n","x":1180,"y":1320,"wires":[],"icon":"node-red/alert.svg"},{"id":"91d98029.ebeaf","type":"switch","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Route Values","property":"parts","propertyType":"msg","rules":[{"t":"index","v":"0","vt":"num","v2":"0","v2t":"num"},{"t":"index","v":"2","vt":"num","v2":"2","v2t":"num"},{"t":"index","v":"3","vt":"num","v2":"3","v2t":"num"},{"t":"index","v":"4","vt":"num","v2":"4","v2t":"num"},{"t":"index","v":"5","vt":"num","v2":"5","v2t":"num"},{"t":"index","v":"6","vt":"num","v2":"6","v2t":"num"},{"t":"index","v":"7","vt":"num","v2":"7","v2t":"num"},{"t":"index","v":"8","vt":"num","v2":"8","v2t":"num"},{"t":"index","v":"1","vt":"num","v2":"1","v2t":"num"}],"checkall":"true","repair":true,"outputs":9,"x":1290,"y":1640,"wires":[["6f43640.2aafc9c"],["969078bc.1b2ce8"],["f35fa8d0.636dc8"],["14dffa8a.8310f5"],["b5d4dda4.afe8"],["7f622732.44ab28"],["60408c18.9a8844"],["7a6bc32.008a73c"],["33f593ee.c18d7c"]]},{"id":"383f01e9.2ef55e","type":"split","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"splitConfigFile","splt":"","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":1640,"wires":[["91d98029.ebeaf","a34b8215.b762d"]]},{"id":"a34b8215.b762d","type":"debug","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"parts","targetType":"msg","statusVal":"","statusType":"auto","x":1040,"y":1680,"wires":[]},{"id":"f35fa8d0.636dc8","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":1580,"wires":[["c4789673.403c28"]]},{"id":"14dffa8a.8310f5","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":1620,"wires":[["f3055df.18692a"]]},{"id":"7f622732.44ab28","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":1700,"wires":[["d024ef4c.b1432"]]},{"id":"60408c18.9a8844","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":1740,"wires":[["80d89999.3bfa38"]]},{"id":"7a6bc32.008a73c","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":1780,"wires":[["20539da3.5d5eb2"]]},{"id":"b5d4dda4.afe8","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1620,"y":1660,"wires":[["e0f418f2.c7fea8"]]},{"id":"7f2c859b.3e4dac","type":"comment","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"CHANGE FILE NAME PATH","info":"","x":980,"y":1520,"wires":[]},{"id":"299f19c7.a4aa16","type":"comment","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"CHANGE FILE NAME PATH","info":"","x":700,"y":1780,"wires":[]},{"id":"74ebce45.3c06c","type":"comment","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Read Me","info":"### A ideia aqui é permitir dar enable ou disable à configuração.\n### Podendo desligar ou ligar a entrada em causa.","x":120,"y":1200,"wires":[]},{"id":"64e69473.bff40c","type":"comment","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"CHANGE FOLDER PATH","info":"### Aqui colocar o path para a pasta correcta de configuração dos sensores em causa. (currente, tensão, rs232)\n\nNeste caso, o path da pasta /../voltage_configs/","x":450,"y":1400,"wires":[]},{"id":"4d1f9eba.d8798","type":"debug","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":690,"y":2180,"wires":[]},{"id":"ea17c587.f39f78","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Set to Null","rules":[{"t":"set","p":"payload","pt":"msg","to":"null","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":1820,"wires":[["c4789673.403c28","f3055df.18692a","969078bc.1b2ce8","e0f418f2.c7fea8","d024ef4c.b1432","6f43640.2aafc9c","80d89999.3bfa38","20539da3.5d5eb2","2208ff77.d2d49"]]},{"id":"486047df.883e68","type":"ui_button","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"btn_refresh_u1","group":"b8623710.b94b58","order":50,"width":4,"height":1,"passthru":false,"label":"","tooltip":"Show the current configuration of input","color":"","bgcolor":"","icon":"fa-refresh","payload":"true","payloadType":"bool","topic":"topic","x":140,"y":1660,"wires":[["c15014ab.8239e8","57985694.93d4e8"]]},{"id":"62a1349.b5565cc","type":"exec","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","command":"ls /usr/dados/tensao","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":380,"y":1520,"wires":[["4a529208.e770dc"],[],[]]},{"id":"4a529208.e770dc","type":"split","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","splt":"\\n","spltType":"str","arraySplt":"10","arraySpltType":"len","stream":true,"addname":"","x":370,"y":1440,"wires":[["b6f9648f.ec5f48"]]},{"id":"d3204f3e.deb05","type":"change","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"Save enabled","rules":[{"t":"set","p":"enabled_u1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2040,"y":2080,"wires":[[]]},{"id":"2208ff77.d2d49","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","func":"msg.payload=false; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1840,"y":2020,"wires":[["33f593ee.c18d7c"]]},{"id":"b6f9648f.ec5f48","type":"join","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":490,"y":1440,"wires":[["dba73d1.cf90cc"]]},{"id":"c15014ab.8239e8","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","func":"msg.filename = \"usr/dados/config/U1.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":1660,"wires":[["67b7d594.46f31c"]]},{"id":"7112500e.05254","type":"ui_button","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"btn_Load_u1","group":"b8623710.b94b58","order":56,"width":4,"height":1,"passthru":false,"label":"LOAD","tooltip":"Load current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnload_u1","x":130,"y":1820,"wires":[["b2d816fe.447488","f2c476e8.12d1e8"]]},{"id":"f7d4ae8f.358f7","type":"file","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":1170,"y":1980,"wires":[[]]},{"id":"f2c476e8.12d1e8","type":"delay","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":190,"y":1520,"wires":[["62a1349.b5565cc"]]},{"id":"eca999d3.85dc68","type":"inject","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"10","topic":"","payload":"","payloadType":"date","x":190,"y":1400,"wires":[["62a1349.b5565cc"]]},{"id":"57985694.93d4e8","type":"function","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"","func":"'função para colocar a opção selecionada como a U1.json '\nmsg.payload=\"U1.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":1620,"wires":[["245b7f4a.782a7"]]},{"id":"d0e75ed7.dcb0d","type":"json","z":"ebf7676.b0d7a98","name":"","property":"payload","action":"str","pretty":true,"x":1030,"y":1980,"wires":[["f7d4ae8f.358f7"]]},{"id":"291ee95d.9a2636","type":"comment","z":"ebf7676.b0d7a98","name":"CHANGE FILE NAME PATH","info":"","x":700,"y":1940,"wires":[]},{"id":"2fc9e7ad.308fb8","type":"function","z":"ebf7676.b0d7a98","name":"Get and Join Current Values","func":"var name_u1 = flow.get(\"name_u1\") || \"DEFAULT_VALUE\"; \nvar units_u1 = flow.get(\"units_u1\") || \"DEFAULT UNITS\";\nvar rangeMin_u1 = flow.get(\"rangeMin_u1\") || \"0\";\nvar rangeMax_u1 = flow.get(\"rangeMax_u1\") || \"0\";\nvar alarmMin_u1 = flow.get(\"alarmMin_u1\") || \"0\";\nvar alarmMax_u1 = flow.get(\"alarmMax_u1\") || \"0\";\nvar alarmPreMin_u1 = flow.get(\"alarmPreMin_u1\") || \"0\";\nvar alarmPreMax_u1 = flow.get(\"alarmPreMax_u1\") || \"0\";\nvar enabled = flow.get(\"enabled_u1\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_u1,\n    \"enabled\":enabled_u1,\n    \"units\": units_u1,\n    \"rangeMin\": rangeMin_u1,\n    \"rangeMax\": rangeMax_u1,\n    \"alarmMin\": alarmMin_u1,\n    \"alarmMax\": alarmMax_u1,\n    \"alarmPreMin\": alarmPreMin_u1,\n    \"alarmPreMax\": alarmPreMax_u1\n}\n\nmsg.filename = \"usr/dados/tensao/\"+ name_u1+ \".json\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":1980,"wires":[["d0e75ed7.dcb0d","8fd5db12.75d728"]]},{"id":"8fd5db12.75d728","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":650,"y":2020,"wires":[]},{"id":"589494c.24c266c","type":"ui_button","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","name":"btn_clean_u1","group":"b8623710.b94b58","order":44,"width":4,"height":1,"passthru":false,"label":"Clean","tooltip":"Clean form entries.","color":"","bgcolor":"","icon":"fa-eraser","payload":"","payloadType":"date","topic":"","x":1420,"y":1820,"wires":[["ea17c587.f39f78","f2c476e8.12d1e8"]]},{"id":"cc13d08c.d1fc2","type":"ui_dropdown","z":"ebf7676.b0d7a98","name":"dd_ConfigChoice_i0","label":"Saved Configurations","tooltip":"Select desired (saved) sensor config.","place":"","group":"b8623710.b94b58","order":5,"width":8,"height":1,"passthru":false,"multiple":false,"options":[],"payload":"","topic":"configChoice_i0","x":2960,"y":320,"wires":[["b7717995.886588"]]},{"id":"756beb7a.6cc094","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_RangeMin_i0","label":"Range Min","tooltip":"","group":"b8623710.b94b58","order":16,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMin_i0","x":4230,"y":340,"wires":[["d0215c45.1c75c"]]},{"id":"fb089e84.e6eb","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_RangeMax_i0","label":"Range Max","tooltip":"","group":"b8623710.b94b58","order":17,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMax_i0","x":4230,"y":420,"wires":[["568a055e.f7f2dc"]]},{"id":"9c7d3224.9f847","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_Units_i0","label":"Units","tooltip":"(Meters, Seconds, Pascal, Bar, ...)","group":"b8623710.b94b58","order":11,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"units_i0","x":4210,"y":260,"wires":[["34df0df6.dbdc82"]]},{"id":"f95ccf3c.59433","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_AlarmMin_i0","label":"Alarm Min","tooltip":"","group":"b8623710.b94b58","order":22,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMin_i0","x":4220,"y":500,"wires":[["5d4039b8.790798"]]},{"id":"adb4c635.910a58","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"txt_AlarmMax_i0","label":"Alarm Max","tooltip":"","group":"b8623710.b94b58","order":23,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMax_i0","x":4230,"y":580,"wires":[["abf42540.d04488"]]},{"id":"39b7267b.633dda","type":"ui_button","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"btn_Save_i0","group":"b8623710.b94b58","order":30,"width":4,"height":1,"passthru":false,"label":"Save","tooltip":"Save current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnsave_i0","x":2390,"y":780,"wires":[["55e432b8.1c15ac","3e042953.3a5e06"]]},{"id":"5847bb99.2fdbf4","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"txt_SensorName_i0","label":"Sensor Name","tooltip":"Sensor Name, and subsquently config file name. No spaces allowed.","group":"b8623710.b94b58","order":10,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"name_i0","x":4210,"y":180,"wires":[["537c6206.c7bf9c"]]},{"id":"78f5b232.9148bc","type":"ui_button","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"btn_Delete_i0","group":"b8623710.b94b58","order":34,"width":4,"height":1,"passthru":false,"label":"Delete","tooltip":"Delete selected configuration.","color":"","bgcolor":"","icon":"fa-times","payload":"true","payloadType":"bool","topic":"delete_i0","x":2420,"y":960,"wires":[["c3af5ebf.f941c","55e432b8.1c15ac","51cc470a.53b6f8"]]},{"id":"305e1a22.a7a976","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"txt_AlarmPreMin_i0","label":"Alarm PreMin","tooltip":"","group":"b8623710.b94b58","order":28,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmpreMin_i0","x":4230,"y":660,"wires":[["2b0011ad.0aee4e"]]},{"id":"f6dd817c.f53ce","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_AlarmPreMax_i0","label":"Alarm PreMax","tooltip":"","group":"b8623710.b94b58","order":29,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmPreMax_i0","x":4240,"y":740,"wires":[["56eebd41.5ec6c4"]]},{"id":"935d0eac.2a9","type":"json","z":"ebf7676.b0d7a98","name":"","property":"payload","action":"str","pretty":true,"x":3290,"y":640,"wires":[["9cab55c7.ce54b8"]]},{"id":"b3c46bac.d5e8c8","type":"file in","z":"ebf7676.b0d7a98","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":2900,"y":460,"wires":[["2053cd1f.f83e02","892cb127.75043"]]},{"id":"ccda81d8.bb0ef","type":"exec","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":3310,"y":960,"wires":[[],[],[]]},{"id":"9cab55c7.ce54b8","type":"file","z":"ebf7676.b0d7a98","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":3430,"y":640,"wires":[[]]},{"id":"537c6206.c7bf9c","type":"change","z":"ebf7676.b0d7a98","name":"Save Value name_i0","rules":[{"t":"set","p":"name_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4240,"y":220,"wires":[[]]},{"id":"34df0df6.dbdc82","type":"change","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Save Value units_i0","rules":[{"t":"set","p":"units_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4210,"y":300,"wires":[[]]},{"id":"dbdb7579.147728","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":2910,"y":680,"wires":[]},{"id":"298c1b8d.e69d44","type":"function","z":"ebf7676.b0d7a98","name":"Get and Join Current Values","func":"var name_i0 = flow.get(\"name_i0\") || \"DEFAULT_VALUE\"; \nvar units_i0 = flow.get(\"units_i0\") || \"DEFAULT UNITS\";\nvar rangeMin_i0 = flow.get(\"rangeMin_i0\") || \"0\";\nvar rangeMax_i0 = flow.get(\"rangeMax_i0\") || \"0\";\nvar alarmMin_i0 = flow.get(\"alarmMin_i0\") || \"0\";\nvar alarmMax_i0 = flow.get(\"alarmMax_i0\") || \"0\";\nvar alarmPreMin_i0 = flow.get(\"alarmPreMin_i0\") || \"0\";\nvar alarmPreMax_i0 = flow.get(\"alarmPreMax_i0\") || \"0\";\nvar enabled_i0 = flow.get(\"enabled_i0\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_i0,\n    \"enabled\":enabled_i0,\n    \"units\": units_i0,\n    \"rangeMin\": rangeMin_i0,\n    \"rangeMax\": rangeMax_i0,\n    \"alarmMin\": alarmMin_i0,\n    \"alarmMax\": alarmMax_i0,\n    \"alarmPreMin\": alarmPreMin_i0,\n    \"alarmPreMax\": alarmPreMax_i0\n}\n\nmsg.filename = \"usr/dados/config/I0.json\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2960,"y":640,"wires":[["935d0eac.2a9","dbdb7579.147728"]]},{"id":"d0215c45.1c75c","type":"change","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Save Value rangeMin_i0","rules":[{"t":"set","p":"rangeMin_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4230,"y":380,"wires":[[]]},{"id":"568a055e.f7f2dc","type":"change","z":"ebf7676.b0d7a98","name":"Save Value rangeMax_i0","rules":[{"t":"set","p":"rangeMax_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4250,"y":460,"wires":[[]]},{"id":"5d4039b8.790798","type":"change","z":"ebf7676.b0d7a98","name":"Save Value AlarmMin_i0","rules":[{"t":"set","p":"alarmMin_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4250,"y":540,"wires":[[]]},{"id":"abf42540.d04488","type":"change","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Save Value AlarmMax_i0","rules":[{"t":"set","p":"alarmMax_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4250,"y":620,"wires":[[]]},{"id":"56eebd41.5ec6c4","type":"change","z":"ebf7676.b0d7a98","name":"Save Value AlarmPreMax_i0","rules":[{"t":"set","p":"alarmPreMax_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4260,"y":780,"wires":[[]]},{"id":"2b0011ad.0aee4e","type":"change","z":"ebf7676.b0d7a98","name":"Save Value AlarmPreMin_i0","rules":[{"t":"set","p":"alarmPreMin_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4260,"y":700,"wires":[[]]},{"id":"b7717995.886588","type":"change","z":"ebf7676.b0d7a98","name":"Save Value ConfigChoice_i0","rules":[{"t":"set","p":"configChoice_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2960,"y":380,"wires":[["2b838ed.c992f72"]]},{"id":"c3af5ebf.f941c","type":"function","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Delete selected choice","func":"var configChoice_i0 = flow.get(\"configChoice_i0\");\n\nmsg.payload = \"rm /usr/dados/corrente/\" + configChoice_i0\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2980,"y":960,"wires":[["ccda81d8.bb0ef","a8d480f3.7a293"]]},{"id":"2b838ed.c992f72","type":"function","z":"ebf7676.b0d7a98","name":"Get choice to load config file","func":"var configChoice_i0 = flow.get(\"configChoice_i0\");\nmsg.filename = \"usr/dados/corrente/\" + configChoice_i0\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3240,"y":380,"wires":[["b3c46bac.d5e8c8"]]},{"id":"ad67ead9.347018","type":"function","z":"ebf7676.b0d7a98","name":"Get file names and update Drop Down","func":"msg.payload[0]=null\nmsg.options = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2990,"y":260,"wires":[["cc13d08c.d1fc2"]]},{"id":"2053cd1f.f83e02","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":2910,"y":520,"wires":[]},{"id":"3a00696f.2e1006","type":"ui_switch","z":"ebf7676.b0d7a98","name":"swt_OnOff_i0","label":"Off / On","tooltip":"Turn on or off this sensor slot.","group":"b8623710.b94b58","order":6,"width":4,"height":1,"passthru":true,"decouple":"false","topic":"swtOnOff_i0","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":4280,"y":840,"wires":[["f081299c.ba4b58"]]},{"id":"892cb127.75043","type":"json","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"","property":"payload","action":"","pretty":false,"x":3090,"y":460,"wires":[["e90478b4.68ee18","adb70dc1.d5784"]]},{"id":"e90478b4.68ee18","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":3110,"y":500,"wires":[]},{"id":"3b6fb8b7.531258","type":"comment","z":"ebf7676.b0d7a98","name":"CHANGE FILE NAME PATH","info":"Aqui mudar o comando de modo a funcionar no IOT.","x":2980,"y":920,"wires":[]},{"id":"de836819.f2fed8","type":"comment","z":"ebf7676.b0d7a98","name":"README - Notes for the directory structure in IOT2040","info":"# Criar directório onde serão guardados os config files e posteriormente acedidos.\n\n## Estrutura do Directório:\n\n---\n\n### project_Data/\n### ├─ sensor_Configs/\n### │  ├─ acquired_Data/\n### │  │  ├─ sensor1_Data.json\n### │  ├─ adicional_NotificationSettings/\n### │  │  ├─ extra_Noti_1.json\n### │  ├─ current_Configs/\n### │  │  ├─ config1_Current.json\n### │  ├─ rs232_Configs/\n### │  │  ├─ config1_rs232.json\n### │  ├─ voltage_Configs/\n### │  │  ├─ config1_Voltage.json\n### \n\n---\n","x":3440,"y":140,"wires":[],"icon":"node-red/alert.svg"},{"id":"93f5d4ec.9ef728","type":"switch","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Route Values","property":"parts","propertyType":"msg","rules":[{"t":"index","v":"0","vt":"num","v2":"0","v2t":"num"},{"t":"index","v":"2","vt":"num","v2":"2","v2t":"num"},{"t":"index","v":"3","vt":"num","v2":"3","v2t":"num"},{"t":"index","v":"4","vt":"num","v2":"4","v2t":"num"},{"t":"index","v":"5","vt":"num","v2":"5","v2t":"num"},{"t":"index","v":"6","vt":"num","v2":"6","v2t":"num"},{"t":"index","v":"7","vt":"num","v2":"7","v2t":"num"},{"t":"index","v":"8","vt":"num","v2":"8","v2t":"num"},{"t":"index","v":"1","vt":"num","v2":"1","v2t":"num"}],"checkall":"true","repair":true,"outputs":9,"x":3510,"y":460,"wires":[["5847bb99.2fdbf4"],["9c7d3224.9f847"],["c480a3f8.28fd4"],["90af0b8e.4c6958"],["3781187b.219a28"],["924ec38d.3034c"],["c66f8989.561228"],["ccc21931.fa3008"],["3a00696f.2e1006"]]},{"id":"adb70dc1.d5784","type":"split","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"splitConfigFile","splt":"","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":3300,"y":460,"wires":[["93f5d4ec.9ef728","92c10f59.74d1e"]]},{"id":"92c10f59.74d1e","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"parts","targetType":"msg","statusVal":"","statusType":"auto","x":3300,"y":500,"wires":[]},{"id":"c480a3f8.28fd4","type":"function","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3860,"y":400,"wires":[["756beb7a.6cc094"]]},{"id":"90af0b8e.4c6958","type":"function","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3860,"y":440,"wires":[["fb089e84.e6eb"]]},{"id":"924ec38d.3034c","type":"function","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3860,"y":520,"wires":[["adb4c635.910a58"]]},{"id":"c66f8989.561228","type":"function","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3860,"y":560,"wires":[["305e1a22.a7a976"]]},{"id":"ccc21931.fa3008","type":"function","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3860,"y":600,"wires":[["f6dd817c.f53ce"]]},{"id":"3781187b.219a28","type":"function","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3860,"y":480,"wires":[["f95ccf3c.59433"]]},{"id":"ae1892ab.09c4","type":"comment","z":"ebf7676.b0d7a98","name":"CHANGE FILE NAME PATH","info":"","x":3240,"y":340,"wires":[]},{"id":"ac8ffa6a.7fe8b8","type":"comment","z":"ebf7676.b0d7a98","name":"CHANGE FILE NAME PATH","info":"","x":2960,"y":600,"wires":[]},{"id":"7dca6cff.3c4044","type":"comment","z":"ebf7676.b0d7a98","name":"CHANGE FOLDER PATH","info":"### Aqui colocar o path para a pasta correcta de configuração dos sensores em causa. (currente, tensão, rs232)\n\nNeste caso, o path da pasta /../voltage_configs/","x":2710,"y":220,"wires":[]},{"id":"a8d480f3.7a293","type":"debug","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2970,"y":1000,"wires":[]},{"id":"51cc470a.53b6f8","type":"change","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Set to Null","rules":[{"t":"set","p":"payload","pt":"msg","to":"null","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":3870,"y":640,"wires":[["756beb7a.6cc094","fb089e84.e6eb","9c7d3224.9f847","f95ccf3c.59433","adb4c635.910a58","5847bb99.2fdbf4","305e1a22.a7a976","f6dd817c.f53ce","d0ad9856.f579f8"]]},{"id":"d054d452.c88988","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_refresh_i0","group":"b8623710.b94b58","order":18,"width":4,"height":1,"passthru":false,"label":"","tooltip":"Show the current configuration of input","color":"","bgcolor":"","icon":"fa-refresh","payload":"true","payloadType":"bool","topic":"topic","x":2400,"y":480,"wires":[["fe506177.e3bd1","3d583b40.e627e4"]]},{"id":"359b8f68.d11e","type":"exec","z":"ebf7676.b0d7a98","command":"ls /usr/dados/corrente","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":2640,"y":340,"wires":[["b4fdfdd.f69c3"],[],[]]},{"id":"b4fdfdd.f69c3","type":"split","z":"ebf7676.b0d7a98","name":"","splt":"\\n","spltType":"str","arraySplt":"10","arraySpltType":"len","stream":true,"addname":"","x":2630,"y":260,"wires":[["950cdd6a.abec2"]]},{"id":"f081299c.ba4b58","type":"change","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"Save enabled","rules":[{"t":"set","p":"enabled_i0","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4280,"y":900,"wires":[[]]},{"id":"d0ad9856.f579f8","type":"function","z":"ebf7676.b0d7a98","name":"","func":"msg.payload=false; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":4080,"y":840,"wires":[["3a00696f.2e1006"]]},{"id":"950cdd6a.abec2","type":"join","z":"ebf7676.b0d7a98","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2750,"y":260,"wires":[["ad67ead9.347018"]]},{"id":"fe506177.e3bd1","type":"function","z":"ebf7676.b0d7a98","name":"","func":"msg.filename = \"usr/dados/config/I0.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2600,"y":480,"wires":[["b3c46bac.d5e8c8"]]},{"id":"2a3f1c83.9ceaf4","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_Load_i0","group":"b8623710.b94b58","order":24,"width":4,"height":1,"passthru":false,"label":"LOAD","tooltip":"Load current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnload_i0","x":2390,"y":640,"wires":[["298c1b8d.e69d44","55e432b8.1c15ac"]]},{"id":"2463d5e0.f5207a","type":"file","z":"ebf7676.b0d7a98","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":3430,"y":800,"wires":[[]]},{"id":"55e432b8.1c15ac","type":"delay","z":"ebf7676.b0d7a98","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2450,"y":340,"wires":[["359b8f68.d11e"]]},{"id":"c8ad8772.8c0458","type":"inject","z":"ebf7676.b0d7a98","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"10","topic":"","payload":"","payloadType":"date","x":2450,"y":220,"wires":[["359b8f68.d11e"]]},{"id":"3d583b40.e627e4","type":"function","z":"ebf7676.b0d7a98","name":"","func":"'função para colocar a opção selecionada como a I0.json '\nmsg.payload=\"I0.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2600,"y":440,"wires":[["cc13d08c.d1fc2"]]},{"id":"aa6068bf.80fc88","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":2910,"y":840,"wires":[]},{"id":"3e042953.3a5e06","type":"function","z":"ebf7676.b0d7a98","name":"Get and Join Current Values","func":"var name_i0 = flow.get(\"name_i0\") || \"DEFAULT_VALUE\"; \nvar units_i0 = flow.get(\"units_i0\") || \"DEFAULT UNITS\";\nvar rangeMin_i0 = flow.get(\"rangeMin_i0\") || \"0\";\nvar rangeMax_i0 = flow.get(\"rangeMax_i0\") || \"0\";\nvar alarmMin_i0 = flow.get(\"alarmMin_i0\") || \"0\";\nvar alarmMax_i0 = flow.get(\"alarmMax_i0\") || \"0\";\nvar alarmPreMin_i0 = flow.get(\"alarmPreMin_i0\") || \"0\";\nvar alarmPreMax_i0 = flow.get(\"alarmPreMax_i0\") || \"0\";\nvar enabled_i0 = flow.get(\"enabled_i0\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_i0,\n    \"enabled\":enabled_i0,\n    \"units\": units_i0,\n    \"rangeMin\": rangeMin_i0,\n    \"rangeMax\": rangeMax_i0,\n    \"alarmMin\": alarmMin_i0,\n    \"alarmMax\": alarmMax_i0,\n    \"alarmPreMin\": alarmPreMin_i0,\n    \"alarmPreMax\": alarmPreMax_i0\n}\n\nmsg.filename = \"usr/dados/corrente/\"+ name_i0+ \".json\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2960,"y":800,"wires":[["425525ad.2007cc","aa6068bf.80fc88"]]},{"id":"425525ad.2007cc","type":"json","z":"ebf7676.b0d7a98","name":"","property":"payload","action":"str","pretty":true,"x":3290,"y":800,"wires":[["2463d5e0.f5207a"]]},{"id":"34f63892.191e68","type":"ui_button","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","name":"btn_clean_i0","group":"b8623710.b94b58","order":12,"width":4,"height":1,"passthru":false,"label":"Clean","tooltip":"Clean form entries.","color":"","bgcolor":"","icon":"fa-eraser","payload":"","payloadType":"date","topic":"","x":3650,"y":640,"wires":[["51cc470a.53b6f8","55e432b8.1c15ac"]]},{"id":"eade9d39.10981","type":"inject","z":"ebf7676.b0d7a98","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"10","topic":"","payload":"","payloadType":"date","x":2410,"y":1380,"wires":[["25f489f8.929256"]]},{"id":"25f489f8.929256","type":"exec","z":"ebf7676.b0d7a98","command":"ls /usr/dados/corrente","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":2600,"y":1500,"wires":[["8dee4e85.fa8d5"],[],[]]},{"id":"8dee4e85.fa8d5","type":"split","z":"ebf7676.b0d7a98","name":"","splt":"\\n","spltType":"str","arraySplt":"10","arraySpltType":"len","stream":true,"addname":"","x":2590,"y":1420,"wires":[["6a5ba083.ecd7d"]]},{"id":"3d33732b.168d6c","type":"delay","z":"ebf7676.b0d7a98","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2410,"y":1500,"wires":[["25f489f8.929256"]]},{"id":"6a5ba083.ecd7d","type":"join","z":"ebf7676.b0d7a98","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2710,"y":1420,"wires":[["d1c1f87a.2c0198"]]},{"id":"6ee3e9ac.56e078","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_Save_i1","group":"b8623710.b94b58","order":65,"width":4,"height":1,"passthru":false,"label":"Save","tooltip":"Save current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnsave_i1","x":2370,"y":1940,"wires":[["3d33732b.168d6c","a4d40d2b.acd5a"]]},{"id":"d825613.66b89a","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_Delete_i1","group":"b8623710.b94b58","order":69,"width":4,"height":1,"passthru":false,"label":"Delete","tooltip":"Delete selected configuration.","color":"","bgcolor":"","icon":"fa-times","payload":"true","payloadType":"bool","topic":"delete_i1","x":2400,"y":2120,"wires":[["fa80c71f.2f9108","3d33732b.168d6c","b27f69d8.a49a88"]]},{"id":"e0bd3907.d8b0d8","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_Load_i1","group":"b8623710.b94b58","order":59,"width":4,"height":1,"passthru":false,"label":"LOAD","tooltip":"Load current config by the sensor name provided.","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"btnload_i1","x":2350,"y":1800,"wires":[["10cf46b1.50c8f9","3d33732b.168d6c"]]},{"id":"d1c1f87a.2c0198","type":"function","z":"ebf7676.b0d7a98","name":"Get file names and update Drop Down","func":"msg.payload[0]=null\nmsg.options = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2950,"y":1420,"wires":[["3abe1b30.e20be4"]]},{"id":"a4d40d2b.acd5a","type":"function","z":"ebf7676.b0d7a98","name":"Get and Join Current Values","func":"var name_i1 = flow.get(\"name_i1\") || \"DEFAULT_VALUE\"; \nvar units_i1 = flow.get(\"units_i1\") || \"DEFAULT UNITS\";\nvar rangeMin_i1 = flow.get(\"rangeMin_i1\") || \"0\";\nvar rangeMax_i1 = flow.get(\"rangeMax_i1\") || \"0\";\nvar alarmMin_i1 = flow.get(\"alarmMin_i1\") || \"0\";\nvar alarmMax_i1 = flow.get(\"alarmMax_i1\") || \"0\";\nvar alarmPreMin_i1 = flow.get(\"alarmPreMin_i1\") || \"0\";\nvar alarmPreMax_i1 = flow.get(\"alarmPreMax_i1\") || \"0\";\nvar enabled_i1 = flow.get(\"enabled_i1\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_i1,\n    \"enabled\":enabled_i1,\n    \"units\": units_i1,\n    \"rangeMin\": rangeMin_i1,\n    \"rangeMax\": rangeMax_i1,\n    \"alarmMin\": alarmMin_i1,\n    \"alarmMax\": alarmMax_i1,\n    \"alarmPreMin\": alarmPreMin_i1,\n    \"alarmPreMax\": alarmPreMax_i1\n}\n\nmsg.filename = \"usr/dados/corrente/\"+ name_i1+ \".json\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2920,"y":1960,"wires":[["9caa4f6e.19656","97007062.91edb"]]},{"id":"fa80c71f.2f9108","type":"function","z":"ebf7676.b0d7a98","name":"Delete selected choice","func":"var configChoice_i1 = flow.get(\"configChoice_i1\");\n\nmsg.payload = \"rm /usr/dados/corrente/\" + configChoice_i1\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2960,"y":2120,"wires":[["feecfbea.8e9528","5c68466b.ad8a08"]]},{"id":"b27f69d8.a49a88","type":"change","z":"ebf7676.b0d7a98","name":"Set to Null","rules":[{"t":"set","p":"payload","pt":"msg","to":"null","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":3850,"y":1800,"wires":[["2c82291c.e10966","35152c8c.c9e1d4","7ae846c7.83b6d8","5c17da28.791734","73c48eab.023db","33d09a38.d3e1e6","b95da97.f846258","9ecd334d.72125","d7ac5086.123b5"]]},{"id":"10cf46b1.50c8f9","type":"function","z":"ebf7676.b0d7a98","name":"Get and Join Current Values","func":"var name_i1 = flow.get(\"name_i1\") || \"DEFAULT_VALUE\"; \nvar units_i1 = flow.get(\"units_i1\") || \"DEFAULT UNITS\";\nvar rangeMin_i1 = flow.get(\"rangeMin_i1\") || \"0\";\nvar rangeMax_i1 = flow.get(\"rangeMax_i1\") || \"0\";\nvar alarmMin_i1 = flow.get(\"alarmMin_i1\") || \"0\";\nvar alarmMax_i1 = flow.get(\"alarmMax_i1\") || \"0\";\nvar alarmPreMin_i1 = flow.get(\"alarmPreMin_i1\") || \"0\";\nvar alarmPreMax_i1 = flow.get(\"alarmPreMax_i1\") || \"0\";\nvar enabled_i1 = flow.get(\"enabled_i1\") || false;\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_i1,\n    \"enabled\":enabled_i1,\n    \"units\": units_i1,\n    \"rangeMin\": rangeMin_i1,\n    \"rangeMax\": rangeMax_i1,\n    \"alarmMin\": alarmMin_i1,\n    \"alarmMax\": alarmMax_i1,\n    \"alarmPreMin\": alarmPreMin_i1,\n    \"alarmPreMax\": alarmPreMax_i1\n}\n\nmsg.filename = \"usr/dados/config/I1.json\"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2920,"y":1800,"wires":[["ead094cf.273108","474769ef.7d06e8"]]},{"id":"3abe1b30.e20be4","type":"ui_dropdown","z":"ebf7676.b0d7a98","name":"dd_ConfigChoice_i1","label":"Saved Configurations","tooltip":"Select desired (saved) sensor config.","place":"","group":"b8623710.b94b58","order":40,"width":8,"height":1,"passthru":false,"multiple":false,"options":[],"payload":"","topic":"configChoice_i1","x":2920,"y":1480,"wires":[["487b1fcc.90ed4"]]},{"id":"9caa4f6e.19656","type":"json","z":"ebf7676.b0d7a98","name":"","property":"payload","action":"str","pretty":true,"x":3250,"y":1960,"wires":[["b83348fe.ca0c08"]]},{"id":"97007062.91edb","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":2870,"y":2000,"wires":[]},{"id":"feecfbea.8e9528","type":"exec","z":"ebf7676.b0d7a98","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":3290,"y":2120,"wires":[[],[],[]]},{"id":"5c68466b.ad8a08","type":"debug","z":"ebf7676.b0d7a98","g":"d7ef82b9.2abb6","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2950,"y":2160,"wires":[]},{"id":"2c82291c.e10966","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_RangeMin_i1","label":"Range Min","tooltip":"","group":"b8623710.b94b58","order":51,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMin_i1","x":4190,"y":1500,"wires":[["a6754722.f80988"]]},{"id":"35152c8c.c9e1d4","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_RangeMax_i1","label":"Range Max","tooltip":"","group":"b8623710.b94b58","order":52,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"rangeMax_i1","x":4190,"y":1580,"wires":[["dd17e798.7e12c8"]]},{"id":"7ae846c7.83b6d8","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_Units_i1","label":"Units","tooltip":"(Meters, Seconds, Pascal, Bar, ...)","group":"b8623710.b94b58","order":46,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"units_i1","x":4170,"y":1420,"wires":[["8d6173d4.c4ef5"]]},{"id":"5c17da28.791734","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_AlarmMin_i1","label":"Alarm Min","tooltip":"","group":"b8623710.b94b58","order":57,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMin_i1","x":4180,"y":1660,"wires":[["3917b0bf.35f04"]]},{"id":"73c48eab.023db","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_AlarmMax_i1","label":"Alarm Max","tooltip":"","group":"b8623710.b94b58","order":58,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmMax_i1","x":4210,"y":1740,"wires":[["f060136a.c7a4"]]},{"id":"33d09a38.d3e1e6","type":"ui_text_input","z":"ebf7676.b0d7a98","g":"d7ef82b9.2abb6","name":"txt_SensorName_i1","label":"Sensor Name","tooltip":"Sensor Name, and subsquently config file name. No spaces allowed.","group":"b8623710.b94b58","order":45,"width":4,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"name_i1","x":4190,"y":1340,"wires":[["111cf003.7ba25"]]},{"id":"b95da97.f846258","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_AlarmPreMin_i1","label":"Alarm PreMin","tooltip":"","group":"b8623710.b94b58","order":63,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmpreMin_i1","x":4210,"y":1820,"wires":[["d8170c52.8a492"]]},{"id":"9ecd334d.72125","type":"ui_text_input","z":"ebf7676.b0d7a98","name":"txt_AlarmPreMax_i1","label":"Alarm PreMax","tooltip":"","group":"b8623710.b94b58","order":64,"width":4,"height":1,"passthru":true,"mode":"number","delay":"300","topic":"alarmPreMax_i1","x":4200,"y":1900,"wires":[["259e43d.de36bbc"]]},{"id":"d7ac5086.123b5","type":"function","z":"ebf7676.b0d7a98","name":"","func":"msg.payload=false; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":4040,"y":2000,"wires":[["da25fa64.82e278"]]},{"id":"5af58227.ce954c","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_clean_i1","group":"b8623710.b94b58","order":47,"width":4,"height":1,"passthru":false,"label":"Clean","tooltip":"Clean form entries.","color":"","bgcolor":"","icon":"fa-eraser","payload":"","payloadType":"date","topic":"","x":3630,"y":1800,"wires":[["b27f69d8.a49a88","3d33732b.168d6c"]]},{"id":"ead094cf.273108","type":"json","z":"ebf7676.b0d7a98","name":"","property":"payload","action":"str","pretty":true,"x":3250,"y":1800,"wires":[["109d3c42.c3c3a4"]]},{"id":"474769ef.7d06e8","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":2870,"y":1840,"wires":[]},{"id":"487b1fcc.90ed4","type":"change","z":"ebf7676.b0d7a98","name":"Save Value ConfigChoice_i1","rules":[{"t":"set","p":"configChoice_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2920,"y":1540,"wires":[["28212fc6.0af84"]]},{"id":"8f092b00.dbac28","type":"function","z":"ebf7676.b0d7a98","name":"","func":"'função para colocar a opção selecionada como a I1.json '\nmsg.payload=\"I1.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2560,"y":1600,"wires":[["3abe1b30.e20be4"]]},{"id":"b83348fe.ca0c08","type":"file","z":"ebf7676.b0d7a98","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":3390,"y":1960,"wires":[[]]},{"id":"a6754722.f80988","type":"change","z":"ebf7676.b0d7a98","name":"Save Value rangeMin_i1","rules":[{"t":"set","p":"rangeMin_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4210,"y":1540,"wires":[[]]},{"id":"b74f3d52.5b2bc","type":"function","z":"ebf7676.b0d7a98","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3840,"y":1560,"wires":[["2c82291c.e10966"]]},{"id":"dd17e798.7e12c8","type":"change","z":"ebf7676.b0d7a98","name":"Save Value rangeMax_i1","rules":[{"t":"set","p":"rangeMax_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4210,"y":1620,"wires":[[]]},{"id":"ba5f8fa0.54615","type":"function","z":"ebf7676.b0d7a98","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3840,"y":1600,"wires":[["35152c8c.c9e1d4"]]},{"id":"8d6173d4.c4ef5","type":"change","z":"ebf7676.b0d7a98","name":"Save Value units_i1","rules":[{"t":"set","p":"units_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4190,"y":1460,"wires":[[]]},{"id":"eb4173b9.13e77","type":"switch","z":"ebf7676.b0d7a98","name":"Route Values","property":"parts","propertyType":"msg","rules":[{"t":"index","v":"0","vt":"num","v2":"0","v2t":"num"},{"t":"index","v":"2","vt":"num","v2":"2","v2t":"num"},{"t":"index","v":"3","vt":"num","v2":"3","v2t":"num"},{"t":"index","v":"4","vt":"num","v2":"4","v2t":"num"},{"t":"index","v":"5","vt":"num","v2":"5","v2t":"num"},{"t":"index","v":"6","vt":"num","v2":"6","v2t":"num"},{"t":"index","v":"7","vt":"num","v2":"7","v2t":"num"},{"t":"index","v":"8","vt":"num","v2":"8","v2t":"num"},{"t":"index","v":"1","vt":"num","v2":"1","v2t":"num"}],"checkall":"true","repair":true,"outputs":9,"x":3490,"y":1620,"wires":[["33d09a38.d3e1e6"],["7ae846c7.83b6d8"],["b74f3d52.5b2bc"],["ba5f8fa0.54615"],["7c2b835d.7e276c"],["e03ab4d9.028b28"],["c43eae1a.a62f4"],["ea52ee58.813ba"],["da25fa64.82e278"]]},{"id":"3917b0bf.35f04","type":"change","z":"ebf7676.b0d7a98","name":"Save Value AlarmMin_i1","rules":[{"t":"set","p":"alarmMin_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4210,"y":1700,"wires":[[]]},{"id":"7c2b835d.7e276c","type":"function","z":"ebf7676.b0d7a98","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3840,"y":1640,"wires":[["5c17da28.791734"]]},{"id":"f060136a.c7a4","type":"change","z":"ebf7676.b0d7a98","name":"Save Value AlarmMax_i1","rules":[{"t":"set","p":"alarmMax_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4230,"y":1780,"wires":[[]]},{"id":"e03ab4d9.028b28","type":"function","z":"ebf7676.b0d7a98","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3840,"y":1680,"wires":[["73c48eab.023db"]]},{"id":"111cf003.7ba25","type":"change","z":"ebf7676.b0d7a98","name":"Save Value name_i1","rules":[{"t":"set","p":"name_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4200,"y":1380,"wires":[[]]},{"id":"d8170c52.8a492","type":"change","z":"ebf7676.b0d7a98","name":"Save Value AlarmPreMin_i1","rules":[{"t":"set","p":"alarmPreMin_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4220,"y":1860,"wires":[[]]},{"id":"c43eae1a.a62f4","type":"function","z":"ebf7676.b0d7a98","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3840,"y":1720,"wires":[["b95da97.f846258"]]},{"id":"259e43d.de36bbc","type":"change","z":"ebf7676.b0d7a98","name":"Save Value AlarmPreMax_i1","rules":[{"t":"set","p":"alarmPreMax_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4220,"y":1940,"wires":[[]]},{"id":"ea52ee58.813ba","type":"function","z":"ebf7676.b0d7a98","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3840,"y":1760,"wires":[["9ecd334d.72125"]]},{"id":"da25fa64.82e278","type":"ui_switch","z":"ebf7676.b0d7a98","name":"swt_OnOff_i1","label":"Off / On","tooltip":"Turn on or off this sensor slot.","group":"b8623710.b94b58","order":41,"width":4,"height":1,"passthru":true,"decouple":"false","topic":"swtOnOff_i1","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":4240,"y":2000,"wires":[["cd1fdf44.afd13"]]},{"id":"109d3c42.c3c3a4","type":"file","z":"ebf7676.b0d7a98","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":3390,"y":1800,"wires":[[]]},{"id":"28212fc6.0af84","type":"function","z":"ebf7676.b0d7a98","name":"Get choice to load config file","func":"var configChoice_i1 = flow.get(\"configChoice_i1\");\nmsg.filename = \"usr/dados/corrente/\" + configChoice_i1\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3200,"y":1540,"wires":[["33b55f89.03dde"]]},{"id":"5590a2db.03c96c","type":"ui_button","z":"ebf7676.b0d7a98","name":"btn_refresh_i1","group":"b8623710.b94b58","order":53,"width":4,"height":1,"passthru":false,"label":"","tooltip":"Show the current configuration of input","color":"","bgcolor":"","icon":"fa-refresh","payload":"true","payloadType":"bool","topic":"topic","x":2360,"y":1640,"wires":[["e3f4403a.d98b1","8f092b00.dbac28"]]},{"id":"3ab1328e.c6517e","type":"split","z":"ebf7676.b0d7a98","name":"splitConfigFile","splt":"","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":3280,"y":1620,"wires":[["eb4173b9.13e77","302e8311.5449ac"]]},{"id":"cd1fdf44.afd13","type":"change","z":"ebf7676.b0d7a98","g":"d7ef82b9.2abb6","name":"Save enabled","rules":[{"t":"set","p":"enabled_i1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4260,"y":2060,"wires":[[]]},{"id":"33b55f89.03dde","type":"file in","z":"ebf7676.b0d7a98","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":2860,"y":1620,"wires":[["e450591f.e84938","5b98a318.5810cc"]]},{"id":"e3f4403a.d98b1","type":"function","z":"ebf7676.b0d7a98","name":"","func":"msg.filename = \"usr/dados/config/I1.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2560,"y":1640,"wires":[["33b55f89.03dde"]]},{"id":"5b98a318.5810cc","type":"json","z":"ebf7676.b0d7a98","name":"","property":"payload","action":"","pretty":false,"x":3070,"y":1620,"wires":[["8fac9b9.fff8968","3ab1328e.c6517e"]]},{"id":"302e8311.5449ac","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"parts","targetType":"msg","statusVal":"","statusType":"auto","x":3260,"y":1660,"wires":[]},{"id":"e450591f.e84938","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":2870,"y":1680,"wires":[]},{"id":"8fac9b9.fff8968","type":"debug","z":"ebf7676.b0d7a98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":3070,"y":1660,"wires":[]},{"id":"8131b6db.b56e98","type":"ui_button","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","group":"49de8910.30c838","order":1,"width":12,"height":1,"passthru":false,"label":"Começar recolha de dados","tooltip":"","color":"","bgcolor":"{{msg.payload.color}}","icon":"","payload":"true","payloadType":"bool","topic":"","x":560,"y":2940,"wires":[["3aa75d7a.3fa402","1e665a84.8b2765","b63f9d17.b067d","a4334051.b3597"]]},{"id":"72b8d1e.ba41e3","type":"ui_button","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","group":"49de8910.30c838","order":3,"width":12,"height":1,"passthru":false,"label":"Parar recolha de dados","tooltip":"","color":"","bgcolor":"","icon":"","payload":"false","payloadType":"bool","topic":"","x":560,"y":3000,"wires":[["3aa75d7a.3fa402","a4334051.b3597","b63f9d17.b067d"]]},{"id":"3aa75d7a.3fa402","type":"change","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","rules":[{"t":"set","p":"recolha","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":2980,"wires":[[]]},{"id":"b63f9d17.b067d","type":"function","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","func":"var recolha = flow.get(\"recolha\")\nif (recolha==true) {\n    msg.enabled=false; \n}else {\n    msg.enabled=true; \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":2940,"wires":[["8131b6db.b56e98"]]},{"id":"a4334051.b3597","type":"function","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","func":"var recolha = flow.get(\"recolha\")\nif (recolha==true) {\n    msg.enabled=true; \n}else {\n    msg.enabled=false; \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":3000,"wires":[["72b8d1e.ba41e3"]]},{"id":"fb81f3d3.1ecd8","type":"change","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","rules":[{"t":"set","p":"nomeficheiro","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030,"y":2940,"wires":[[]]},{"id":"1e665a84.8b2765","type":"function","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","func":"var time=new Date().toISOString();\nmsg.payload=time; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":830,"y":2940,"wires":[["fb81f3d3.1ecd8"]]},{"id":"a94d9899.ab38d8","type":"inject","z":"ce8e632f.2c0ec","g":"9ea8c61b.62a158","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":140,"y":2960,"wires":[["b63f9d17.b067d","a4334051.b3597"]]},{"id":"7f22404f.f97a","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"mean_mobile_calc","func":"// Variable declaration\nvar valueArray = context.get(\"valueArray\") || []; // Get previous array of values, if it exists\nvar tot = 0;\nvar valueCount = valueArray.length; //Length of the array\n\n// If the array has less than 10 values, add another one\nif (valueCount < 10){\n    valueArray[valueCount] = msg.payload.value;\n}\n// If the array has 10 values, replace the oldest one\nelse{\n    \n    for (i=0; i<9; i++){\n        valueArray[i] = valueArray[i+1];\n    }\n    \n    valueArray[9] = msg.payload.value;\n}\n\n//Save the array\ncontext.set(\"valueArray\", valueArray)\n\n//\nif (valueCount < 10){\n    for (i = 0; i < valueCount + 1; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/(valueCount + 1);\n}\nelse{\n    for (i = 0; i < valueCount; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/valueCount;    \n}\n\nmean = Math.round(mean*100)/100;\n\nmsg.payload = mean;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1050,"y":100,"wires":[["d14541a.947dbc"]]},{"id":"d14541a.947dbc","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean_mobile","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":100,"wires":[["b7adad3c.6dde"]]},{"id":"d2a93341.6b92e","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"max_calc","func":"// Variable declaration\nvar valueMax = context.get(\"valueMax\") || 0;\nvar units = global.get(\"SensorUnitsU0\");\n\nif (valueMax == 0){\n    valueMax = msg.payload.value;\n}\nelse{\n    if (msg.payload.value > valueMax){\n        valueMax = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMax\", valueMax);\n\nmsg.payload.units = units\nmsg.payload.max = valueMax;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":340,"wires":[["5b0cf05e.06b88"]]},{"id":"66fc1573.1b3f6c","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"min_calc","func":"// Variable declaration\nvar valueMin = context.get(\"valueMin\") || 0;\nvar units = global.get(\"SensorUnitsU0\");\n\nif (valueMin == 0){\n    valueMin = msg.payload.value;\n}\nelse{\n    if (msg.payload.value < valueMin){\n        valueMin = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMin\", valueMin);\n\n\nmsg.payload.units = units\nmsg.payload.min = valueMin;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":280,"wires":[["13403d4f.174253"]]},{"id":"13403d4f.174253","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"min","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":280,"wires":[["46eab2b8.32366c"]]},{"id":"5b0cf05e.06b88","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"max","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":340,"wires":[["71876b2e.b680f4"]]},{"id":"593a1c23.94afe4","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"slope_calc","func":"var previousValue = context.get(\"previousValue\") || 0;\nvar prevTime = context.get(\"previousTime\") || 0;\n\nvar units = global.get(\"SensorUnitsU0\");\n\nvar actualTime = Date.now();\n\nif (prevTime != 0){\n    \nvar timeDiff = (actualTime - prevTime)/1000;\n\nvar delta = msg.payload.value - previousValue;\n\nvar slope = delta/timeDiff;\n\nslope = Math.round(slope*100)/100;\n\nmsg.payload.slope = slope;\n\n}\n\nelse{\n    msg.payload.slope = 0;\n}\n\ncontext.set(\"previousTime\", actualTime);\ncontext.set(\"previousValue\", msg.payload.value);\n\nmsg.payload.units = units;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1030,"y":400,"wires":[["f2c0a5e1.f9d078"]]},{"id":"f2c0a5e1.f9d078","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":400,"wires":[["a079aef0.9e109"]]},{"id":"6549059e.028a2c","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"mean_calc","func":"// Variable declaration\nvar tot = context.get(\"tot\") || 0; \nvar valueCount = context.get(\"valueCount\") || 0;\n\nvalueCount = valueCount + 1;\n\ntot = tot + msg.payload.value;\n\nvar mean=0; \n\nif (valueCount != 0){\n    mean = tot/valueCount;\n}\n\nmean = Math.round(mean*100)/100;\nmsg.payload = mean;\n\ncontext.set(\"tot\", tot);\ncontext.set(\"valueCount\", valueCount);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1030,"y":160,"wires":[["bd2f8255.8fa46"]]},{"id":"bd2f8255.8fa46","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":160,"wires":[["b7adad3c.6dde"]]},{"id":"a079aef0.9e109","type":"ui_text","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","group":"49de8910.30c838","order":17,"width":4,"height":1,"name":"Slope_U0","label":"Slope","format":"{{msg.payload.slope}}  {{msg.payload.units}}/s","layout":"row-spread","x":1440,"y":400,"wires":[]},{"id":"46eab2b8.32366c","type":"ui_text","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","group":"49de8910.30c838","order":20,"width":4,"height":1,"name":"Minimum_U0","label":"Minimum","format":"{{msg.payload.min}} {{msg.payload.units}}","layout":"row-spread","x":1450,"y":280,"wires":[]},{"id":"71876b2e.b680f4","type":"ui_text","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","group":"49de8910.30c838","order":14,"width":4,"height":1,"name":"Maximum_U0","label":"Maximum","format":"{{msg.payload.max}} {{msg.payload.units}}","layout":"row-spread","x":1460,"y":340,"wires":[]},{"id":"b669b702.5280a8","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"max_calc","func":"// Variable declaration\nvar valueMax = context.get(\"valueMax\") || 0;\nvar units = global.get(\"SensorUnitsI0\");\n\nif (valueMax == 0){\n    valueMax = msg.payload.value;\n}\nelse{\n    if (msg.payload.value > valueMax){\n        valueMax = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMax\", valueMax);\n\nmsg.payload.units = units;\nmsg.payload.max = valueMax;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3380,"y":340,"wires":[["eac2c04c.daf42"]]},{"id":"104fc5b0.32a4ea","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"min_calc","func":"// Variable declaration\nvar valueMin = context.get(\"valueMin\") || 0;\nvar units = global.get(\"SensorUnitsI0\");\n\nif (valueMin == 0){\n    valueMin = msg.payload.value;\n}\nelse{\n    if (msg.payload.value < valueMin){\n        valueMin = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMin\", valueMin);\n\nmsg.payload.units = units;\nmsg.payload.min = valueMin;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3380,"y":280,"wires":[["dcefb8f5.b642d8"]]},{"id":"dcefb8f5.b642d8","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"min","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3610,"y":280,"wires":[["ce754eb8.a49e6"]]},{"id":"eac2c04c.daf42","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"max","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3610,"y":340,"wires":[["db46bf8e.581e6"]]},{"id":"4dc91cf8.7b35a4","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"slope_calc","func":"var previousValue = context.get(\"previousValue\") || 0;\nvar prevTime = context.get(\"previousTime\") || 0;\nvar units = global.get(\"SensorUnitsI0\");\n\nvar actualTime = Date.now();\n\nif (prevTime != 0){\n    \nvar timeDiff = (actualTime - prevTime)/1000;\n\nvar delta = msg.payload.value - previousValue;\n\nvar slope = delta/timeDiff;\n\nslope = Math.round(slope*100)/100;\n\nmsg.payload.slope = slope;\n\n}\n\nelse{\n    msg.payload.slope = 0;\n}\n\ncontext.set(\"previousTime\", actualTime);\ncontext.set(\"previousValue\", msg.payload.value);\n\nmsg.payload.units = units;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3390,"y":400,"wires":[["4066c3cf.9a32fc"]]},{"id":"4066c3cf.9a32fc","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3610,"y":400,"wires":[["d22a4dbf.38fe3"]]},{"id":"d22a4dbf.38fe3","type":"ui_text","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","group":"49de8910.30c838","order":27,"width":4,"height":1,"name":"Slope_I0","label":"Slope","format":"{{msg.payload.slope}}  {{msg.payload.units}}/s","layout":"row-spread","x":3800,"y":400,"wires":[]},{"id":"ce754eb8.a49e6","type":"ui_text","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","group":"49de8910.30c838","order":30,"width":4,"height":1,"name":"Minimum_I0","label":"Minimum","format":"{{msg.payload.min}} {{msg.payload.units}}","layout":"row-spread","x":3810,"y":280,"wires":[]},{"id":"db46bf8e.581e6","type":"ui_text","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","group":"49de8910.30c838","order":24,"width":4,"height":1,"name":"Maximum_I0","label":"Maximum","format":"{{msg.payload.max}} {{msg.payload.units}}","layout":"row-spread","x":3810,"y":340,"wires":[]},{"id":"abe9f17e.082bd","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"mean_calc","func":"// Variable declaration\nvar tot = context.get(\"tot\") || 0; \nvar valueCount = context.get(\"valueCount\") || 0;\n\nvalueCount = valueCount + 1;\n\ntot = tot + msg.payload.value;\n\nvar mean=0; \n\nif (valueCount != 0){\n    mean = tot/valueCount;\n}\n\nmean = Math.round(mean*100)/100;\nmsg.payload = mean;\n\ncontext.set(\"tot\", tot);\ncontext.set(\"valueCount\", valueCount);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3390,"y":160,"wires":[["c01a1361.aab1c"]]},{"id":"c01a1361.aab1c","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3610,"y":160,"wires":[["1c8dd986.c25456"]]},{"id":"94b0cffe.f17f8","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean_mobile","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3610,"y":100,"wires":[["1c8dd986.c25456"]]},{"id":"c9e4293a.d3db78","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"mean_mobile_calc","func":"// Variable declaration\nvar valueArray = context.get(\"valueArray\") || []; // Get previous array of values, if it exists\nvar tot = 0;\nvar valueCount = valueArray.length; //Length of the array\n\n// If the array has less than 10 values, add another one\nif (valueCount < 10){\n    valueArray[valueCount] = msg.payload.value;\n}\n// If the array has 10 values, replace the oldest one\nelse{\n    \n    for (i=0; i<9; i++){\n        valueArray[i] = valueArray[i+1];\n    }\n    \n    valueArray[9] = msg.payload.value;\n}\n\n//Save the array\ncontext.set(\"valueArray\", valueArray)\n\n//\nif (valueCount < 10){\n    for (i = 0; i < valueCount + 1; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/(valueCount + 1);\n}\nelse{\n    for (i = 0; i < valueCount; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/valueCount;    \n}\n\nmean = Math.round(mean*100)/100;\n\nmsg.payload = mean;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3410,"y":100,"wires":[["94b0cffe.f17f8"]]},{"id":"9f62dd84.ccc8d","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"max_calc","func":"// Variable declaration\nvar valueMax = context.get(\"valueMax\") || 0;\nvar units = global.get(\"SensorUnitsU1\");\n\nif (valueMax == 0){\n    valueMax = msg.payload.value;\n}\nelse{\n    if (msg.payload.value > valueMax){\n        valueMax = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMax\", valueMax);\n\nmsg.payload.units = units;\nmsg.payload.max = valueMax;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":1660,"wires":[["971ef41.a634e08"]]},{"id":"2d9cf8f7.06b158","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"min_calc","func":"// Variable declaration\nvar valueMin = context.get(\"valueMin\") || 0;\nvar units = global.get(\"SensorUnitsU1\");\n\nif (valueMin == 0){\n    valueMin = msg.payload.value;\n}\nelse{\n    if (msg.payload.value < valueMin){\n        valueMin = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMin\", valueMin);\n\n\nmsg.payload.units = units;\nmsg.payload.min = valueMin;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1020,"y":1600,"wires":[["84ba906d.051e4"]]},{"id":"84ba906d.051e4","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"min","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":1600,"wires":[["346041c2.90b9ee"]]},{"id":"971ef41.a634e08","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"max","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":1660,"wires":[["27e86eb9.bc3332"]]},{"id":"61bb89d9.7fa498","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"slope_calc","func":"var previousValue = context.get(\"previousValue\") || 0;\nvar prevTime = context.get(\"previousTime\") || 0;\nvar units = global.get(\"SensorUnitsU1\");\n\nvar actualTime = Date.now();\n\nif (prevTime != 0){\n    \nvar timeDiff = (actualTime - prevTime)/1000;\n\nvar delta = msg.payload.value - previousValue;\n\nvar slope = delta/timeDiff;\n\nslope = Math.round(slope*100)/100;\n\nmsg.payload.slope = slope;\n\n}\n\nelse{\n    msg.payload.slope = 0;\n}\n\ncontext.set(\"previousTime\", actualTime);\ncontext.set(\"previousValue\", msg.payload.value);\n\nmsg.payload.units = units;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1030,"y":1720,"wires":[["9b78b9e7.ca5d48"]]},{"id":"9b78b9e7.ca5d48","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":1720,"wires":[["4ffa1f6b.22aa"]]},{"id":"4ffa1f6b.22aa","type":"ui_text","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","group":"49de8910.30c838","order":37,"width":4,"height":1,"name":"Slope_U1","label":"Slope","format":"{{msg.payload.slope}} {{msg.payload.units}}/s","layout":"row-spread","x":1440,"y":1720,"wires":[]},{"id":"346041c2.90b9ee","type":"ui_text","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","group":"49de8910.30c838","order":40,"width":4,"height":1,"name":"Minimum_U1","label":"Minimum","format":"{{msg.payload.min}} {{msg.payload.units}}","layout":"row-spread","x":1450,"y":1600,"wires":[]},{"id":"27e86eb9.bc3332","type":"ui_text","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","group":"49de8910.30c838","order":34,"width":4,"height":1,"name":"Maximum_U1","label":"Maximum","format":"{{msg.payload.max}} {{msg.payload.units}}","layout":"row-spread","x":1460,"y":1660,"wires":[]},{"id":"5df2069d.964e48","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"mean_calc","func":"// Variable declaration\nvar tot = context.get(\"tot\") || 0; \nvar valueCount = context.get(\"valueCount\") || 0;\n\nvalueCount = valueCount + 1;\n\ntot = tot + msg.payload.value;\n\nvar mean=0; \n\nif (valueCount != 0){\n    mean = tot/valueCount;\n}\n\nmean = Math.round(mean*100)/100;\nmsg.payload = mean;\n\ncontext.set(\"tot\", tot);\ncontext.set(\"valueCount\", valueCount);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1030,"y":1480,"wires":[["b99db787.5627b8"]]},{"id":"b99db787.5627b8","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":1480,"wires":[["3f94a997.ffa576"]]},{"id":"1a3677fd.993378","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean_mobile","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":1420,"wires":[["3f94a997.ffa576"]]},{"id":"34e3232f.5c81dc","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"mean_mobile_calc","func":"// Variable declaration\nvar valueArray = context.get(\"valueArray\") || []; // Get previous array of values, if it exists\nvar tot = 0;\nvar valueCount = valueArray.length; //Length of the array\n\n// If the array has less than 10 values, add another one\nif (valueCount < 10){\n    valueArray[valueCount] = msg.payload.value;\n}\n// If the array has 10 values, replace the oldest one\nelse{\n    \n    for (i=0; i<9; i++){\n        valueArray[i] = valueArray[i+1];\n    }\n    \n    valueArray[9] = msg.payload.value;\n}\n\n//Save the array\ncontext.set(\"valueArray\", valueArray)\n\n//\nif (valueCount < 10){\n    for (i = 0; i < valueCount + 1; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/(valueCount + 1);\n}\nelse{\n    for (i = 0; i < valueCount; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/valueCount;    \n}\n\nmean = Math.round(mean*100)/100;\n\nmsg.payload = mean;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1050,"y":1420,"wires":[["1a3677fd.993378"]]},{"id":"ad0ab75c.28eeb8","type":"ui_text","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","group":"b8623710.b94b58","order":1,"width":12,"height":1,"name":"label_u0","label":"Sensor Configuration u0","format":"{{msg.payload}}","layout":"row-spread","x":180,"y":180,"wires":[]},{"id":"75bfa1b6.5ac7d","type":"ui_text","z":"ebf7676.b0d7a98","g":"c7d37b98.58bd68","group":"b8623710.b94b58","order":2,"width":12,"height":1,"name":"label_i0","label":"Sensor Configuration i0","format":"{{msg.payload}}","layout":"row-spread","x":2380,"y":140,"wires":[]},{"id":"2e745bee.53ce24","type":"ui_text","z":"ebf7676.b0d7a98","g":"9be8224b.7bda3","group":"b8623710.b94b58","order":36,"width":12,"height":1,"name":"label_u1","label":"Sensor Configuration u1","format":"{{msg.payload}}","layout":"row-spread","x":180,"y":1280,"wires":[]},{"id":"875f53b9.a1a8c","type":"ui_text","z":"ebf7676.b0d7a98","g":"d7ef82b9.2abb6","group":"b8623710.b94b58","order":37,"width":12,"height":1,"name":"label_i1","label":"Sensor Configuration i1","format":"{{msg.payload}}","layout":"row-spread","x":2400,"y":1280,"wires":[]},{"id":"5d212be8.b7cce4","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_SensorName_x31","label":"Sensor Name","tooltip":"","group":"c0410b2b.230078","order":7,"width":6,"height":1,"passthru":true,"mode":"text","delay":"0","topic":"topic","x":2120,"y":1540,"wires":[["3583bae4.4a0e36"]]},{"id":"74475d5c.fe48e4","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_Units_x31","label":"Units","tooltip":"","group":"c0410b2b.230078","order":8,"width":6,"height":1,"passthru":true,"mode":"text","delay":"0","topic":"topic","x":2100,"y":1700,"wires":[["385b49f4.9d1896"]]},{"id":"2fb3700e.7a70b","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_RangeMin_x31","label":"Range Min","tooltip":"","group":"c0410b2b.230078","order":47,"width":6,"height":1,"passthru":true,"mode":"number","delay":"0","topic":"topic","x":2110,"y":1780,"wires":[["953b3b01.65cba8"]]},{"id":"14c31c9f.597553","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"dd_ConnectType_x31","label":"Connection Type","tooltip":"","place":"Connection Type","group":"c0410b2b.230078","order":12,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"RS232","value":"RS232","type":"str"},{"label":"RS485","value":"RS485","type":"str"}],"payload":"","topic":"topic","x":2120,"y":2260,"wires":[["b89b304d.445a5"]]},{"id":"a8a25727.fba9b8","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_RangeMax_x31","label":"Range Max","tooltip":"","group":"c0410b2b.230078","order":48,"width":6,"height":1,"passthru":true,"mode":"number","delay":"0","topic":"topic","x":2110,"y":1860,"wires":[["a1152019.48f3d"]]},{"id":"69304dab.397fc4","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_AlarmMin_x31","label":"Alarm Min","tooltip":"","group":"c0410b2b.230078","order":51,"width":6,"height":1,"passthru":true,"mode":"number","delay":"0","topic":"topic","x":2110,"y":1940,"wires":[["cb96abff.a5bf08"]]},{"id":"faaada76.769578","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_AlarmMax_x31","label":"Alarm Max","tooltip":"","group":"c0410b2b.230078","order":52,"width":6,"height":1,"passthru":true,"mode":"number","delay":"0","topic":"topic","x":2110,"y":2020,"wires":[["584d6066.45708"]]},{"id":"d15af685.aef658","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"dd_Parity_x31","label":"Parity","tooltip":"","place":"Parity","group":"c0410b2b.230078","order":36,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"none","value":"none","type":"str"},{"label":"even","value":"even","type":"str"},{"label":"odd","value":"odd","type":"str"},{"label":"mark","value":"mark","type":"str"},{"label":"space","value":"space","type":"str"}],"payload":"","topic":"topic","x":2100,"y":2580,"wires":[["ecac6bfc.3e6668"]]},{"id":"42e51e98.fe58b","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"dd_BaudRate_x31","label":"BaudRate","tooltip":"","place":"Baude Rate","group":"c0410b2b.230078","order":18,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"1200","value":"1200","type":"str"},{"label":"2400","value":"2400","type":"str"},{"label":"4800","value":"4800","type":"str"},{"label":"9600","value":"9600","type":"str"},{"label":"14400","value":"14400","type":"str"},{"label":"19200","value":"19200","type":"str"},{"label":"28800","value":"28800","type":"str"},{"label":"38400","value":"38400","type":"str"},{"label":"57600","value":"57600","type":"str"},{"label":"115200","value":"115200","type":"str"},{"label":"230400","value":"230400","type":"str"}],"payload":"","topic":"topic","x":2110,"y":2340,"wires":[["2ce3767f.10fe2a"]]},{"id":"b8c76a.e0c1a898","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"dd_DataBits_x31","label":"Data Bits","tooltip":"","place":"Data Bits","group":"c0410b2b.230078","order":24,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"5","value":"5","type":"str"},{"label":"6","value":"6","type":"str"},{"label":"7","value":"7","type":"str"},{"label":"8","value":"8","type":"str"}],"payload":"","topic":"topic","x":2110,"y":2420,"wires":[["4470e9a0.cd5a58"]]},{"id":"5c17b43d.38820c","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"dd_StopBits_x31","label":"Stop Bits","tooltip":"","place":"Stop Bits","group":"c0410b2b.230078","order":30,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"1","value":"1","type":"str"},{"label":"2","value":"2","type":"str"}],"payload":"","topic":"topic","x":2110,"y":2500,"wires":[["56c9027d.5e8aec"]]},{"id":"c3259f3f.525eb","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"dd_FlowControl_x31","label":"Flow Control","tooltip":"","place":"Flow Control","group":"c0410b2b.230078","order":42,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"RTS/CTS","value":"RTS/CTS","type":"str"},{"label":"DTR/DSR","value":"DTR/DSR","type":"str"},{"label":"XON/XOFF","value":"XON/XOFF","type":"str"}],"payload":"","topic":"topic","x":2120,"y":2660,"wires":[["2d1dfb2f.c48144"]]},{"id":"122d331b.2c822d","type":"ui_button","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"load_x31","group":"c0410b2b.230078","order":38,"width":4,"height":1,"passthru":false,"label":"Load","tooltip":"","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"topic","x":160,"y":2200,"wires":[["e5e5c87c.7e4c98","e3d6c3cc.4fbad"]]},{"id":"c74b5e2c.bfe9b","type":"ui_button","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save_x31","group":"c0410b2b.230078","order":32,"width":4,"height":1,"passthru":false,"label":"Save","tooltip":"","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"topic","x":160,"y":2340,"wires":[["f32b0c17.8c499","d41c66cf.0c8a08"]]},{"id":"fc080c52.e00fb","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"choice_x31","label":"Saved Config.","tooltip":"","place":"","group":"c0410b2b.230078","order":4,"width":12,"height":1,"passthru":false,"multiple":false,"options":[{"label":"Sensor-1","value":"Sensor-1","type":"str"},{"label":"Sensor-2","value":"Sensor-2","type":"str"},{"label":"Sensor-3","value":"Sensor-3","type":"str"}],"payload":"","topic":"choice ","x":830,"y":1800,"wires":[["1b5c66fe.c0c289","ebda33a6.f3e"]]},{"id":"a633273b.3a9e88","type":"ui_button","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"delete_x31","group":"c0410b2b.230078","order":44,"width":4,"height":1,"passthru":false,"label":"Delete","tooltip":"","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"topic","x":170,"y":2460,"wires":[["16cfaa5d.bd62a6","f32b0c17.8c499","ffe5b240.6ae58"]]},{"id":"1fbdd68b.ede3c9","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_AlarmPreMin_x31","label":"Alarm Min","tooltip":"","group":"c0410b2b.230078","order":55,"width":6,"height":1,"passthru":true,"mode":"number","delay":"0","topic":"topic","x":2120,"y":2100,"wires":[["9641c20b.9e3f1"]]},{"id":"4593f3f8.f5291c","type":"ui_text_input","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"txt_AlarmPreMax_x31","label":"Alarm Max","tooltip":"","group":"c0410b2b.230078","order":56,"width":6,"height":1,"passthru":true,"mode":"number","delay":"0","topic":"topic","x":2120,"y":2180,"wires":[["aef430c2.42f6e"]]},{"id":"dad56502.1c0578","type":"ui_text","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","group":"c0410b2b.230078","order":2,"width":12,"height":1,"name":"label_x31","label":"text","format":"{{msg.payload}}","layout":"row-spread","x":360,"y":1600,"wires":[]},{"id":"505dd35.8102d2c","type":"ui_switch","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"switch_x31","label":"On / Off","tooltip":"","group":"c0410b2b.230078","order":14,"width":4,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":2090,"y":1620,"wires":[["ab66bf31.41278"]]},{"id":"ffe5b240.6ae58","type":"ui_button","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"clean_x31","group":"c0410b2b.230078","order":20,"width":4,"height":1,"passthru":false,"label":"Clean","tooltip":"","color":"","bgcolor":"","icon":"fa-eraser","payload":"true","payloadType":"bool","topic":"topic","x":1450,"y":2260,"wires":[["1b4209fa.fe3576","f32b0c17.8c499"]]},{"id":"42af0b71.5b8384","type":"ui_button","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"refresh_x31","group":"c0410b2b.230078","order":26,"width":4,"height":1,"passthru":true,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-refresh","payload":"true","payloadType":"bool","topic":"topic","x":370,"y":1920,"wires":[["f868b9d0.5a7ad8","f6ad3efc.437b3"]]},{"id":"6935b78.ace6848","type":"function","z":"ebf7676.b0d7a98","g":"698c1ef3.f853d","name":"","func":"msg.payload=false; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1840,"y":900,"wires":[["61e760b2.0c784"]]},{"id":"3583bae4.4a0e36","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value sensorName x31","rules":[{"t":"set","p":"name_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2140,"y":1580,"wires":[[]]},{"id":"ab66bf31.41278","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value enabled","rules":[{"t":"set","p":"enabled_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":1660,"wires":[[]]},{"id":"b89b304d.445a5","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value connect type","rules":[{"t":"set","p":"connectType_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":2300,"wires":[[]]},{"id":"2ce3767f.10fe2a","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value baud rate","rules":[{"t":"set","p":"baudRate_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2120,"y":2380,"wires":[[]]},{"id":"4470e9a0.cd5a58","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value data bits","rules":[{"t":"set","p":"dataBits_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2120,"y":2460,"wires":[[]]},{"id":"56c9027d.5e8aec","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value stop bits","rules":[{"t":"set","p":"stopBits_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":2540,"wires":[[]]},{"id":"ecac6bfc.3e6668","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value parity","rules":[{"t":"set","p":"parity_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2110,"y":2620,"wires":[[]]},{"id":"2d1dfb2f.c48144","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value flow Control","rules":[{"t":"set","p":"flowControl_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":2700,"wires":[[]]},{"id":"385b49f4.9d1896","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value units","rules":[{"t":"set","p":"units_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2100,"y":1740,"wires":[[]]},{"id":"953b3b01.65cba8","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value rage min","rules":[{"t":"set","p":"rangeMin_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2120,"y":1820,"wires":[[]]},{"id":"a1152019.48f3d","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value range max","rules":[{"t":"set","p":"rangeMax_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2120,"y":1900,"wires":[[]]},{"id":"cb96abff.a5bf08","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value alarm min","rules":[{"t":"set","p":"alarmMin_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2120,"y":1980,"wires":[[]]},{"id":"584d6066.45708","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value alarm max","rules":[{"t":"set","p":"alarmMax_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2120,"y":2060,"wires":[[]]},{"id":"9641c20b.9e3f1","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value alarm pre min","rules":[{"t":"set","p":"alarmPreMin_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":2140,"wires":[[]]},{"id":"aef430c2.42f6e","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"save value alarm pre max","rules":[{"t":"set","p":"alarmPreMax_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":2220,"wires":[[]]},{"id":"ebda33a6.f3e","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Save Value ConfigChoice_x31","rules":[{"t":"set","p":"configChoice_x31","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":1860,"wires":[["8bddbd9e.5b5ae"]]},{"id":"8bddbd9e.5b5ae","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Get choice to load config file","func":"var configChoice_x31 = flow.get(\"configChoice_x31\");\n\nmsg.filename = \"usr/dados/portaserie/\" + configChoice_x31\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1100,"y":1860,"wires":[["71df1404.933fbc"]]},{"id":"53f24e68.97eea","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Get file names and update Drop Down","func":"msg.payload[0]=null\nmsg.options = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":850,"y":1740,"wires":[["fc080c52.e00fb"]]},{"id":"f0520451.0ae548","type":"exec","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","command":"ls /usr/dados/portaserie","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":510,"y":1820,"wires":[["8003c647.c7b768"],[],[]]},{"id":"8003c647.c7b768","type":"split","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","splt":"\\n","spltType":"str","arraySplt":"10","arraySpltType":"len","stream":true,"addname":"","x":470,"y":1740,"wires":[["e96e0332.96845"]]},{"id":"e96e0332.96845","type":"join","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":590,"y":1740,"wires":[["53f24e68.97eea"]]},{"id":"cd596b48.9bdbf8","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":1840,"wires":[["2fb3700e.7a70b"]]},{"id":"281fe019.2914b","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":1880,"wires":[["a8a25727.fba9b8"]]},{"id":"4dadbb52.88d794","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":1920,"wires":[["69304dab.397fc4"]]},{"id":"1b5c66fe.c0c289","type":"debug","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1060,"y":1800,"wires":[]},{"id":"ffaac352.b6c04","type":"json","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","property":"payload","action":"","pretty":false,"x":950,"y":1940,"wires":[["26044f86.bf2c8","e627467f.2d2598"]]},{"id":"26044f86.bf2c8","type":"debug","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":970,"y":1980,"wires":[]},{"id":"e627467f.2d2598","type":"split","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"splitConfigFile","splt":"","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1180,"y":1940,"wires":[["1b80cbb8.2bc3f4","685d692c.8cd6f8"]]},{"id":"1b80cbb8.2bc3f4","type":"debug","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"parts","targetType":"msg","statusVal":"","statusType":"auto","x":1160,"y":1980,"wires":[]},{"id":"685d692c.8cd6f8","type":"switch","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Route Values","property":"parts","propertyType":"msg","rules":[{"t":"index","v":"0","vt":"num","v2":"0","v2t":"num"},{"t":"index","v":"1","vt":"num","v2":"1","v2t":"num"},{"t":"index","v":"2","vt":"num","v2":"2","v2t":"num"},{"t":"index","v":"3","vt":"num","v2":"3","v2t":"num"},{"t":"index","v":"4","vt":"num","v2":"4","v2t":"num"},{"t":"index","v":"5","vt":"num","v2":"5","v2t":"num"},{"t":"index","v":"6","vt":"num","v2":"6","v2t":"num"},{"t":"index","v":"7","vt":"num","v2":"7","v2t":"num"},{"t":"index","v":"8","vt":"num","v2":"8","v2t":"num"},{"t":"index","v":"9","vt":"num","v2":"9","v2t":"num"},{"t":"index","v":"10","vt":"num","v2":"10","v2t":"num"},{"t":"index","v":"11","vt":"num","v2":"11","v2t":"num"},{"t":"index","v":"12","vt":"num","v2":"12","v2t":"num"},{"t":"index","v":"13","vt":"num","v2":"13","v2t":"num"},{"t":"index","v":"14","vt":"num","v2":"14","v2t":"num"}],"checkall":"true","repair":true,"outputs":15,"x":1410,"y":1940,"wires":[["5d212be8.b7cce4"],["505dd35.8102d2c"],["74475d5c.fe48e4"],["cd596b48.9bdbf8"],["281fe019.2914b"],["4dadbb52.88d794"],["2d765c0e.4bd894"],["3361b688.d0f5ba"],["9fffbf04.30b54"],["14c31c9f.597553"],["42e51e98.fe58b"],["b8c76a.e0c1a898"],["5c17b43d.38820c"],["d15af685.aef658"],["c3259f3f.525eb"]]},{"id":"71df1404.933fbc","type":"file in","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":760,"y":1940,"wires":[["5a15fa87.d500e4","ffaac352.b6c04"]]},{"id":"5a15fa87.d500e4","type":"debug","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":770,"y":2000,"wires":[]},{"id":"2d765c0e.4bd894","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":1960,"wires":[["faaada76.769578"]]},{"id":"3361b688.d0f5ba","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":2000,"wires":[["1fbdd68b.ede3c9"]]},{"id":"9fffbf04.30b54","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":2040,"wires":[["4593f3f8.f5291c"]]},{"id":"511da1fb.b6de9","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"to off","func":"msg.payload=false; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1730,"y":1600,"wires":[["505dd35.8102d2c"]]},{"id":"e6db8e50.8d14","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_SensorName_x30","label":"Sensor Name","tooltip":"","group":"c0410b2b.230078","order":5,"width":6,"height":1,"passthru":true,"mode":"text","delay":"300","topic":"topic","x":2140,"y":140,"wires":[["4036ea.18599918"]]},{"id":"bfca1010.58feb","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_Units_x30","label":"Units","tooltip":"","group":"c0410b2b.230078","order":6,"width":6,"height":1,"passthru":false,"mode":"text","delay":"300","topic":"topic","x":2120,"y":300,"wires":[["8d374ada.06fad8"]]},{"id":"15b5da9a.331b15","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_RangeMin_x30","label":"Range Min","tooltip":"","group":"c0410b2b.230078","order":45,"width":6,"height":1,"passthru":false,"mode":"number","delay":"300","topic":"topic","x":2130,"y":380,"wires":[["1fe931fb.b0e11e"]]},{"id":"abb08403.f286d8","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"dd_ConnectType_x30","label":"Connection Type","tooltip":"","place":"Connection Type","group":"c0410b2b.230078","order":9,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"RS232","value":"RS232","type":"str"},{"label":"RS485","value":"RS485","type":"str"}],"payload":"","topic":"topic","x":2140,"y":860,"wires":[["c4ed96f6.43dd68"]]},{"id":"97104e52.938f7","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_RangeMax_x30","label":"Range Max","tooltip":"","group":"c0410b2b.230078","order":46,"width":6,"height":1,"passthru":false,"mode":"number","delay":"300","topic":"topic","x":2130,"y":460,"wires":[["c2a17aa1.3bf058"]]},{"id":"60a400b8.a9053","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_AlarmMin_x30","label":"Alarm Min","tooltip":"","group":"c0410b2b.230078","order":49,"width":6,"height":1,"passthru":false,"mode":"number","delay":"300","topic":"topic","x":2130,"y":540,"wires":[["a3ec54fd.a4f608"]]},{"id":"d4696447.e63968","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_AlarmMax_x30","label":"Alarm Max","tooltip":"","group":"c0410b2b.230078","order":50,"width":6,"height":1,"passthru":false,"mode":"number","delay":"300","topic":"topic","x":2130,"y":620,"wires":[["d37bd964.9a1388"]]},{"id":"d9b1bcdb.1f532","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"dd_Parity_x30","label":"Parity","tooltip":"","place":"Parity","group":"c0410b2b.230078","order":33,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"none","value":"none","type":"str"},{"label":"even","value":"even","type":"str"},{"label":"odd","value":"odd","type":"str"},{"label":"mark","value":"mark","type":"str"},{"label":"space","value":"space","type":"str"}],"payload":"","topic":"topic","x":2120,"y":1180,"wires":[["8e4b4c42.05c11"]]},{"id":"8778eb15.b8f1b8","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"dd_BaudRate_x30","label":"BaudRate","tooltip":"","place":"Baude Rate","group":"c0410b2b.230078","order":15,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"1200","value":"1200","type":"str"},{"label":"2400","value":"2400","type":"str"},{"label":"4800","value":"4800","type":"str"},{"label":"9600","value":"9600","type":"str"},{"label":"14400","value":"14400","type":"str"},{"label":"19200","value":"19200","type":"str"},{"label":"28800","value":"28800","type":"str"},{"label":"38400","value":"38400","type":"str"},{"label":"57600","value":"57600","type":"str"},{"label":"115200","value":"115200","type":"str"},{"label":"230400","value":"230400","type":"str"}],"payload":"","topic":"topic","x":2130,"y":940,"wires":[["3b8287ff.230878"]]},{"id":"63f5307b.149cb","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"dd_DataBits_x30","label":"Data Bits","tooltip":"","place":"Data Bits","group":"c0410b2b.230078","order":21,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"5","value":"5","type":"str"},{"label":"6","value":"6","type":"str"},{"label":"7","value":"7","type":"str"},{"label":"8","value":"8","type":"str"}],"payload":"","topic":"topic","x":2130,"y":1020,"wires":[["fbfcf209.2b3c8"]]},{"id":"88d6fed9.2dd8d","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"dd_StopBits_x30","label":"Stop Bits","tooltip":"","place":"Stop Bits","group":"c0410b2b.230078","order":27,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"1","value":"1","type":"str"},{"label":"2","value":"2","type":"str"}],"payload":"","topic":"topic","x":2130,"y":1100,"wires":[["557def2a.b277c"]]},{"id":"2678ff9b.90101","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"dd_FlowControl_x30","label":"Flow Control","tooltip":"","place":"Flow Control","group":"c0410b2b.230078","order":39,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"RTS/CTS","value":"RTS/CTS","type":"str"},{"label":"DTR/DSR","value":"DTR/DSR","type":"str"},{"label":"XON/XOFF","value":"XON/XOFF","type":"str"}],"payload":"","topic":"topic","x":2140,"y":1260,"wires":[["6fb66f69.918d"]]},{"id":"7ee6dda1.123094","type":"ui_button","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"load_x30","group":"c0410b2b.230078","order":35,"width":4,"height":1,"passthru":false,"label":"LOAD","tooltip":"","color":"","bgcolor":"","icon":"fa-floppy-o","payload":"true","payloadType":"bool","topic":"topic","x":160,"y":840,"wires":[["65a0231d.8bc54c","70d8d775.7cabe8"]]},{"id":"c7787ae.a56f088","type":"ui_button","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save_x30","group":"c0410b2b.230078","order":29,"width":4,"height":1,"passthru":false,"label":"Save","tooltip":"","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"topic","x":160,"y":960,"wires":[["13b3be1f.ec5f82","60f4116e.19557"]]},{"id":"68c7012f.cdedd","type":"ui_dropdown","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"choice_x30","label":"Saved Config.","tooltip":"","place":"","group":"c0410b2b.230078","order":3,"width":12,"height":1,"passthru":false,"multiple":false,"options":[{"label":"x30.json","value":"x30.json","type":"str"}],"payload":"","topic":"choice ","x":850,"y":420,"wires":[["6c54f6e3.fe49b8","60991753.6d46d8"]]},{"id":"9a2e0dfd.a3446","type":"ui_button","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"delete_x30","group":"c0410b2b.230078","order":41,"width":4,"height":1,"passthru":false,"label":"Delete","tooltip":"","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"topic","x":170,"y":1080,"wires":[["94aeb5b8.f50178","60f4116e.19557","8f82d408.df9e88"]]},{"id":"41bb3767.62ca88","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_AlarmPreMin_x30","label":"Alarm PreMin","tooltip":"","group":"c0410b2b.230078","order":53,"width":6,"height":1,"passthru":false,"mode":"number","delay":"300","topic":"topic","x":2140,"y":700,"wires":[["93d501c6.f1934"]]},{"id":"cb65da22.15b4e8","type":"ui_text_input","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"txt_AlarmPreMax_x30","label":"Alarm PreMax","tooltip":"","group":"c0410b2b.230078","order":54,"width":6,"height":1,"passthru":false,"mode":"number","delay":"300","topic":"topic","x":2140,"y":780,"wires":[["d3ca5f26.f5858"]]},{"id":"bfa99a6b.2ebb48","type":"ui_text","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","group":"c0410b2b.230078","order":1,"width":12,"height":1,"name":"label_x30","label":"Sensor Configuration x30","format":"{{msg.payload}}","layout":"row-spread","x":560,"y":220,"wires":[]},{"id":"4036ea.18599918","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value sensorName","rules":[{"t":"set","p":"name_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2150,"y":180,"wires":[[]]},{"id":"c4ed96f6.43dd68","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value connect type","rules":[{"t":"set","p":"connectType_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2150,"y":900,"wires":[[]]},{"id":"3b8287ff.230878","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value baud rate","rules":[{"t":"set","p":"baudRate_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2140,"y":980,"wires":[[]]},{"id":"fbfcf209.2b3c8","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value data bits","rules":[{"t":"set","p":"dataBits_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2140,"y":1060,"wires":[[]]},{"id":"557def2a.b277c","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value stop bits","rules":[{"t":"set","p":"stopBits_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":1140,"wires":[[]]},{"id":"8e4b4c42.05c11","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value parity","rules":[{"t":"set","p":"parity_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":1220,"wires":[[]]},{"id":"6fb66f69.918d","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value flow Control","rules":[{"t":"set","p":"flowControl_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2150,"y":1300,"wires":[[]]},{"id":"8d374ada.06fad8","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value units","rules":[{"t":"set","p":"units_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2120,"y":340,"wires":[[]]},{"id":"1fe931fb.b0e11e","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value rage min","rules":[{"t":"set","p":"rangeMin_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2140,"y":420,"wires":[[]]},{"id":"c2a17aa1.3bf058","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value range max","rules":[{"t":"set","p":"rangeMax_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2140,"y":500,"wires":[[]]},{"id":"a3ec54fd.a4f608","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value alarm min","rules":[{"t":"set","p":"alarmMin_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2140,"y":580,"wires":[[]]},{"id":"d37bd964.9a1388","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value alarm max","rules":[{"t":"set","p":"alarmMax_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2140,"y":660,"wires":[[]]},{"id":"93d501c6.f1934","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value alarm pre min","rules":[{"t":"set","p":"alarmPreMin_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2150,"y":740,"wires":[[]]},{"id":"d3ca5f26.f5858","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value alarm pre max","rules":[{"t":"set","p":"alarmPreMax_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2150,"y":820,"wires":[[]]},{"id":"544ed029.4f0f1","type":"json","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","property":"payload","action":"str","pretty":true,"x":790,"y":960,"wires":[["9563799d.c5a478"]]},{"id":"487d69a0.aacd18","type":"debug","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":470,"y":1000,"wires":[]},{"id":"13b3be1f.ec5f82","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Get and Join Current Values","func":"var name_x30 = flow.get(\"name_x30\") || \"DEFAULT_VALUE\";\nvar enabled_x30 = flow.get(\"enabled_x30\") || false;\nvar units_x30 = flow.get(\"units_x30\") || \"DEFAULT UNITS\";\nvar rangeMin_x30 = flow.get(\"rangeMin_x30\") || \"0\";\nvar rangeMax_x30 = flow.get(\"rangeMax_x30\") || \"0\";\nvar alarmMin_x30 = flow.get(\"alarmMin_x30\") || \"0\";\nvar alarmMax_x30 = flow.get(\"alarmMax_x30\") || \"0\";\nvar alarmPreMin_x30 = flow.get(\"alarmPreMin_x30\") || \"0\";\nvar alarmPreMax_x30 = flow.get(\"alarmPreMax_x30\") || \"0\";\nvar connectType_x30 = flow.get(\"connectType_x30\") || \"\";\nvar baudRate_x30 = flow.get(\"baudRate_x30\") || \"\";\nvar dataBits_x30 = flow.get(\"dataBits_x30\") || \"\";\nvar stopBits_x30 = flow.get(\"stopBits_x30\") || \"\";\nvar parity_x30 = flow.get(\"parity_x30\") || \"\";\nvar flowControl_x30 = flow.get(\"flowControl_x30\") || \"\";\n\n\n\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_x30,\n    \"enabled\": enabled_x30,    \n    \"units\": units_x30,\n    \"rangeMin\": rangeMin_x30,\n    \"rangeMax\": rangeMax_x30,\n    \"alarmMin\": alarmMin_x30,\n    \"alarmMax\": alarmMax_x30,\n    \"alarmPreMin\": alarmPreMin_x30,\n    \"alarmPreMax\": alarmPreMax_x30,\n    \"connectType\": connectType_x30,\n    \"baudRate\": baudRate_x30,\n    \"dataBits\": dataBits_x30,\n    \"stopBits\": stopBits_x30,\n    \"parity\": parity_x30,\n    \"flowControl\": flowControl_x30\n\n}\n\n\nmsg.filename = \"usr/dados/portaserie/\"+ name_x30 + \".json\";\n\nreturn msg; ","outputs":1,"noerr":0,"initialize":"","finalize":"","x":520,"y":960,"wires":[["544ed029.4f0f1","487d69a0.aacd18"]]},{"id":"9563799d.c5a478","type":"file","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":990,"y":960,"wires":[[]]},{"id":"be46d271.6e66a","type":"ui_switch","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"switch_x30","label":"On / Off","tooltip":"","group":"c0410b2b.230078","order":11,"width":4,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":2110,"y":220,"wires":[["a3a76511.620f18"]]},{"id":"a3a76511.620f18","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"save value enabled","rules":[{"t":"set","p":"enabled_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":260,"wires":[[]]},{"id":"6c54f6e3.fe49b8","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Save Value ConfigChoice_x30","rules":[{"t":"set","p":"configChoice_x30","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":480,"wires":[["b423faf7.ebf9c8"]]},{"id":"b423faf7.ebf9c8","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Get choice to load config file","func":"var configChoice_x30 = flow.get(\"configChoice_x30\");\n\nmsg.filename = \"usr/dados/portaserie/\" + configChoice_x30\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1180,"y":480,"wires":[["3e8597b0.0c53f8"]]},{"id":"e6509e7c.69ac5","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Get file names and update Drop Down","func":"msg.payload[0]=null\nmsg.options = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":930,"y":360,"wires":[["68c7012f.cdedd"]]},{"id":"47778c2a.c20bb4","type":"exec","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","command":"ls /usr/dados/portaserie","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":590,"y":440,"wires":[["6130f980.ce45a8"],[],[]]},{"id":"6130f980.ce45a8","type":"split","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","splt":"\\n","spltType":"str","arraySplt":"10","arraySpltType":"len","stream":true,"addname":"","x":550,"y":360,"wires":[["b779a722.c609b8"]]},{"id":"b779a722.c609b8","type":"join","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":670,"y":360,"wires":[["e6509e7c.69ac5"]]},{"id":"60f4116e.19557","type":"delay","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":350,"y":440,"wires":[["47778c2a.c20bb4"]]},{"id":"89d49ebd.28b1b","type":"inject","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"0.1","topic":"","payload":"","payloadType":"date","x":350,"y":360,"wires":[["47778c2a.c20bb4"]]},{"id":"3e8597b0.0c53f8","type":"file in","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":840,"y":560,"wires":[["6b932a7f.1dd594","f927e29c.f4387"]]},{"id":"f927e29c.f4387","type":"json","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","property":"payload","action":"","pretty":false,"x":1030,"y":560,"wires":[["da3cbc74.74cdb","6ef04153.35bed"]]},{"id":"6ef04153.35bed","type":"split","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"splitConfigFile","splt":"","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1260,"y":560,"wires":[["8eeb0832.ead508","22b92b27.0b1294"]]},{"id":"8eeb0832.ead508","type":"debug","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"parts","targetType":"msg","statusVal":"","statusType":"auto","x":1240,"y":600,"wires":[]},{"id":"da3cbc74.74cdb","type":"debug","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1050,"y":600,"wires":[]},{"id":"6b932a7f.1dd594","type":"debug","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":850,"y":620,"wires":[]},{"id":"22b92b27.0b1294","type":"switch","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Route Values","property":"parts","propertyType":"msg","rules":[{"t":"index","v":"0","vt":"num","v2":"0","v2t":"num"},{"t":"index","v":"1","vt":"num","v2":"1","v2t":"num"},{"t":"index","v":"2","vt":"num","v2":"2","v2t":"num"},{"t":"index","v":"3","vt":"num","v2":"3","v2t":"num"},{"t":"index","v":"4","vt":"num","v2":"4","v2t":"num"},{"t":"index","v":"5","vt":"num","v2":"5","v2t":"num"},{"t":"index","v":"6","vt":"num","v2":"6","v2t":"num"},{"t":"index","v":"7","vt":"num","v2":"7","v2t":"num"},{"t":"index","v":"8","vt":"num","v2":"8","v2t":"num"},{"t":"index","v":"9","vt":"num","v2":"9","v2t":"num"},{"t":"index","v":"10","vt":"num","v2":"10","v2t":"num"},{"t":"index","v":"11","vt":"num","v2":"11","v2t":"num"},{"t":"index","v":"12","vt":"num","v2":"12","v2t":"num"},{"t":"index","v":"13","vt":"num","v2":"13","v2t":"num"},{"t":"index","v":"14","vt":"num","v2":"14","v2t":"num"}],"checkall":"true","repair":true,"outputs":15,"x":1490,"y":560,"wires":[["e6db8e50.8d14"],["be46d271.6e66a"],["bfca1010.58feb"],["78ce6064.4fbce"],["43585233.1b104c"],["6d0bb6ad.ce2688"],["9308837b.23d92"],["158e4fd8.047bf"],["66ec902.ca1f07"],["abb08403.f286d8"],["8778eb15.b8f1b8"],["63f5307b.149cb"],["88d6fed9.2dd8d"],["d9b1bcdb.1f532"],["2678ff9b.90101"]]},{"id":"78ce6064.4fbce","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1820,"y":460,"wires":[["15b5da9a.331b15"]]},{"id":"43585233.1b104c","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1820,"y":500,"wires":[["97104e52.938f7"]]},{"id":"6d0bb6ad.ce2688","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1820,"y":540,"wires":[["60a400b8.a9053"]]},{"id":"9308837b.23d92","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1820,"y":580,"wires":[["d4696447.e63968"]]},{"id":"158e4fd8.047bf","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1820,"y":620,"wires":[["41bb3767.62ca88"]]},{"id":"66ec902.ca1f07","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"StringToNumber","func":"msg.payload = Number(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1820,"y":660,"wires":[["cb65da22.15b4e8"]]},{"id":"15765c0e.182ff4","type":"json","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","property":"payload","action":"str","pretty":true,"x":850,"y":840,"wires":[["ccd363bf.cb2b1"]]},{"id":"ccd363bf.cb2b1","type":"file","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":990,"y":840,"wires":[[]]},{"id":"270b87fe.369dc8","type":"debug","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":470,"y":880,"wires":[]},{"id":"65a0231d.8bc54c","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Get and Join Current Values","func":"var name_x30 = flow.get(\"name_x30\") || \"DEFAULT_VALUE\";\nvar enabled_x30 = flow.get(\"enabled_x30\") || false;\nvar units_x30 = flow.get(\"units_x30\") || \"DEFAULT UNITS\";\nvar rangeMin_x30 = flow.get(\"rangeMin_x30\") || \"0\";\nvar rangeMax_x30 = flow.get(\"rangeMax_x30\") || \"0\";\nvar alarmMin_x30 = flow.get(\"alarmMin_x30\") || \"0\";\nvar alarmMax_x30 = flow.get(\"alarmMax_x30\") || \"0\";\nvar alarmPreMin_x30 = flow.get(\"alarmPreMin_x30\") || \"0\";\nvar alarmPreMax_x30 = flow.get(\"alarmPreMax_x30\") || \"0\";\nvar connectType_x30 = flow.get(\"connectType_x30\") || \"\";\nvar baudRate_x30 = flow.get(\"baudRate_x30\") || \"\";\nvar dataBits_x30 = flow.get(\"dataBits_x30\") || \"\";\nvar stopBits_x30 = flow.get(\"stopBits_x30\") || \"\";\nvar parity_x30 = flow.get(\"parity_x30\") || \"\";\nvar flowControl_x30 = flow.get(\"flowControl_x30\") || \"\";\n\n\n\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_x30,\n    \"enabled\": enabled_x30,    \n    \"units\": units_x30,\n    \"rangeMin\": rangeMin_x30,\n    \"rangeMax\": rangeMax_x30,\n    \"alarmMin\": alarmMin_x30,\n    \"alarmMax\": alarmMax_x30,\n    \"alarmPreMin\": alarmPreMin_x30,\n    \"alarmPreMax\": alarmPreMax_x30,\n    \"connectType\": connectType_x30,\n    \"baudRate\": baudRate_x30,\n    \"dataBits\": dataBits_x30,\n    \"stopBits\": stopBits_x30,\n    \"parity\": parity_x30,\n    \"flowControl\": flowControl_x30\n\n}\n\nmsg.filename = \"usr/dados/config/x30.json\";\n\nreturn msg; ","outputs":1,"noerr":0,"initialize":"","finalize":"","x":520,"y":840,"wires":[["15765c0e.182ff4","270b87fe.369dc8"]]},{"id":"fc00c9b.c752538","type":"ui_button","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"refresh_x30","group":"c0410b2b.230078","order":23,"width":4,"height":1,"passthru":true,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-refresh","payload":"true","payloadType":"bool","topic":"topic","x":410,"y":600,"wires":[["63c8fb76.b17e94","aa37670b.7bde18"]]},{"id":"84750ddc.a5b9c","type":"ui_button","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"clean_x30","group":"c0410b2b.230078","order":17,"width":4,"height":1,"passthru":false,"label":"Clean","tooltip":"","color":"","bgcolor":"","icon":"fa-eraser","payload":"","payloadType":"date","topic":"topic","x":1450,"y":800,"wires":[["60f4116e.19557","8f82d408.df9e88"]]},{"id":"8f82d408.df9e88","type":"change","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Set to Null","rules":[{"t":"set","p":"payload","pt":"msg","to":"null","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1710,"y":800,"wires":[["e6db8e50.8d14","bfca1010.58feb","15b5da9a.331b15","abb08403.f286d8","97104e52.938f7","60a400b8.a9053","d4696447.e63968","d9b1bcdb.1f532","8778eb15.b8f1b8","63f5307b.149cb","88d6fed9.2dd8d","2678ff9b.90101","41bb3767.62ca88","cb65da22.15b4e8","2a4d4244.4aef4e"]]},{"id":"2a4d4244.4aef4e","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"to off","func":"msg.payload=false; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1810,"y":220,"wires":[["be46d271.6e66a"]]},{"id":"62a70b8f.6ef744","type":"exec","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":790,"y":1080,"wires":[[],[],[]]},{"id":"94aeb5b8.f50178","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"Delete selected choice","func":"var configChoice_x30 = flow.get(\"configChoice_x30\");\n\n\nmsg.payload = \"rm /usr/dados/portaserie/\" + configChoice_x30\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":460,"y":1080,"wires":[["62a70b8f.6ef744","4c6c8175.7e1c4"]]},{"id":"4c6c8175.7e1c4","type":"debug","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":430,"y":1120,"wires":[]},{"id":"63c8fb76.b17e94","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","func":"'função para colocar a opção selecionada como a x30.json '\nmsg.payload=\"x30.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":580,"y":580,"wires":[["68c7012f.cdedd"]]},{"id":"aa37670b.7bde18","type":"function","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","func":"msg.filename = \"usr/dados/config/x30.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":580,"y":620,"wires":[["3e8597b0.0c53f8"]]},{"id":"60991753.6d46d8","type":"debug","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1140,"y":420,"wires":[]},{"id":"70d8d775.7cabe8","type":"delay","z":"8cf70e9a.0000a","g":"fcc1641d.4d81f8","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":430,"y":720,"wires":[["fc00c9b.c752538"]]},{"id":"f868b9d0.5a7ad8","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","func":"'função para colocar a opção selecionada como a x31.json '\nmsg.payload=\"x31.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":560,"y":1900,"wires":[["fc080c52.e00fb"]]},{"id":"f6ad3efc.437b3","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","func":"msg.filename = \"usr/dados/config/x31.json\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":560,"y":1940,"wires":[["71df1404.933fbc"]]},{"id":"1b4209fa.fe3576","type":"change","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Set to Null","rules":[{"t":"set","p":"payload","pt":"msg","to":"null","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":2260,"wires":[["511da1fb.b6de9","5d212be8.b7cce4","74475d5c.fe48e4","2fb3700e.7a70b","a8a25727.fba9b8","69304dab.397fc4","faaada76.769578","1fbdd68b.ede3c9","4593f3f8.f5291c","14c31c9f.597553","42e51e98.fe58b","b8c76a.e0c1a898","5c17b43d.38820c","d15af685.aef658","c3259f3f.525eb"]]},{"id":"e3d6c3cc.4fbad","type":"delay","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":370,"y":2000,"wires":[["42af0b71.5b8384"]]},{"id":"f32b0c17.8c499","type":"delay","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","pauseType":"delay","timeout":"0.3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":270,"y":1820,"wires":[["f0520451.0ae548"]]},{"id":"7ebbf2dd.0dae8c","type":"file","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":910,"y":2200,"wires":[[]]},{"id":"a56c4e52.54804","type":"json","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","property":"payload","action":"str","pretty":true,"x":770,"y":2200,"wires":[["7ebbf2dd.0dae8c"]]},{"id":"e5e5c87c.7e4c98","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Get and Join Current Values","func":"var name_x31 = flow.get(\"name_x31\") || \"DEFAULT_VALUE\";\nvar enabled_x31 = flow.get(\"enabled_x31\") || false;\nvar units_x31 = flow.get(\"units_x31\") || \"DEFAULT UNITS\";\nvar rangeMin_x31 = flow.get(\"rangeMin_x31\") || \"0\";\nvar rangeMax_x31 = flow.get(\"rangeMax_x31\") || \"0\";\nvar alarmMin_x31 = flow.get(\"alarmMin_x31\") || \"0\";\nvar alarmMax_x31 = flow.get(\"alarmMax_x31\") || \"0\";\nvar alarmPreMin_x31 = flow.get(\"alarmPreMin_x31\") || \"0\";\nvar alarmPreMax_x31 = flow.get(\"alarmPreMax_x31\") || \"0\";\nvar connectType_x31 = flow.get(\"connectType_x31\") || \"\";\nvar baudRate_x31 = flow.get(\"baudRate_x31\") || \"\";\nvar dataBits_x31 = flow.get(\"dataBits_x31\") || \"\";\nvar stopBits_x31 = flow.get(\"stopBits_x31\") || \"\";\nvar parity_x31 = flow.get(\"parity_x31\") || \"\";\nvar flowControl_x31 = flow.get(\"flowControl_x31\") || \"\";\n\n\n\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_x31,\n    \"enabled\": enabled_x31,    \n    \"units\": units_x31,\n    \"rangeMin\": rangeMin_x31,\n    \"rangeMax\": rangeMax_x31,\n    \"alarmMin\": alarmMin_x31,\n    \"alarmMax\": alarmMax_x31,\n    \"alarmPreMin\": alarmPreMin_x31,\n    \"alarmPreMax\": alarmPreMax_x31,\n    \"connectType\": connectType_x31,\n    \"baudRate\": baudRate_x31,\n    \"dataBits\": dataBits_x31,\n    \"stopBits\": stopBits_x31,\n    \"parity\": parity_x31,\n    \"flowControl\": flowControl_x31\n\n}\n\nmsg.filename = \"usr/dados/config/x31.json\";\n\nreturn msg; ","outputs":1,"noerr":0,"initialize":"","finalize":"","x":440,"y":2200,"wires":[["a56c4e52.54804","5689a42c.a97b4c"]]},{"id":"5689a42c.a97b4c","type":"debug","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":390,"y":2240,"wires":[]},{"id":"d41c66cf.0c8a08","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Get and Join Current Values","func":"var name_x31 = flow.get(\"name_x31\") || \"DEFAULT_VALUE\";\nvar enabled_x31 = flow.get(\"enabled_x31\") || false;\nvar units_x31 = flow.get(\"units_x31\") || \"DEFAULT UNITS\";\nvar rangeMin_x31 = flow.get(\"rangeMin_x31\") || \"0\";\nvar rangeMax_x31 = flow.get(\"rangeMax_x31\") || \"0\";\nvar alarmMin_x31 = flow.get(\"alarmMin_x31\") || \"0\";\nvar alarmMax_x31 = flow.get(\"alarmMax_x31\") || \"0\";\nvar alarmPreMin_x31 = flow.get(\"alarmPreMin_x31\") || \"0\";\nvar alarmPreMax_x31 = flow.get(\"alarmPreMax_x31\") || \"0\";\nvar connectType_x31 = flow.get(\"connectType_x31\") || \"\";\nvar baudRate_x31 = flow.get(\"baudRate_x31\") || \"\";\nvar dataBits_x31 = flow.get(\"dataBits_x31\") || \"\";\nvar stopBits_x31 = flow.get(\"stopBits_x31\") || \"\";\nvar parity_x31 = flow.get(\"parity_x31\") || \"\";\nvar flowControl_x31 = flow.get(\"flowControl_x31\") || \"\";\n\n\n\n\nmsg.topic = \"sensorconfig\";\nmsg.payload = {\n    \"name\": name_x31,\n    \"enabled\": enabled_x31,    \n    \"units\": units_x31,\n    \"rangeMin\": rangeMin_x31,\n    \"rangeMax\": rangeMax_x31,\n    \"alarmMin\": alarmMin_x31,\n    \"alarmMax\": alarmMax_x31,\n    \"alarmPreMin\": alarmPreMin_x31,\n    \"alarmPreMax\": alarmPreMax_x31,\n    \"connectType\": connectType_x31,\n    \"baudRate\": baudRate_x31,\n    \"dataBits\": dataBits_x31,\n    \"stopBits\": stopBits_x31,\n    \"parity\": parity_x31,\n    \"flowControl\": flowControl_x31\n\n}\n\nmsg.filename = \"usr/dados/portaserie/\"+ name_x31 + \".json\";\n\nreturn msg; ","outputs":1,"noerr":0,"initialize":"","finalize":"","x":440,"y":2340,"wires":[["f2810404.8b4698","24a3f94d.4851a6"]]},{"id":"24a3f94d.4851a6","type":"debug","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":390,"y":2380,"wires":[]},{"id":"f2810404.8b4698","type":"json","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","property":"payload","action":"str","pretty":true,"x":710,"y":2340,"wires":[["9b60769a.ea6178"]]},{"id":"9b60769a.ea6178","type":"file","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":910,"y":2340,"wires":[[]]},{"id":"a3c5d994.a579d8","type":"exec","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":750,"y":2460,"wires":[[],[],[]]},{"id":"16cfaa5d.bd62a6","type":"function","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"Delete selected choice","func":"var configChoice_x31 = flow.get(\"configChoice_x31\");\n\n\nmsg.payload = \"rm /usr/dados/portaserie/\" + configChoice_x31\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":420,"y":2460,"wires":[["a3c5d994.a579d8","c9ef08fa.005458"]]},{"id":"c9ef08fa.005458","type":"debug","z":"8cf70e9a.0000a","g":"2f7be691.75aaea","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":390,"y":2500,"wires":[]},{"id":"438682fa.d88efc","type":"ui_toast","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U0 Alarm","name":"Alarm Max","x":1810,"y":620,"wires":[]},{"id":"1cd1ed13.c1f4f3","type":"switch","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":640,"wires":[["45e95a57.d66864","1c06711c.229e4f","2ee1bdf1.838462","a4443455.7ccb38"],["e62d99d3.0de628","e21dc6a5.1f5298"]]},{"id":"fe778542.431278","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\n\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1050,"y":640,"wires":[["1cd1ed13.c1f4f3"]]},{"id":"9010c0e5.dda2f","type":"ui_template","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","group":"49de8910.30c838","name":"","order":55,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1660,"y":620,"wires":[["438682fa.d88efc"]]},{"id":"45e95a57.d66864","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_max_translate","func":"\nmsg.payload = \"The value read exceeds the maximum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":620,"wires":[["9010c0e5.dda2f"]]},{"id":"c6b08fe8.20c05","type":"ui_toast","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U0 Alarm","name":"Alarm Min","x":1800,"y":800,"wires":[]},{"id":"20a0e7db.2d1b68","type":"switch","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":820,"wires":[["402f3775.9416c8","23ebe85.9d6f718","a3cfc20f.d784e","9e0a93f9.051b2"],["34a12f43.0169f","fb00bb00.929568"]]},{"id":"9ac7aefa.14a3d","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1050,"y":820,"wires":[["20a0e7db.2d1b68"]]},{"id":"6082c7b6.6b2438","type":"ui_template","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","group":"49de8910.30c838","name":"","order":65,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1660,"y":800,"wires":[["c6b08fe8.20c05"]]},{"id":"402f3775.9416c8","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_min_translate","func":"msg.payload = \"The value read is lower than the minimum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":800,"wires":[["6082c7b6.6b2438"]]},{"id":"ac08509e.87fa5","type":"ui_toast","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U0 Warning","name":"PreAlarm Max","x":1840,"y":1000,"wires":[]},{"id":"8f4f20d1.0d1a2","type":"switch","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":1020,"wires":[["af049bbd.2c7de8","607472fd.38f07c","cf82bcd.448ab4","d8046b00.a622b8"],["a1a6a54f.284e88","75eba33.ced3f5c"]]},{"id":"e88a0397.b23ab","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmPreMax & msg.payload.value < msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1060,"y":1020,"wires":[["8f4f20d1.0d1a2"]]},{"id":"99e361fc.b2ff6","type":"ui_template","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","group":"49de8910.30c838","name":"","order":60,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1680,"y":1000,"wires":[["ac08509e.87fa5"]]},{"id":"af049bbd.2c7de8","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_max_translate","func":"msg.payload = \"The value read is high!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1490,"y":1000,"wires":[["99e361fc.b2ff6"]]},{"id":"53da7021.229a8","type":"ui_toast","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U0 Warning","name":"PreAlarm Min","x":1840,"y":1200,"wires":[]},{"id":"cb94efba.5c613","type":"switch","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":1220,"wires":[["2fb18a7c.9bb2e6","f3720722.7e82b8","713a1909.52f1d8","2df2e172.11b7ae"],["5f555488.87a2bc","9233c49b.40c038"]]},{"id":"e9a2ace3.ef5c2","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmPreMin & msg.payload.value > msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1060,"y":1220,"wires":[["cb94efba.5c613"]]},{"id":"fbf69db3.85a8f","type":"ui_template","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","group":"49de8910.30c838","name":"","order":57,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1680,"y":1200,"wires":[["53da7021.229a8"]]},{"id":"2fb18a7c.9bb2e6","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_min_translate","func":"msg.payload = \"The value read is low!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1490,"y":1200,"wires":[["fbf69db3.85a8f"]]},{"id":"1c06711c.229e4f","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":660,"wires":[["f891acd7.368fb"]]},{"id":"23ebe85.9d6f718","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":840,"wires":[["f891acd7.368fb"]]},{"id":"607472fd.38f07c","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\":\"Pre Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":1120,"wires":[["f891acd7.368fb"]]},{"id":"f3720722.7e82b8","type":"function","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\": \"Pre Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":1320,"wires":[["f891acd7.368fb"]]},{"id":"f891acd7.368fb","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"ui_control","rules":[{"t":"set","p":"ui_control","pt":"msg","to":"{\"tabulator\":{\"columns\":[{\"title\":\"Time\",\"field\":\"Time\",\"align\":\"center\"},{\"title\":\"Sensor\",\"field\":\"Sensor\",\"align\":\"center\"},{\"formatterParams\":{\"target\":\"_blank\"},\"title\":\"Type\",\"field\":\"Type\",\"align\":\"center\",\"color\":\"ff0000\",\"formatter\":\"function(cell, formatterParams, onRendered) {var status = cell.getValue(); if(status == 'Alarm') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else if(status == 'Minimum') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else{cell.getElement().style.backgroundColor=\\\"#cc7a00\\\";} return status;}\"},{\"title\":\"Description\",\"field\":\"Description\",\"align\":\"center\"},{\"title\":\"Value Read\",\"field\":\"Value Read\",\"align\":\"center\"}],\"layout\":\"fitColumns\",\"movableColumns\":true,\"groupBy\":\"\"}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":2040,"y":960,"wires":[["a2e5fcc4.1d547"]]},{"id":"965a9eef.ba5e1","type":"ui_toast","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I0 Alarm","name":"Alarm Max","x":4130,"y":620,"wires":[]},{"id":"e12925d5.e02e38","type":"switch","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3590,"y":640,"wires":[["6a1a5aed.c10624","87d7f07.715091","8363f228.fb908"],["e2ac5785.c106f8"]]},{"id":"e1eefd2d.590c2","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\n\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3410,"y":640,"wires":[["e12925d5.e02e38"]]},{"id":"fd6139fb.506178","type":"ui_template","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","group":"49de8910.30c838","name":"","order":59,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":3980,"y":620,"wires":[["965a9eef.ba5e1"]]},{"id":"6a1a5aed.c10624","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_max_translate","func":"\nmsg.payload = \"The value read exceeds the maximum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3800,"y":620,"wires":[["fd6139fb.506178"]]},{"id":"74bb1b94.a1ec84","type":"ui_toast","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I0 Alarm","name":"Alarm Min","x":4120,"y":820,"wires":[]},{"id":"78fad8e1.966318","type":"switch","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3590,"y":840,"wires":[["39a74091.6dc47","e425ab15.a07c18","3d4060b9.e2ab3"],["3c3289c8.816f76"]]},{"id":"c8c43189.43255","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3410,"y":840,"wires":[["78fad8e1.966318"]]},{"id":"b930fc12.6369a","type":"ui_template","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","group":"49de8910.30c838","name":"","order":61,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":3980,"y":820,"wires":[["74bb1b94.a1ec84"]]},{"id":"39a74091.6dc47","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_min_translate","func":"msg.payload = \"The value read is lower than the minimum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3800,"y":820,"wires":[["b930fc12.6369a"]]},{"id":"26f7f9fc.ec83e6","type":"ui_toast","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I0 Warning","name":"PreAlarm Max","x":4160,"y":1000,"wires":[]},{"id":"b63eb607.e882d8","type":"switch","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3590,"y":1020,"wires":[["93152a6c.1c2e78","7dd06123.93b5e","6caae10.69c4d2"],["4e0e54ea.9ece5c"]]},{"id":"e433a0ea.111b1","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmPreMax & msg.payload.value < msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3420,"y":1020,"wires":[["b63eb607.e882d8"]]},{"id":"42f17822.b59e68","type":"ui_template","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","group":"49de8910.30c838","name":"","order":62,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":4000,"y":1000,"wires":[["26f7f9fc.ec83e6"]]},{"id":"93152a6c.1c2e78","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_max_translate","func":"msg.payload = \"The value read is high!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3810,"y":1000,"wires":[["42f17822.b59e68"]]},{"id":"124896c8.faece9","type":"ui_toast","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I0 Warning","name":"PreAlarm Min","x":4160,"y":1200,"wires":[]},{"id":"4a06e930.516aa8","type":"switch","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3590,"y":1220,"wires":[["48c52b2a.f72434","664e6e00.1187e4","6e61984d.dc2c18"],["b9872534.186c48"]]},{"id":"61601872.fb3728","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmPreMin & msg.payload.value > msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3420,"y":1220,"wires":[["4a06e930.516aa8"]]},{"id":"bcbaa92f.fbe108","type":"ui_template","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","group":"49de8910.30c838","name":"","order":63,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":4000,"y":1200,"wires":[["124896c8.faece9"]]},{"id":"48c52b2a.f72434","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_min_translate","func":"msg.payload = \"The value read is low!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3810,"y":1200,"wires":[["bcbaa92f.fbe108"]]},{"id":"87d7f07.715091","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3770,"y":660,"wires":[["1b4aa602.8e036a"]]},{"id":"e425ab15.a07c18","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3770,"y":860,"wires":[["1b4aa602.8e036a"]]},{"id":"7dd06123.93b5e","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\":\"Pre Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3770,"y":1040,"wires":[["1b4aa602.8e036a"]]},{"id":"664e6e00.1187e4","type":"function","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\": \"Pre Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3770,"y":1240,"wires":[["1b4aa602.8e036a"]]},{"id":"1b4aa602.8e036a","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"ui_control","rules":[{"t":"set","p":"ui_control","pt":"msg","to":"{\"tabulator\":{\"columns\":[{\"title\":\"Time\",\"field\":\"Time\",\"align\":\"center\"},{\"title\":\"Sensor\",\"field\":\"Sensor\",\"align\":\"center\"},{\"formatterParams\":{\"target\":\"_blank\"},\"title\":\"Type\",\"field\":\"Type\",\"align\":\"center\",\"color\":\"ff0000\",\"formatter\":\"function(cell, formatterParams, onRendered) {var status = cell.getValue(); if(status == 'Alarm') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else if(status == 'Minimum') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else{cell.getElement().style.backgroundColor=\\\"#cc7a00\\\";} return status;}\"},{\"title\":\"Description\",\"field\":\"Description\",\"align\":\"center\"},{\"title\":\"Value Read\",\"field\":\"Value Read\",\"align\":\"center\"}],\"layout\":\"fitColumns\",\"movableColumns\":true,\"groupBy\":\"\"}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":4400,"y":960,"wires":[["a2e5fcc4.1d547"]]},{"id":"7bc62ced.f4bed4","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U1 Alarm","name":"Alarm Max","x":1770,"y":1920,"wires":[]},{"id":"e53785b6.d03b48","type":"switch","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":1940,"wires":[["df3eaebc.e917c","dd050f15.bdb82","ba94731b.f020d"],["f6096178.d1966"]]},{"id":"7086abdd.7e14d4","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\n\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1050,"y":1940,"wires":[["e53785b6.d03b48"]]},{"id":"f1dc6ec8.e8385","type":"ui_template","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","group":"49de8910.30c838","name":"","order":53,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1620,"y":1920,"wires":[["7bc62ced.f4bed4"]]},{"id":"df3eaebc.e917c","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_max_translate","func":"\nmsg.payload = \"The value read exceeds the maximum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1440,"y":1920,"wires":[["f1dc6ec8.e8385"]]},{"id":"ffdf09bb.0371a8","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U1 Alarm","name":"Alarm Min","x":1760,"y":2120,"wires":[]},{"id":"d3854556.d0d938","type":"switch","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":2140,"wires":[["9fc6ec4e.e0566","545ec733.879c88","c148535e.2f667"],["8b22d8c3.a04558"]]},{"id":"3ef0860.66b647a","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1050,"y":2140,"wires":[["d3854556.d0d938"]]},{"id":"bb69b6d6.4bbe18","type":"ui_template","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","group":"49de8910.30c838","name":"","order":54,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1620,"y":2120,"wires":[["ffdf09bb.0371a8"]]},{"id":"9fc6ec4e.e0566","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_min_translate","func":"msg.payload = \"The value read is lower than the minimum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1440,"y":2120,"wires":[["bb69b6d6.4bbe18"]]},{"id":"3db3b952.878fe6","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U1 Warning","name":"PreAlarm Max","x":1800,"y":2300,"wires":[]},{"id":"d75a6ca4.1f93","type":"switch","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":2320,"wires":[["ce95c7d7.f44a88","dc5550aa.41631","e492eb04.125ad8"],["e25f2bb.9a2cdd8"]]},{"id":"a822d685.eec988","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmPreMax & msg.payload.value < msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1060,"y":2320,"wires":[["d75a6ca4.1f93"]]},{"id":"8d5673e4.d0963","type":"ui_template","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","group":"49de8910.30c838","name":"","order":58,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1640,"y":2300,"wires":[["3db3b952.878fe6"]]},{"id":"ce95c7d7.f44a88","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_max_translate","func":"msg.payload = \"The value read is high!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":2300,"wires":[["8d5673e4.d0963"]]},{"id":"f027d8b1.ec95d8","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"U1 Warning","name":"PreAlarm Min","x":1800,"y":2500,"wires":[]},{"id":"febd388e.b04b68","type":"switch","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":2520,"wires":[["c7d25e66.18205","defd72ae.0e449","6b4c5ded.4be6b4"],["383daf9d.d3e1c"]]},{"id":"d0fc89bc.fbe158","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmPreMin & msg.payload.value > msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1060,"y":2520,"wires":[["febd388e.b04b68"]]},{"id":"25c15417.dc230c","type":"ui_template","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","group":"49de8910.30c838","name":"","order":64,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":1640,"y":2500,"wires":[["f027d8b1.ec95d8"]]},{"id":"c7d25e66.18205","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_min_translate","func":"msg.payload = \"The value read is low!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":2500,"wires":[["25c15417.dc230c"]]},{"id":"dd050f15.bdb82","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1410,"y":1960,"wires":[["88b62914.b35eb8"]]},{"id":"545ec733.879c88","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1410,"y":2160,"wires":[["88b62914.b35eb8"]]},{"id":"dc5550aa.41631","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\":\"Pre Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1410,"y":2340,"wires":[["88b62914.b35eb8"]]},{"id":"defd72ae.0e449","type":"function","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\": \"Pre Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1410,"y":2540,"wires":[["88b62914.b35eb8"]]},{"id":"88b62914.b35eb8","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"ui_control","rules":[{"t":"set","p":"ui_control","pt":"msg","to":"{\"tabulator\":{\"columns\":[{\"title\":\"Time\",\"field\":\"Time\",\"align\":\"center\"},{\"title\":\"Sensor\",\"field\":\"Sensor\",\"align\":\"center\"},{\"formatterParams\":{\"target\":\"_blank\"},\"title\":\"Type\",\"field\":\"Type\",\"align\":\"center\",\"color\":\"ff0000\",\"formatter\":\"function(cell, formatterParams, onRendered) {var status = cell.getValue(); if(status == 'Alarm') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else if(status == 'Minimum') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else{cell.getElement().style.backgroundColor=\\\"#cc7a00\\\";} return status;}\"},{\"title\":\"Description\",\"field\":\"Description\",\"align\":\"center\"},{\"title\":\"Value Read\",\"field\":\"Value Read\",\"align\":\"center\"}],\"layout\":\"fitColumns\",\"movableColumns\":true,\"groupBy\":\"\"}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":2040,"y":2260,"wires":[["a2e5fcc4.1d547"]]},{"id":"2ee1bdf1.838462","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_max u0 (TRUE)","rules":[{"t":"set","p":"alarm_max_u0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1480,"y":700,"wires":[[]]},{"id":"e62d99d3.0de628","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_max  u0 (FALSE)","rules":[{"t":"set","p":"alarm_max_u0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":740,"wires":[[]]},{"id":"34a12f43.0169f","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_min u0 (FALSE)","rules":[{"t":"set","p":"alarm_min_u0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1480,"y":920,"wires":[[]]},{"id":"a3cfc20f.d784e","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"alarm_min u0 (TRUE)","rules":[{"t":"set","p":"alarm_min_u0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1480,"y":880,"wires":[[]]},{"id":"a1a6a54f.284e88","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_max u0 (FALSE)","rules":[{"t":"set","p":"prealarm_max_u0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1500,"y":1080,"wires":[[]]},{"id":"cf82bcd.448ab4","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_max u0 (TRUE)","rules":[{"t":"set","p":"prealarm_max_u0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":1040,"wires":[[]]},{"id":"5f555488.87a2bc","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_min u0 (FALSE)","rules":[{"t":"set","p":"prealarm_min_u0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":1280,"wires":[[]]},{"id":"713a1909.52f1d8","type":"change","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"prealarm_min u0 (TRUE)","rules":[{"t":"set","p":"prealarm_min_u0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":1240,"wires":[[]]},{"id":"33a19094.d21e","type":"function","z":"ce8e632f.2c0ec","name":"Alarm","func":"var alarm_max_u0 = flow.get(\"alarm_max_u0\");\nvar alarm_min_u0 = flow.get(\"alarm_min_u0\");\n\nvar alarm_max_u1 = flow.get(\"alarm_max_u1\");\nvar alarm_min_u1 = flow.get(\"alarm_min_u1\");\n\nvar alarm_max_i0 = flow.get(\"alarm_max_i0\");\nvar alarm_min_i0 = flow.get(\"alarm_min_i0\");\n\nvar alarm_max_i1 = flow.get(\"alarm_max_i1\");\nvar alarm_min_i1 = flow.get(\"alarm_min_i1\");\n\nif (alarm_max_u0 || alarm_min_u0 || alarm_max_u1 || alarm_min_u1 || alarm_max_i0 || alarm_min_i0 || alarm_max_i1 || alarm_min_i1)\n{\n    msg.payload = 1\n}\nelse\n{\n    msg.payload = 0\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":250,"y":3160,"wires":[["3f20d470.8dcd5c","3afd3d28.4f0942","53f88131.774e9"]]},{"id":"80ee8c30.cc57d","type":"inject","z":"ce8e632f.2c0ec","name":"","props":[{"p":"payload"}],"repeat":"0.5","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"","payloadType":"str","x":110,"y":3160,"wires":[["33a19094.d21e"]]},{"id":"3afd3d28.4f0942","type":"mraa-gpio-dout","z":"ce8e632f.2c0ec","name":"BUZINA D8","d13suffix":" (Green LED)","pin":"8","set":true,"level":"0","x":730,"y":3160,"wires":[]},{"id":"d0f573cd.36ac9","type":"mraa-gpio-dout","z":"ce8e632f.2c0ec","name":"LED D7","d13suffix":" (Green LED)","pin":"7","set":true,"level":"0","x":720,"y":3260,"wires":[]},{"id":"53f88131.774e9","type":"function","z":"ce8e632f.2c0ec","name":"warning","func":"var prealarm_max_u0 = flow.get(\"prealarm_max_u0\");\nvar prealarm_min_u0 = flow.get(\"prealarm_min_u0\");\n\nvar prealarm_max_u1 = flow.get(\"prealarm_max_u1\");\nvar prealarm_min_u1 = flow.get(\"prealarm_min_u1\");\n\nvar prealarm_max_i0 = flow.get(\"prealarm_max_i0\");\nvar prealarm_min_i0 = flow.get(\"prealarm_min_i0\");\n\nvar prealarm_max_i1 = flow.get(\"prealarm_max_i1\");\nvar prealarm_min_i1 = flow.get(\"prealarm_min_i1\");\n\n\nvar alarm_max_u0 = flow.get(\"alarm_max_u0\");\nvar alarm_min_u0 = flow.get(\"alarm_min_u0\");\n\nvar alarm_max_u1 = flow.get(\"alarm_max_u1\");\nvar alarm_min_u1 = flow.get(\"alarm_min_u1\");\n\nvar alarm_max_i0 = flow.get(\"alarm_max_i0\");\nvar alarm_min_i0 = flow.get(\"alarm_min_i0\");\n\nvar alarm_max_i1 = flow.get(\"alarm_max_i1\");\nvar alarm_min_i1 = flow.get(\"alarm_min_i1\");\n\n\nif (prealarm_max_u0 || prealarm_min_u0 || prealarm_max_u1 || prealarm_min_u1 || prealarm_max_i0 || prealarm_min_i0 || prealarm_max_i1 || prealarm_min_i1 || alarm_max_u0 || alarm_min_u0 || alarm_max_u1 || alarm_min_u1 || alarm_max_i0 || alarm_min_i0 || alarm_max_i1 || alarm_min_i1)\n{\n    msg.payload = 1\n}\nelse\n{\n    msg.payload = 0\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":260,"y":3260,"wires":[["8099471b.d83708","d0f573cd.36ac9"]]},{"id":"383daf9d.d3e1c","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_min u1 (FALSE)","rules":[{"t":"set","p":"prealarm_min_u1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1450,"y":2620,"wires":[[]]},{"id":"6b4c5ded.4be6b4","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_min u1 (TRUE)","rules":[{"t":"set","p":"prealarm_min_u1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1450,"y":2580,"wires":[[]]},{"id":"e25f2bb.9a2cdd8","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_max u1 (FALSE)","rules":[{"t":"set","p":"prealarm_max_u1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2420,"wires":[[]]},{"id":"e492eb04.125ad8","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"prealarm_max u1 (TRUE)","rules":[{"t":"set","p":"prealarm_max_u1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1450,"y":2380,"wires":[[]]},{"id":"8b22d8c3.a04558","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_min u1 (FALSE)","rules":[{"t":"set","p":"alarm_min_u1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":2240,"wires":[[]]},{"id":"c148535e.2f667","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_min u1 (TRUE)","rules":[{"t":"set","p":"alarm_min_u1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":2200,"wires":[[]]},{"id":"f6096178.d1966","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_max  u1 (FALSE)","rules":[{"t":"set","p":"alarm_max_u1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1450,"y":2040,"wires":[[]]},{"id":"ba94731b.f020d","type":"change","z":"ce8e632f.2c0ec","g":"b6816ff4.82367","name":"alarm_max u1 (TRUE)","rules":[{"t":"set","p":"alarm_max_u1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":2000,"wires":[[]]},{"id":"3f20d470.8dcd5c","type":"debug","z":"ce8e632f.2c0ec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":470,"y":3100,"wires":[]},{"id":"8099471b.d83708","type":"debug","z":"ce8e632f.2c0ec","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":530,"y":3320,"wires":[]},{"id":"a4443455.7ccb38","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1210,"y":600,"wires":[]},{"id":"e21dc6a5.1f5298","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1210,"y":680,"wires":[]},{"id":"fb00bb00.929568","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1210,"y":860,"wires":[]},{"id":"9e0a93f9.051b2","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1210,"y":780,"wires":[]},{"id":"d8046b00.a622b8","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1210,"y":980,"wires":[]},{"id":"75eba33.ced3f5c","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1210,"y":1060,"wires":[]},{"id":"9233c49b.40c038","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1230,"y":1260,"wires":[]},{"id":"2df2e172.11b7ae","type":"debug","z":"ce8e632f.2c0ec","g":"5391fe28.bbe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1230,"y":1180,"wires":[]},{"id":"8363f228.fb908","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_max i0 (TRUE)","rules":[{"t":"set","p":"alarm_max_i0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3800,"y":700,"wires":[[]]},{"id":"e2ac5785.c106f8","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_max  i0 (FALSE)","rules":[{"t":"set","p":"alarm_max_i0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3800,"y":740,"wires":[[]]},{"id":"3d4060b9.e2ab3","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_min i0 (TRUE)","rules":[{"t":"set","p":"alarm_min_i0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3800,"y":900,"wires":[[]]},{"id":"3c3289c8.816f76","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"alarm_min i0 (FALSE)","rules":[{"t":"set","p":"alarm_min_i0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3800,"y":940,"wires":[[]]},{"id":"6caae10.69c4d2","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_max i0 (TRUE)","rules":[{"t":"set","p":"prealarm_max_i0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3810,"y":1080,"wires":[[]]},{"id":"4e0e54ea.9ece5c","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_max i0 (FALSE)","rules":[{"t":"set","p":"prealarm_max_i0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3810,"y":1120,"wires":[[]]},{"id":"6e61984d.dc2c18","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_min i0 (TRUE)","rules":[{"t":"set","p":"prealarm_min_i0","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3810,"y":1280,"wires":[[]]},{"id":"b9872534.186c48","type":"change","z":"ce8e632f.2c0ec","g":"ebd5f28b.d5745","name":"prealarm_min i0 (FALSE)","rules":[{"t":"set","p":"prealarm_min_i0","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3810,"y":1320,"wires":[[]]},{"id":"1a5ac6fc.e22a39","type":"debug","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3510,"y":2080,"wires":[]},{"id":"e5a82c37.b53c2","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_min i1 (TRUE)","rules":[{"t":"set","p":"alarm_min_i1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3760,"y":2200,"wires":[[]]},{"id":"57414e9f.17367","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_max  i1 (FALSE)","rules":[{"t":"set","p":"alarm_max_i1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3760,"y":2040,"wires":[[]]},{"id":"a9246fa0.c8a81","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_max i1 (TRUE)","rules":[{"t":"set","p":"alarm_max_i1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3760,"y":2000,"wires":[[]]},{"id":"e7ed0eaa.207d8","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_min i1 (FALSE)","rules":[{"t":"set","p":"alarm_min_i1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3760,"y":2240,"wires":[[]]},{"id":"44e0e48e.06ad2c","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_max i1 (TRUE)","rules":[{"t":"set","p":"prealarm_max_i1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3770,"y":2380,"wires":[[]]},{"id":"596f94e.30eef6c","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_max i1 (FALSE)","rules":[{"t":"set","p":"prealarm_max_i1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3770,"y":2420,"wires":[[]]},{"id":"d376f924.2e11b8","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_min i1 (TRUE)","rules":[{"t":"set","p":"prealarm_min_i1","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3770,"y":2580,"wires":[[]]},{"id":"3860f9dd.c8c4e6","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_min i1 (FALSE)","rules":[{"t":"set","p":"prealarm_min_i1","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3770,"y":2620,"wires":[[]]},{"id":"884ae408.9aef58","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I1 Alarm","name":"Alarm Max","x":4090,"y":1920,"wires":[]},{"id":"6b3d6479.1cedec","type":"switch","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3550,"y":1940,"wires":[["a9246fa0.c8a81","c90132dc.d749c","4d849d2d.ea0de4","30d55a64.e99ee6"],["57414e9f.17367","1a5ac6fc.e22a39"]]},{"id":"3b3de1b1.58e2de","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\n\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3370,"y":1940,"wires":[["6b3d6479.1cedec"]]},{"id":"9c6ca599.3ba408","type":"ui_template","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","group":"49de8910.30c838","name":"","order":51,"width":25,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":3940,"y":1920,"wires":[["884ae408.9aef58"]]},{"id":"c90132dc.d749c","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_max_translate","func":"\nmsg.payload = \"The value read exceeds the maximum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3760,"y":1920,"wires":[["9c6ca599.3ba408"]]},{"id":"458d08a8.7bdc48","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","position":"top right","displayTime":"5","highlight":"Red","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I1 Alarm","name":"Alarm Min","x":4080,"y":2120,"wires":[]},{"id":"f99d4979.d50848","type":"switch","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3550,"y":2140,"wires":[["e5a82c37.b53c2","b307c212.ed2d6","5c5a0a99.5b1544","4842b738.2d7878"],["e7ed0eaa.207d8","de44a159.0df36"]]},{"id":"e104eaba.48e5b8","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3370,"y":2140,"wires":[["f99d4979.d50848"]]},{"id":"e683713.008809","type":"ui_template","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","group":"49de8910.30c838","name":"","order":52,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":3940,"y":2120,"wires":[["458d08a8.7bdc48"]]},{"id":"b307c212.ed2d6","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarm_min_translate","func":"msg.payload = \"The value read is lower than the minimum value!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3760,"y":2120,"wires":[["e683713.008809"]]},{"id":"e020dd1a.1d6db","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I1 Warning","name":"PreAlarm Max","x":4120,"y":2300,"wires":[]},{"id":"7ef57d1d.7ad204","type":"switch","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3550,"y":2320,"wires":[["44e0e48e.06ad2c","e387b20a.cedc6","d15cf381.337ca","3befdc62.e80744"],["596f94e.30eef6c","42bc95aa.32d50c"]]},{"id":"ba7cb849.9831b8","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_max_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value > msg.payload.props.alarmPreMax & msg.payload.value < msg.payload.props.alarmMax){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3380,"y":2320,"wires":[["7ef57d1d.7ad204"]]},{"id":"5ca24b30.fb35c4","type":"ui_template","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","group":"49de8910.30c838","name":"","order":68,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":3960,"y":2300,"wires":[["e020dd1a.1d6db"]]},{"id":"e387b20a.cedc6","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_max_translate","func":"msg.payload = \"The value read is high!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3770,"y":2300,"wires":[["5ca24b30.fb35c4"]]},{"id":"8585d5f5.9c5538","type":"ui_toast","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","position":"top right","displayTime":"5","highlight":"Orange","sendall":true,"outputs":0,"ok":"OK","cancel":"Cancel","raw":true,"topic":"I1 Warning","name":"PreAlarm Min","x":4120,"y":2500,"wires":[]},{"id":"d26159cf.ae9688","type":"switch","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","property":"payload.alarm_flag","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":3550,"y":2520,"wires":[["d376f924.2e11b8","df0bf5ff.969398","4451113.83185f","e0966c56.769b7"],["3860f9dd.c8c4e6","e20537e0.c282c8"]]},{"id":"841fe5a8.7264c8","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_min_detect","func":"var alarm_flag;\n\nif (msg.payload.props.enabled == true & msg.payload.value < msg.payload.props.alarmPreMin & msg.payload.value > msg.payload.props.alarmMin){\n    \n    alarm_flag = 1;\n\n}\n\nelse{\n    \n    alarm_flag = 0;\n    \n}\n\n\nmsg.payload.alarm_flag = alarm_flag;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3380,"y":2520,"wires":[["d26159cf.ae9688"]]},{"id":"a4aecfe5.fc025","type":"ui_template","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","group":"49de8910.30c838","name":"","order":56,"width":1,"height":1,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","x":3960,"y":2500,"wires":[["8585d5f5.9c5538"]]},{"id":"df0bf5ff.969398","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"prealarm_min_translate","func":"msg.payload = \"The value read is low!\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3770,"y":2500,"wires":[["a4aecfe5.fc025"]]},{"id":"4d849d2d.ea0de4","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3730,"y":1960,"wires":[["39b3efda.1b1b9"]]},{"id":"5c5a0a99.5b1544","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Alarm\",\n        \"Description\": \"Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3730,"y":2160,"wires":[["39b3efda.1b1b9"]]},{"id":"d15cf381.337ca","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\":\"Pre Maximum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3730,"y":2340,"wires":[["39b3efda.1b1b9"]]},{"id":"4451113.83185f","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"alarmArray","func":"var alarmArray = global.get(\"AlarmArray\") || [];\nvar count = alarmArray.length;\n\nvar time = new Date().toISOString();\n\nvar str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\nvar str2 = time.slice(11,19);\n\nvar time_str = str1 + \" \" + str2;\n\nalarmArray[count] = {\n        \"Time\": time_str,\n        \"Sensor\": msg.payload.props.name,\n        \"Value Read\" : String(Math.round(msg.payload.value*100)/100) + \" \" + msg.payload.props.units,\n        \"Type\" : \"Warning\",\n        \"Description\": \"Pre Minimum\",\n    };\n\ncount = count + 1;\n\nglobal.set(\"AlarmArray\", alarmArray);\n\nmsg.payload = alarmArray;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3730,"y":2540,"wires":[["39b3efda.1b1b9"]]},{"id":"39b3efda.1b1b9","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"ui_control","rules":[{"t":"set","p":"ui_control","pt":"msg","to":"{\"tabulator\":{\"columns\":[{\"title\":\"Time\",\"field\":\"Time\",\"align\":\"center\"},{\"title\":\"Sensor\",\"field\":\"Sensor\",\"align\":\"center\"},{\"formatterParams\":{\"target\":\"_blank\"},\"title\":\"Type\",\"field\":\"Type\",\"align\":\"center\",\"color\":\"ff0000\",\"formatter\":\"function(cell, formatterParams, onRendered) {var status = cell.getValue(); if(status == 'Alarm') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else if(status == 'Minimum') {cell.getElement().style.backgroundColor=\\\"#cc0000\\\";}else{cell.getElement().style.backgroundColor=\\\"#cc7a00\\\";} return status;}\"},{\"title\":\"Description\",\"field\":\"Description\",\"align\":\"center\"},{\"title\":\"Value Read\",\"field\":\"Value Read\",\"align\":\"center\"}],\"layout\":\"fitColumns\",\"movableColumns\":true,\"groupBy\":\"\"}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":4360,"y":2260,"wires":[["a2e5fcc4.1d547"]]},{"id":"fbea2b2a.89f398","type":"mraa-gpio-ain","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"I1","pin":"3","interval":"1000","x":2490,"y":1520,"wires":[["f94fd9.361c7028"]]},{"id":"b9e298ea.4e4c08","type":"ui_gauge","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"Gauge_I1","group":"49de8910.30c838","order":42,"width":9,"height":7,"gtype":"gage","title":"{{msg.payload.props.name}}","label":"{{msg.payload.props.units}}","format":"{{msg.payload.value}}","min":0,"max":"10","colors":["#cd3737","#00e626","#ca3838"],"seg1":"4","seg2":"8","x":3520,"y":1800,"wires":[]},{"id":"2380d822.7f7868","type":"json","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","property":"payload","action":"str","pretty":true,"x":3490,"y":1860,"wires":[["6b580b96.9a1084"]]},{"id":"6b580b96.9a1084","type":"file","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"Write File","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"false","x":3640,"y":1860,"wires":[[]]},{"id":"49ba5e34.80b33","type":"file in","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","filename":"usr/dados/config/I1.json","format":"utf8","chunk":false,"sendError":false,"x":2690,"y":1440,"wires":[["adc3cd2d.87c7c"]]},{"id":"adc3cd2d.87c7c","type":"json","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","property":"payload","action":"obj","pretty":false,"x":2870,"y":1440,"wires":[["f0215a82.522c58"]]},{"id":"1cc3e9f2.574e06","type":"inject","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"props","payload":"","payloadType":"date","x":2470,"y":1440,"wires":[["49ba5e34.80b33"]]},{"id":"f0215a82.522c58","type":"join","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2910,"y":1520,"wires":[["4664a56e.332c0c"]]},{"id":"f94fd9.361c7028","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2710,"y":1520,"wires":[["f0215a82.522c58"]]},{"id":"4664a56e.332c0c","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","func":"if (msg.payload.props.enabled==false){\n    msg.payload.value=\"Disabled\"; \n}\nelse{\nvar sensor=msg.payload.value; \nvar min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\n\nmsg.payload.value= ((sensor-204.6)/1023)*(max-min)+min; \n\nmsg.payload.value=Math.round(msg.payload.value*100)/100\n}\nmsg.payload.props.name=msg.payload.props.name+\"-I1\"\n\nvar GlobalSensorUnits = msg.payload.props.units;\n\nglobal.set(\"SensorUnitsI1\", GlobalSensorUnits);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3160,"y":1520,"wires":[["3b3de1b1.58e2de","e104eaba.48e5b8","ba7cb849.9831b8","841fe5a8.7264c8","fd8f2576.284a08","97826049.fbe27","d9a1cdaf.6a45e","cb940275.ebb95","684e5588.e4f57c","a64e5fbf.51cb5","4dd14cc6.ba4d94","93283383.b02c8"]]},{"id":"fd8f2576.284a08","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\nmsg = {payload:msg.payload,ui_control:{min:min,max:max},topic:\"Soil\"};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3340,"y":1800,"wires":[["b9e298ea.4e4c08"]]},{"id":"97826049.fbe27","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","func":"var recolha = flow.get(\"recolha\")\nvar nome = flow.get(\"nomeficheiro\")\nif (msg.payload.props.enabled==true && recolha==true){\n    var time=new Date().toISOString();\n    var sensor_name=msg.payload.props.name;\n    \n    var str1 = time.slice(8,10) + \"-\" + time.slice(5,7) + \"-\" + time.slice(2,4);\n    var str2 = time.slice(11,19);\n\n    var time_str = str1 + \" \" + str2;\n    \n    payload={\"t\":time_str,\"v\":msg.payload.value,\"s\":sensor_name};\n    msg.payload=payload\n    msg.filename = \"usr/dados/\"+ nome + \".json\";\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3340,"y":1860,"wires":[["2380d822.7f7868"]]},{"id":"5934b063.d014b","type":"ui_chart","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"Chart_I1","group":"49de8910.30c838","order":43,"width":12,"height":7,"label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"15","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":true,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":3760,"y":1560,"wires":[[]]},{"id":"d9a1cdaf.6a45e","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","func":"var min=msg.payload.props.rangeMin;\nvar max=msg.payload.props.rangeMax;\nvar data= msg.payload.value;\n\n\nmsg = {payload:data,ui_control:{ymin:min,ymax:max},topic:\"Value\"};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3340,"y":1560,"wires":[["5934b063.d014b"]]},{"id":"4dd14cc6.ba4d94","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"max_calc","func":"// Variable declaration\nvar valueMax = context.get(\"valueMax\") || 0;\nvar units = global.get(\"SensorUnitsI1\");\n\nif (valueMax == 0){\n    valueMax = msg.payload.value;\n}\nelse{\n    if (msg.payload.value > valueMax){\n        valueMax = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMax\", valueMax);\n\nmsg.payload.units = units;\nmsg.payload.max = valueMax;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3340,"y":1680,"wires":[["4d39ea.8edda618"]]},{"id":"a64e5fbf.51cb5","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"min_calc","func":"// Variable declaration\nvar valueMin = context.get(\"valueMin\") || 0;\nvar units = global.get(\"SensorUnitsI1\");\n\nif (valueMin == 0){\n    valueMin = msg.payload.value;\n}\nelse{\n    if (msg.payload.value < valueMin){\n        valueMin = msg.payload.value;\n    }\n}\n\n//Save the array\ncontext.set(\"valueMin\", valueMin);\n\nmsg.payload.units = units;\nmsg.payload.min = valueMin;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3340,"y":1620,"wires":[["52c48973.651b48"]]},{"id":"52c48973.651b48","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"min","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3570,"y":1620,"wires":[["96b37c73.de80f"]]},{"id":"4d39ea.8edda618","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"max","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3570,"y":1680,"wires":[["67fca018.813fd"]]},{"id":"93283383.b02c8","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"slope_calc","func":"var previousValue = context.get(\"previousValue\") || 0;\nvar prevTime = context.get(\"previousTime\") || 0;\n\nvar units = global.get(\"SensorUnitsI1\");\n\nvar actualTime = Date.now();\n\nif (prevTime != 0){\n    \nvar timeDiff = (actualTime - prevTime)/1000;\n\nvar delta = msg.payload.value - previousValue;\n\nvar slope = delta/timeDiff;\n\nslope = Math.round(slope*100)/100;\n\nmsg.payload.slope = slope;\n\n}\n\nelse{\n    msg.payload.slope = 0;\n}\n\ncontext.set(\"previousTime\", actualTime);\ncontext.set(\"previousValue\", msg.payload.value);\n\nmsg.payload.units = units;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3350,"y":1740,"wires":[["55b2c58e.595a1c"]]},{"id":"55b2c58e.595a1c","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3570,"y":1740,"wires":[["fabb7478.4906d8"]]},{"id":"fabb7478.4906d8","type":"ui_text","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","group":"49de8910.30c838","order":47,"width":4,"height":1,"name":"Slope_I1","label":"Slope","format":"{{msg.payload.slope}} {{msg.payload.units}}/s","layout":"row-spread","x":3760,"y":1740,"wires":[]},{"id":"96b37c73.de80f","type":"ui_text","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","group":"49de8910.30c838","order":50,"width":4,"height":1,"name":"Minimum_I1","label":"Minimum","format":"{{msg.payload.min}} {{msg.payload.units}}","layout":"row-spread","x":3770,"y":1620,"wires":[]},{"id":"67fca018.813fd","type":"ui_text","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","group":"49de8910.30c838","order":44,"width":4,"height":1,"name":"Maximum_I1","label":"Maximum","format":"{{msg.payload.max}} {{msg.payload.units}}","layout":"row-spread","x":3770,"y":1680,"wires":[]},{"id":"cb940275.ebb95","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"mean_calc","func":"// Variable declaration\nvar tot = context.get(\"tot\") || 0; \nvar valueCount = context.get(\"valueCount\") || 0;\n\nvalueCount = valueCount + 1;\n\ntot = tot + msg.payload.value;\n\nvar mean=0; \n\nif (valueCount != 0){\n    mean = tot/valueCount;\n}\n\nmean = Math.round(mean*100)/100;\nmsg.payload = mean;\n\ncontext.set(\"tot\", tot);\ncontext.set(\"valueCount\", valueCount);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3350,"y":1500,"wires":[["25d02d2.59f9bd2"]]},{"id":"684e5588.e4f57c","type":"function","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"mean_mobile_calc","func":"// Variable declaration\nvar valueArray = context.get(\"valueArray\") || []; // Get previous array of values, if it exists\nvar tot = 0;\nvar valueCount = valueArray.length; //Length of the array\n\n// If the array has less than 10 values, add another one\nif (valueCount < 10){\n    valueArray[valueCount] = msg.payload.value;\n}\n// If the array has 10 values, replace the oldest one\nelse{\n    \n    for (i=0; i<9; i++){\n        valueArray[i] = valueArray[i+1];\n    }\n    \n    valueArray[9] = msg.payload.value;\n}\n\n//Save the array\ncontext.set(\"valueArray\", valueArray)\n\n//\nif (valueCount < 10){\n    for (i = 0; i < valueCount + 1; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/(valueCount + 1);\n}\nelse{\n    for (i = 0; i < valueCount; i++){\n        tot = tot + valueArray[i];\n    }\n    var mean = tot/valueCount;    \n}\n\nmean = Math.round(mean*100)/100;\n\nmsg.payload = mean;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3370,"y":1440,"wires":[["2bd4943.cbe146c"]]},{"id":"2bd4943.cbe146c","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean_mobile","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3570,"y":1440,"wires":[["5934b063.d014b"]]},{"id":"25d02d2.59f9bd2","type":"change","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"mean","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3570,"y":1500,"wires":[["5934b063.d014b"]]},{"id":"30d55a64.e99ee6","type":"debug","z":"ce8e632f.2c0ec","g":"b5e15dad.eb119","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3510,"y":2000,"wires":[]},{"id":"de44a159.0df36","type":"debug","z":"ce8e632f.2c0ec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3530,"y":2260,"wires":[]},{"id":"4842b738.2d7878","type":"debug","z":"ce8e632f.2c0ec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3530,"y":2180,"wires":[]},{"id":"42bc95aa.32d50c","type":"debug","z":"ce8e632f.2c0ec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3530,"y":2440,"wires":[]},{"id":"3befdc62.e80744","type":"debug","z":"ce8e632f.2c0ec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3530,"y":2360,"wires":[]},{"id":"e20537e0.c282c8","type":"debug","z":"ce8e632f.2c0ec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3530,"y":2640,"wires":[]},{"id":"e0966c56.769b7","type":"debug","z":"ce8e632f.2c0ec","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3530,"y":2560,"wires":[]},{"id":"a2e5fcc4.1d547","type":"ui_table","z":"ce8e632f.2c0ec","group":"1b53153d.32bcab","name":"","order":1,"width":27,"height":11,"columns":[],"outputs":0,"cts":false,"x":2260,"y":1060,"wires":[]}]